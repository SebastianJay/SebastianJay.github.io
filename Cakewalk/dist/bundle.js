!function e(t,i,n){function o(r,s){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){var i=t[r][1][e];return o(i||e)},c,c.exports,e,t,i,n)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){var n,o,a;a=e("./Utils"),o=e("./Inline"),n=function(){function e(){}return e.indentation=4,e.prototype.dump=function(e,t,i,n,r){var s,l,d,c,p,u,h;if(null==t&&(t=0),null==i&&(i=0),null==n&&(n=!1),null==r&&(r=null),c="",p=i?a.strRepeat(" ",i):"",t<=0||"object"!=typeof e||e instanceof Date||a.isEmpty(e))c+=p+o.dump(e,n,r);else if(e instanceof Array)for(s=0,d=e.length;s<d;s++)u=e[s],c+=p+"-"+((h=t-1<=0||"object"!=typeof u||a.isEmpty(u))?" ":"\n")+this.dump(u,t-1,h?0:i+this.indentation,n,r)+(h?"\n":"");else for(l in e)u=e[l],h=t-1<=0||"object"!=typeof u||a.isEmpty(u),c+=p+o.dump(l,n,r)+":"+(h?" ":"\n")+this.dump(u,t-1,h?0:i+this.indentation,n,r)+(h?"\n":"");return c},e}(),t.exports=n},{"./Inline":6,"./Utils":10}],2:[function(e,t,i){var n,o;o=e("./Pattern"),n=function(){function e(){}var t;return e.LIST_ESCAPEES=["\\","\\\\",'\\"','"',"\0","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","","","","","","","","","","","","","",(t=String.fromCharCode)(133),t(160),t(8232),t(8233)],e.LIST_ESCAPED=["\\\\",'\\"','\\"','\\"',"\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"],e.MAPPING_ESCAPEES_TO_ESCAPED=function(){var t,i,n,o;for(n={},t=i=0,o=e.LIST_ESCAPEES.length;0<=o?i<o:i>o;t=0<=o?++i:--i)n[e.LIST_ESCAPEES[t]]=e.LIST_ESCAPED[t];return n}(),e.PATTERN_CHARACTERS_TO_ESCAPE=new o("[\\x00-\\x1f]|Ã‚Â…|Ã‚Â |Ã¢Â€Â¨|Ã¢Â€Â©"),e.PATTERN_MAPPING_ESCAPEES=new o(e.LIST_ESCAPEES.join("|").split("\\").join("\\\\")),e.PATTERN_SINGLE_QUOTING=new o("[\\s'\":{}[\\],&*#?]|^[-?|<>=!%@`]"),e.requiresDoubleQuoting=function(e){return this.PATTERN_CHARACTERS_TO_ESCAPE.test(e)},e.escapeWithDoubleQuotes=function(e){return'"'+this.PATTERN_MAPPING_ESCAPEES.replace(e,function(e){return function(t){return e.MAPPING_ESCAPEES_TO_ESCAPED[t]}}(this))+'"'},e.requiresSingleQuoting=function(e){return this.PATTERN_SINGLE_QUOTING.test(e)},e.escapeWithSingleQuotes=function(e){return"'"+e.replace(/'/g,"''")+"'"},e}(),t.exports=n},{"./Pattern":8}],3:[function(e,t,i){var n,o=function(e,t){function i(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=function(e){function t(e,t,i){this.message=e,this.parsedLine=t,this.snippet=i}return o(t,e),t.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<DumpException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<DumpException> "+this.message},t}(Error),t.exports=n},{}],4:[function(e,t,i){var n,o=function(e,t){function i(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=function(e){function t(e,t,i){this.message=e,this.parsedLine=t,this.snippet=i}return o(t,e),t.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<ParseException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseException> "+this.message},t}(Error),t.exports=n},{}],5:[function(e,t,i){var n,o=function(e,t){function i(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},a={}.hasOwnProperty;n=function(e){function t(e,t,i){this.message=e,this.parsedLine=t,this.snippet=i}return o(t,e),t.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<ParseMore> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseMore> "+this.message},t}(Error),t.exports=n},{}],6:[function(e,t,i){var n,o,a,r,s,l,d,c=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1};s=e("./Pattern"),l=e("./Unescaper"),n=e("./Escaper"),d=e("./Utils"),a=e("./Exception/ParseException"),r=e("./Exception/ParseMore"),e("./Exception/DumpException"),o=function(){function e(){}return e.REGEX_QUOTED_STRING="(?:\"(?:[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\"|'(?:[^']*(?:''[^']*)*)')",e.PATTERN_TRAILING_COMMENTS=new s("^\\s*#.*$"),e.PATTERN_QUOTED_SCALAR=new s("^"+e.REGEX_QUOTED_STRING),e.PATTERN_THOUSAND_NUMERIC_SCALAR=new s("^(-|\\+)?[0-9,]+(\\.[0-9]+)?$"),e.PATTERN_SCALAR_BY_DELIMITERS={},e.settings={},e.configure=function(e,t){null==e&&(e=null),null==t&&(t=null),this.settings.exceptionOnInvalidType=e,this.settings.objectDecoder=t},e.parse=function(e,t,i){var n,o;if(null==t&&(t=!1),null==i&&(i=null),this.settings.exceptionOnInvalidType=t,this.settings.objectDecoder=i,null==e)return"";if(0===(e=d.trim(e)).length)return"";switch(n={exceptionOnInvalidType:t,objectDecoder:i,i:0},e.charAt(0)){case"[":o=this.parseSequence(e,n),++n.i;break;case"{":o=this.parseMapping(e,n),++n.i;break;default:o=this.parseScalar(e,null,['"',"'"],n)}if(""!==this.PATTERN_TRAILING_COMMENTS.replace(e.slice(n.i),""))throw new a('Unexpected characters near "'+e.slice(n.i)+'".');return o},e.dump=function(e,t,i){var o,a,r;return null==t&&(t=!1),null==i&&(i=null),null==e?"null":(r=typeof e,"object"===r?e instanceof Date?e.toISOString():null==i||"string"!=typeof(a=i(e))&&null==a?this.dumpObject(e):a:"boolean"===r?e?"true":"false":d.isDigits(e)?"string"===r?"'"+e+"'":String(parseInt(e)):d.isNumeric(e)?"string"===r?"'"+e+"'":String(parseFloat(e)):"number"===r?Infinity===e?".Inf":-Infinity===e?"-.Inf":isNaN(e)?".NaN":e:n.requiresDoubleQuoting(e)?n.escapeWithDoubleQuotes(e):n.requiresSingleQuoting(e)?n.escapeWithSingleQuotes(e):""===e?'""':d.PATTERN_DATE.test(e)?"'"+e+"'":"null"===(o=e.toLowerCase())||"~"===o||"true"===o||"false"===o?"'"+e+"'":e)},e.dumpObject=function(e,t,i){var n,o,a,r,s;if(null==i&&(i=null),e instanceof Array){for(r=[],n=0,a=e.length;n<a;n++)s=e[n],r.push(this.dump(s));return"["+r.join(", ")+"]"}r=[];for(o in e)s=e[o],r.push(this.dump(o)+": "+this.dump(s));return"{"+r.join(", ")+"}"},e.parseScalar=function(e,t,i,n,o){var r,l,p,u,h,f,w,y,m;if(null==t&&(t=null),null==i&&(i=['"',"'"]),null==n&&(n=null),null==o&&(o=!0),null==n&&(n={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),r=n.i,f=e.charAt(r),c.call(i,f)>=0){if(u=this.parseQuotedScalar(e,n),r=n.i,null!=t&&(m=d.ltrim(e.slice(r)," "),w=m.charAt(0),!(c.call(t,w)>=0)))throw new a("Unexpected characters ("+e.slice(r)+").")}else{if(t){if(l=t.join("|"),null==(h=this.PATTERN_SCALAR_BY_DELIMITERS[l])&&(h=new s("^(.+?)("+l+")"),this.PATTERN_SCALAR_BY_DELIMITERS[l]=h),!(p=h.exec(e.slice(r))))throw new a("Malformed inline YAML string ("+e+").");r+=(u=p[1]).length}else r+=(u=e.slice(r)).length,-1!==(y=u.indexOf(" #"))&&(u=d.rtrim(u.slice(0,y)));o&&(u=this.evaluateScalar(u,n))}return n.i=r,u},e.parseQuotedScalar=function(e,t){var i,n,o;if(i=t.i,!(n=this.PATTERN_QUOTED_SCALAR.exec(e.slice(i))))throw new r("Malformed inline YAML string ("+e.slice(i)+").");return o=n[0].substr(1,n[0].length-2),o='"'===e.charAt(i)?l.unescapeDoubleQuotedString(o):l.unescapeSingleQuotedString(o),i+=n[0].length,t.i=i,o},e.parseSequence=function(e,t){var i,n,o,a,s,l;for(a=[],o=e.length,i=t.i,i+=1;i<o;){switch(t.i=i,e.charAt(i)){case"[":a.push(this.parseSequence(e,t)),i=t.i;break;case"{":a.push(this.parseMapping(e,t)),i=t.i;break;case"]":return a;case",":case" ":case"\n":break;default:if(n='"'===(s=e.charAt(i))||"'"===s,l=this.parseScalar(e,[",","]"],['"',"'"],t),i=t.i,!n&&"string"==typeof l&&(-1!==l.indexOf(": ")||-1!==l.indexOf(":\n")))try{l=this.parseMapping("{"+l+"}")}catch(e){e}a.push(l),--i}++i}throw new r("Malformed inline YAML string "+e)},e.parseMapping=function(e,t){var i,n,o,a,s,l,d;for(s={},a=e.length,n=t.i,n+=1,l=!1;n<a;){switch(t.i=n,e.charAt(n)){case" ":case",":case"\n":++n,t.i=n,l=!0;break;case"}":return s}if(l)l=!1;else for(o=this.parseScalar(e,[":"," ","\n"],['"',"'"],t,!1),n=t.i,i=!1;n<a;){switch(t.i=n,e.charAt(n)){case"[":d=this.parseSequence(e,t),n=t.i,void 0===s[o]&&(s[o]=d),i=!0;break;case"{":d=this.parseMapping(e,t),n=t.i,void 0===s[o]&&(s[o]=d),i=!0;break;case":":case" ":case"\n":break;default:d=this.parseScalar(e,[",","}"],['"',"'"],t),n=t.i,void 0===s[o]&&(s[o]=d),i=!0,--n}if(++n,i)break}}throw new r("Malformed inline YAML string "+e)},e.evaluateScalar=function(e,t){var i,n,o,r,s,l,c,p,u;switch(e=d.trim(e),c=e.toLowerCase()){case"null":case"":case"~":return null;case"true":return!0;case"false":return!1;case".inf":return Infinity;case".nan":return NaN;case"-.inf":return Infinity;default:switch(c.charAt(0)){case"!":switch(r=e.indexOf(" "),-1===r?c:c.slice(0,r)){case"!":return-1!==r?parseInt(this.parseScalar(e.slice(2))):null;case"!str":return d.ltrim(e.slice(4));case"!!str":return d.ltrim(e.slice(5));case"!!int":return parseInt(this.parseScalar(e.slice(5)));case"!!bool":return d.parseBoolean(this.parseScalar(e.slice(6)),!1);case"!!float":return parseFloat(this.parseScalar(e.slice(7)));case"!!timestamp":return d.stringToDate(d.ltrim(e.slice(11)));default:if(null==t&&(t={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),s=t.objectDecoder,o=t.exceptionOnInvalidType,s)return u=d.rtrim(e),r=u.indexOf(" "),-1===r?s(u,null):((p=d.ltrim(u.slice(r+1))).length>0||(p=null),s(u.slice(0,r),p));if(o)throw new a("Custom object support when parsing a YAML file has been disabled.");return null}break;case"0":return"0x"===e.slice(0,2)?d.hexDec(e):d.isDigits(e)?d.octDec(e):d.isNumeric(e)?parseFloat(e):e;case"+":return d.isDigits(e)?(l=e,i=parseInt(l),l===String(i)?i:l):d.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e;case"-":return d.isDigits(e.slice(1))?"0"===e.charAt(1)?-d.octDec(e.slice(1)):(l=e.slice(1),i=parseInt(l),l===String(i)?-i:-l):d.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e;default:return(n=d.stringToDate(e))?n:d.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e}}},e}(),t.exports=o},{"./Escaper":2,"./Exception/DumpException":3,"./Exception/ParseException":4,"./Exception/ParseMore":5,"./Pattern":8,"./Unescaper":9,"./Utils":10}],7:[function(e,t,i){var n,o,a,r,s,l;n=e("./Inline"),s=e("./Pattern"),l=e("./Utils"),o=e("./Exception/ParseException"),a=e("./Exception/ParseMore"),r=function(){function e(e){this.offset=null!=e?e:0,this.lines=[],this.currentLineNb=-1,this.currentLine="",this.refs={}}return e.prototype.PATTERN_FOLDED_SCALAR_ALL=new s("^(?:(?<type>![^\\|>]*)\\s+)?(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),e.prototype.PATTERN_FOLDED_SCALAR_END=new s("(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),e.prototype.PATTERN_SEQUENCE_ITEM=new s("^\\-((?<leadspaces>\\s+)(?<value>.+?))?\\s*$"),e.prototype.PATTERN_ANCHOR_VALUE=new s("^&(?<ref>[^ ]+) *(?<value>.*)"),e.prototype.PATTERN_COMPACT_NOTATION=new s("^(?<key>"+n.REGEX_QUOTED_STRING+"|[^ '\"\\{\\[].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),e.prototype.PATTERN_MAPPING_ITEM=new s("^(?<key>"+n.REGEX_QUOTED_STRING+"|[^ '\"\\[\\{].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),e.prototype.PATTERN_DECIMAL=new s("\\d+"),e.prototype.PATTERN_INDENT_SPACES=new s("^ +"),e.prototype.PATTERN_TRAILING_LINES=new s("(\n*)$"),e.prototype.PATTERN_YAML_HEADER=new s("^\\%YAML[: ][\\d\\.]+.*\n","m"),e.prototype.PATTERN_LEADING_COMMENTS=new s("^(\\#.*?\n)+","m"),e.prototype.PATTERN_DOCUMENT_MARKER_START=new s("^\\-\\-\\-.*?\n","m"),e.prototype.PATTERN_DOCUMENT_MARKER_END=new s("^\\.\\.\\.\\s*$","m"),e.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION={},e.prototype.CONTEXT_NONE=0,e.prototype.CONTEXT_SEQUENCE=1,e.prototype.CONTEXT_MAPPING=2,e.prototype.parse=function(t,i,a){var r,s,d,c,p,u,h,f,w,y,m,g,C,_,v,b,M,k,P,V,S,T,x,E,O,A,L,j,I,F,D,G,R,H,N,B;for(null==i&&(i=!1),null==a&&(a=null),this.currentLineNb=-1,this.currentLine="",this.lines=this.cleanup(t).split("\n"),u=null,p=this.CONTEXT_NONE,s=!1;this.moveToNextLine();)if(!this.isCurrentLineEmpty()){if("\t"===this.currentLine[0])throw new o("A YAML file cannot contain tabs as indentation.",this.getRealCurrentLineNb()+1,this.currentLine);if(m=E=!1,B=this.PATTERN_SEQUENCE_ITEM.exec(this.currentLine)){if(this.CONTEXT_MAPPING===p)throw new o("You cannot define a sequence item when in a mapping");p=this.CONTEXT_SEQUENCE,null==u&&(u=[]),null!=B.value&&(x=this.PATTERN_ANCHOR_VALUE.exec(B.value))&&(m=x.ref,B.value=x.value),null==B.value||""===l.trim(B.value," ")||0===l.ltrim(B.value," ").indexOf("#")?this.currentLineNb<this.lines.length-1&&!this.isNextLineUnIndentedCollection()?((I=new e(c=this.getRealCurrentLineNb()+1)).refs=this.refs,u.push(I.parse(this.getNextEmbedBlock(null,!0),i,a))):u.push(null):(null!=(F=B.leadspaces)?F.length:void 0)&&(x=this.PATTERN_COMPACT_NOTATION.exec(B.value))?((I=new e(c=this.getRealCurrentLineNb())).refs=this.refs,d=B.value,y=this.getCurrentLineIndentation(),this.isNextLineIndented(!1)&&(d+="\n"+this.getNextEmbedBlock(y+B.leadspaces.length+1,!0)),u.push(I.parse(d,i,a))):u.push(this.parseValue(B.value,i,a))}else{if(!(B=this.PATTERN_MAPPING_ITEM.exec(this.currentLine))||-1!==B.key.indexOf(" #")){if(1===(S=this.lines.length)||2===S&&l.isEmpty(this.lines[1])){try{t=n.parse(this.lines[0],i,a)}catch(e){throw h=e,h.parsedLine=this.getRealCurrentLineNb()+1,h.snippet=this.currentLine,h}if("object"==typeof t){if(t instanceof Array)f=t[0];else for(_ in t){f=t[_];break}if("string"==typeof f&&0===f.indexOf("*")){for(u=[],O=0,V=t.length;O<V;O++)r=t[O],u.push(this.refs[r.slice(1)]);t=u}}return t}if("["===(G=l.ltrim(t).charAt(0))||"{"===G)try{return n.parse(t,i,a)}catch(e){throw h=e,h.parsedLine=this.getRealCurrentLineNb()+1,h.snippet=this.currentLine,h}throw new o("Unable to parse.",this.getRealCurrentLineNb()+1,this.currentLine)}if(this.CONTEXT_SEQUENCE===p)throw new o("You cannot define a mapping item when in a sequence");p=this.CONTEXT_MAPPING,null==u&&(u={}),n.configure(i,a);try{_=n.parseScalar(B.key)}catch(e){throw h=e,h.parsedLine=this.getRealCurrentLineNb()+1,h.snippet=this.currentLine,h}if("<<"===_)if(E=!0,s=!0,0===(null!=(D=B.value)?D.indexOf("*"):void 0)){if(R=B.value.slice(1),null==this.refs[R])throw new o('Reference "'+R+'" does not exist.',this.getRealCurrentLineNb()+1,this.currentLine);if("object"!=typeof(H=this.refs[R]))throw new o("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(H instanceof Array)for(w=g=0,M=H.length;g<M;w=++g)t=H[w],null==u[A=String(w)]&&(u[A]=t);else for(_ in H)t=H[_],null==u[_]&&(u[_]=t)}else{if(t=null!=B.value&&""!==B.value?B.value:this.getNextEmbedBlock(),c=this.getRealCurrentLineNb()+1,I=new e(c),I.refs=this.refs,"object"!=typeof(L=I.parse(t,i)))throw new o("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(L instanceof Array)for(v=0,k=L.length;v<k;v++){if("object"!=typeof(j=L[v]))throw new o("Merge items must be objects.",this.getRealCurrentLineNb()+1,j);if(j instanceof Array)for(w=T=0,P=j.length;T<P;w=++T)t=j[w],C=String(w),u.hasOwnProperty(C)||(u[C]=t);else for(_ in j)t=j[_],u.hasOwnProperty(_)||(u[_]=t)}else for(_ in L)t=L[_],u.hasOwnProperty(_)||(u[_]=t)}else null!=B.value&&(x=this.PATTERN_ANCHOR_VALUE.exec(B.value))&&(m=x.ref,B.value=x.value);E||(null==B.value||""===l.trim(B.value," ")||0===l.ltrim(B.value," ").indexOf("#")?this.isNextLineIndented()||this.isNextLineUnIndentedCollection()?((I=new e(c=this.getRealCurrentLineNb()+1)).refs=this.refs,N=I.parse(this.getNextEmbedBlock(),i,a),(s||void 0===u[_])&&(u[_]=N)):(s||void 0===u[_])&&(u[_]=null):(N=this.parseValue(B.value,i,a),(s||void 0===u[_])&&(u[_]=N)))}if(m)if(u instanceof Array)this.refs[m]=u[u.length-1];else{b=null;for(_ in u)b=_;this.refs[m]=u[b]}}return l.isEmpty(u)?null:u},e.prototype.getRealCurrentLineNb=function(){return this.currentLineNb+this.offset},e.prototype.getCurrentLineIndentation=function(){return this.currentLine.length-l.ltrim(this.currentLine," ").length},e.prototype.getNextEmbedBlock=function(e,t){var i,n,a,r,s,d,c;if(null==e&&(e=null),null==t&&(t=!1),this.moveToNextLine(),null==e){if(r=this.getCurrentLineIndentation(),c=this.isStringUnIndentedCollectionItem(this.currentLine),!this.isCurrentLineEmpty()&&0===r&&!c)throw new o("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine)}else r=e;for(i=[this.currentLine.slice(r)],t||(a=this.isStringUnIndentedCollectionItem(this.currentLine)),s=!(d=this.PATTERN_FOLDED_SCALAR_END).test(this.currentLine);this.moveToNextLine();)if((n=this.getCurrentLineIndentation())===r&&(s=!d.test(this.currentLine)),!s||!this.isCurrentLineComment())if(this.isCurrentLineBlank())i.push(this.currentLine.slice(r));else{if(a&&!this.isStringUnIndentedCollectionItem(this.currentLine)&&n===r){this.moveToPreviousLine();break}if(n>=r)i.push(this.currentLine.slice(r));else if("#"!==l.ltrim(this.currentLine).charAt(0)){if(0===n){this.moveToPreviousLine();break}throw new o("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine)}}return i.join("\n")},e.prototype.moveToNextLine=function(){return!(this.currentLineNb>=this.lines.length-1)&&(this.currentLine=this.lines[++this.currentLineNb],!0)},e.prototype.moveToPreviousLine=function(){this.currentLine=this.lines[--this.currentLineNb]},e.prototype.parseValue=function(e,t,i){var r,s,d,c,p,u,h,f;if(0===e.indexOf("*")){if(p=e.indexOf("#"),e=-1!==p?e.substr(1,p-2):e.slice(1),void 0===this.refs[e])throw new o('Reference "'+e+'" does not exist.',this.currentLine);return this.refs[e]}if(d=this.PATTERN_FOLDED_SCALAR_ALL.exec(e))return c=null!=(u=d.modifiers)?u:"",s=Math.abs(parseInt(c)),isNaN(s)&&(s=0),f=this.parseFoldedScalar(d.separator,this.PATTERN_DECIMAL.replace(c,""),s),null!=d.type?(n.configure(t,i),n.parseScalar(d.type+" "+f)):f;if("["!==(h=e.charAt(0))&&"{"!==h&&'"'!==h&&"'"!==h)return this.isNextLineIndented()&&(e+="\n"+this.getNextEmbedBlock()),n.parse(e,t,i);for(;;)try{return n.parse(e,t,i)}catch(t){if(!((r=t)instanceof a&&this.moveToNextLine()))throw r.parsedLine=this.getRealCurrentLineNb()+1,r.snippet=this.currentLine,r;e+="\n"+l.trim(this.currentLine," ")}},e.prototype.parseFoldedScalar=function(t,i,n){var o,a,r,d,c,p,u,h,f,w;if(null==i&&(i=""),null==n&&(n=0),!(u=this.moveToNextLine()))return"";for(o=this.isCurrentLineBlank(),w="";u&&o;)(u=this.moveToNextLine())&&(w+="\n",o=this.isCurrentLineBlank());if(0===n&&(c=this.PATTERN_INDENT_SPACES.exec(this.currentLine))&&(n=c[0].length),n>0)for(null==(h=this.PATTERN_FOLDED_SCALAR_BY_INDENTATION[n])&&(h=new s("^ {"+n+"}(.*)$"),e.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION[n]=h);u&&(o||(c=h.exec(this.currentLine)));)w+=o?this.currentLine.slice(n):c[1],(u=this.moveToNextLine())&&(w+="\n",o=this.isCurrentLineBlank());else u&&(w+="\n");if(u&&this.moveToPreviousLine(),">"===t){for(p="",a=0,r=(f=w.split("\n")).length;a<r;a++)0===(d=f[a]).length||" "===d.charAt(0)?p=l.rtrim(p," ")+d+"\n":p+=d+" ";w=p}return"+"!==i&&(w=l.rtrim(w)),""===i?w=this.PATTERN_TRAILING_LINES.replace(w,"\n"):"-"===i&&(w=this.PATTERN_TRAILING_LINES.replace(w,"")),w},e.prototype.isNextLineIndented=function(e){var t,i,n;if(null==e&&(e=!0),i=this.getCurrentLineIndentation(),t=!this.moveToNextLine(),e)for(;!t&&this.isCurrentLineEmpty();)t=!this.moveToNextLine();else for(;!t&&this.isCurrentLineBlank();)t=!this.moveToNextLine();return!t&&(n=!1,this.getCurrentLineIndentation()>i&&(n=!0),this.moveToPreviousLine(),n)},e.prototype.isCurrentLineEmpty=function(){var e;return 0===(e=l.trim(this.currentLine," ")).length||"#"===e.charAt(0)},e.prototype.isCurrentLineBlank=function(){return""===l.trim(this.currentLine," ")},e.prototype.isCurrentLineComment=function(){return"#"===l.ltrim(this.currentLine," ").charAt(0)},e.prototype.cleanup=function(e){var t,i,n,o,a,r,s,d,c,p,u,h,f,w;for(-1!==e.indexOf("\r")&&(e=e.split("\r\n").join("\n").split("\r").join("\n")),t=0,e=(p=this.PATTERN_YAML_HEADER.replaceAll(e,""))[0],t=p[1],this.offset+=t,w=(u=this.PATTERN_LEADING_COMMENTS.replaceAll(e,"",1))[0],1===(t=u[1])&&(this.offset+=l.subStrCount(e,"\n")-l.subStrCount(w,"\n"),e=w),w=(h=this.PATTERN_DOCUMENT_MARKER_START.replaceAll(e,"",1))[0],1===(t=h[1])&&(this.offset+=l.subStrCount(e,"\n")-l.subStrCount(w,"\n"),e=w,e=this.PATTERN_DOCUMENT_MARKER_END.replace(e,"")),f=-1,o=0,r=(c=e.split("\n")).length;o<r;o++)d=c[o],0!==l.trim(d," ").length&&(n=d.length-l.ltrim(d).length,(-1===f||n<f)&&(f=n));if(f>0){for(i=a=0,s=c.length;a<s;i=++a)d=c[i],c[i]=d.slice(f);e=c.join("\n")}return e},e.prototype.isNextLineUnIndentedCollection=function(e){var t,i;for(null==e&&(e=null),null==e&&(e=this.getCurrentLineIndentation()),t=this.moveToNextLine();t&&this.isCurrentLineEmpty();)t=this.moveToNextLine();return!1!==t&&(i=!1,this.getCurrentLineIndentation()===e&&this.isStringUnIndentedCollectionItem(this.currentLine)&&(i=!0),this.moveToPreviousLine(),i)},e.prototype.isStringUnIndentedCollectionItem=function(){return"-"===this.currentLine||"- "===this.currentLine.slice(0,2)},e}(),t.exports=r},{"./Exception/ParseException":4,"./Exception/ParseMore":5,"./Inline":6,"./Pattern":8,"./Utils":10}],8:[function(e,t,i){var n;n=function(){function e(e,t){var i,n,o,a,r,s,l,d,c;for(null==t&&(t=""),o="",r=e.length,s=null,n=0,a=0;a<r;){if("\\"===(i=e.charAt(a)))o+=e.slice(a,+(a+1)+1||9e9),a++;else if("("===i)if(a<r-2)if("(?:"===(d=e.slice(a,+(a+2)+1||9e9)))a+=2,o+=d;else if("(?<"===d)for(n++,a+=2,l="";a+1<r;){if(">"===(c=e.charAt(a+1))){o+="(",a++,l.length>0&&(null==s&&(s={}),s[l]=n);break}l+=c,a++}else o+=i,n++;else o+=i;else o+=i;a++}this.rawRegex=e,this.cleanedRegex=o,this.regex=new RegExp(this.cleanedRegex,"g"+t.replace("g","")),this.mapping=s}return e.prototype.regex=null,e.prototype.rawRegex=null,e.prototype.cleanedRegex=null,e.prototype.mapping=null,e.prototype.exec=function(e){var t,i,n,o;if(this.regex.lastIndex=0,null==(i=this.regex.exec(e)))return null;if(null!=this.mapping){o=this.mapping;for(n in o)t=o[n],i[n]=i[t]}return i},e.prototype.test=function(e){return this.regex.lastIndex=0,this.regex.test(e)},e.prototype.replace=function(e,t){return this.regex.lastIndex=0,e.replace(this.regex,t)},e.prototype.replaceAll=function(e,t,i){var n;for(null==i&&(i=0),this.regex.lastIndex=0,n=0;this.regex.test(e)&&(0===i||n<i);)this.regex.lastIndex=0,e=e.replace(this.regex,t),n++;return[e,n]},e}(),t.exports=n},{}],9:[function(e,t,i){var n,o,a;a=e("./Utils"),n=e("./Pattern"),o=function(){function e(){}return e.PATTERN_ESCAPED_CHARACTER=new n('\\\\([0abt\tnvfre "\\/\\\\N_LP]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})'),e.unescapeSingleQuotedString=function(e){return e.replace(/\'\'/g,"'")},e.unescapeDoubleQuotedString=function(e){return null==this._unescapeCallback&&(this._unescapeCallback=function(e){return function(t){return e.unescapeCharacter(t)}}(this)),this.PATTERN_ESCAPED_CHARACTER.replace(e,this._unescapeCallback)},e.unescapeCharacter=function(e){var t;switch(t=String.fromCharCode,e.charAt(1)){case"0":return t(0);case"a":return t(7);case"b":return t(8);case"t":case"\t":return"\t";case"n":return"\n";case"v":return t(11);case"f":return t(12);case"r":return t(13);case"e":return t(27);case" ":return" ";case'"':return'"';case"/":return"/";case"\\":return"\\";case"N":return t(133);case"_":return t(160);case"L":return t(8232);case"P":return t(8233);case"x":return a.utf8chr(a.hexDec(e.substr(2,2)));case"u":return a.utf8chr(a.hexDec(e.substr(2,4)));case"U":return a.utf8chr(a.hexDec(e.substr(2,8)));default:return""}},e}(),t.exports=o},{"./Pattern":8,"./Utils":10}],10:[function(e,t,i){var n,o,a={}.hasOwnProperty;n=e("./Pattern"),o=function(){function t(){}return t.REGEX_LEFT_TRIM_BY_CHAR={},t.REGEX_RIGHT_TRIM_BY_CHAR={},t.REGEX_SPACES=/\s+/g,t.REGEX_DIGITS=/^\d+$/,t.REGEX_OCTAL=/[^0-7]/gi,t.REGEX_HEXADECIMAL=/[^a-f0-9]/gi,t.PATTERN_DATE=new n("^(?<year>[0-9][0-9][0-9][0-9])-(?<month>[0-9][0-9]?)-(?<day>[0-9][0-9]?)(?:(?:[Tt]|[ \t]+)(?<hour>[0-9][0-9]?):(?<minute>[0-9][0-9]):(?<second>[0-9][0-9])(?:.(?<fraction>[0-9]*))?(?:[ \t]*(?<tz>Z|(?<tz_sign>[-+])(?<tz_hour>[0-9][0-9]?)(?::(?<tz_minute>[0-9][0-9]))?))?)?$","i"),t.LOCAL_TIMEZONE_OFFSET=60*(new Date).getTimezoneOffset()*1e3,t.trim=function(e,t){var i,n;return null==t&&(t="\\s"),null==(i=this.REGEX_LEFT_TRIM_BY_CHAR[t])&&(this.REGEX_LEFT_TRIM_BY_CHAR[t]=i=new RegExp("^"+t+t+"*")),i.lastIndex=0,null==(n=this.REGEX_RIGHT_TRIM_BY_CHAR[t])&&(this.REGEX_RIGHT_TRIM_BY_CHAR[t]=n=new RegExp(t+""+t+"*$")),n.lastIndex=0,e.replace(i,"").replace(n,"")},t.ltrim=function(e,t){var i;return null==t&&(t="\\s"),null==(i=this.REGEX_LEFT_TRIM_BY_CHAR[t])&&(this.REGEX_LEFT_TRIM_BY_CHAR[t]=i=new RegExp("^"+t+t+"*")),i.lastIndex=0,e.replace(i,"")},t.rtrim=function(e,t){var i;return null==t&&(t="\\s"),null==(i=this.REGEX_RIGHT_TRIM_BY_CHAR[t])&&(this.REGEX_RIGHT_TRIM_BY_CHAR[t]=i=new RegExp(t+""+t+"*$")),i.lastIndex=0,e.replace(i,"")},t.isEmpty=function(e){return!e||""===e||"0"===e||e instanceof Array&&0===e.length||this.isEmptyObject(e)},t.isEmptyObject=function(e){var t;return e instanceof Object&&0===function(){var i;i=[];for(t in e)a.call(e,t)&&i.push(t);return i}().length},t.subStrCount=function(e,t,i,n){var o,a,r,s,l,d;for(o=0,e=""+e,t=""+t,null!=i&&(e=e.slice(i)),null!=n&&(e=e.slice(0,n)),s=e.length,d=t.length,a=r=0,l=s;0<=l?r<l:r>l;a=0<=l?++r:--r)t===e.slice(a,d)&&(o++,a+=d-1);return o},t.isDigits=function(e){return this.REGEX_DIGITS.lastIndex=0,this.REGEX_DIGITS.test(e)},t.octDec=function(e){return this.REGEX_OCTAL.lastIndex=0,parseInt((e+"").replace(this.REGEX_OCTAL,""),8)},t.hexDec=function(e){return this.REGEX_HEXADECIMAL.lastIndex=0,"0x"===((e=this.trim(e))+"").slice(0,2)&&(e=(e+"").slice(2)),parseInt((e+"").replace(this.REGEX_HEXADECIMAL,""),16)},t.utf8chr=function(e){var t;return t=String.fromCharCode,128>(e%=2097152)?t(e):2048>e?t(192|e>>6)+t(128|63&e):65536>e?t(224|e>>12)+t(128|e>>6&63)+t(128|63&e):t(240|e>>18)+t(128|e>>12&63)+t(128|e>>6&63)+t(128|63&e)},t.parseBoolean=function(e,t){var i;return null==t&&(t=!0),"string"==typeof e?(i=e.toLowerCase(),!(!t&&"no"===i)&&("0"!==i&&("false"!==i&&""!==i))):!!e},t.isNumeric=function(e){return this.REGEX_SPACES.lastIndex=0,"number"==typeof e||"string"==typeof e&&!isNaN(e)&&""!==e.replace(this.REGEX_SPACES,"")},t.stringToDate=function(e){var t,i,n,o,a,r,s,l,d,c;if(!(null!=e?e.length:void 0))return null;if(!(a=this.PATTERN_DATE.exec(e)))return null;if(c=parseInt(a.year,10),s=parseInt(a.month,10)-1,i=parseInt(a.day,10),null==a.hour)return t=new Date(Date.UTC(c,s,i));if(o=parseInt(a.hour,10),r=parseInt(a.minute,10),l=parseInt(a.second,10),null!=a.fraction){for(n=a.fraction.slice(0,3);n.length<3;)n+="0";n=parseInt(n,10)}else n=0;return null!=a.tz&&(d=6e4*(60*parseInt(a.tz_hour,10)+(null!=a.tz_minute?parseInt(a.tz_minute,10):0)),"-"===a.tz_sign&&(d*=-1)),t=new Date(Date.UTC(c,s,i,o,r,l,n)),d&&t.setTime(t.getTime()-d),t},t.strRepeat=function(e,t){var i,n;for(n="",i=0;i<t;)n+=e,i++;return n},t.getStringFromFile=function(t,i){var n,o,a,r,s,l,d,c;if(null==i&&(i=null),c=null,"undefined"!=typeof window&&null!==window)if(window.XMLHttpRequest)c=new XMLHttpRequest;else if(window.ActiveXObject)for(a=0,r=(l=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"]).length;a<r;a++){s=l[a];try{c=new ActiveXObject(s)}catch(e){}}return null!=c?null!=i?(c.onreadystatechange=function(){if(4===c.readyState)return i(200===c.status||0===c.status?c.responseText:null)},c.open("GET",t,!0),c.send(null)):(c.open("GET",t,!1),c.send(null),200===c.status||0===c.status?c.responseText:null):(d=e,o=d("fs"),null!=i?o.readFile(t,function(e,t){return i(e?null:String(t))}):(n=o.readFileSync(t),null!=n?String(n):null))},t}(),t.exports=o},{"./Pattern":8}],11:[function(e,t,i){var n,o,a,r;o=e("./Parser"),n=e("./Dumper"),a=e("./Utils"),r=function(){function t(){}return t.parse=function(e,t,i){return null==t&&(t=!1),null==i&&(i=null),(new o).parse(e,t,i)},t.parseFile=function(e,t,i,n){var o;return null==t&&(t=null),null==i&&(i=!1),null==n&&(n=null),null!=t?a.getStringFromFile(e,function(e){return function(o){var a;a=null,null!=o&&(a=e.parse(o,i,n)),t(a)}}(this)):(o=a.getStringFromFile(e),null!=o?this.parse(o,i,n):null)},t.dump=function(e,t,i,o,a){var r;return null==t&&(t=2),null==i&&(i=4),null==o&&(o=!1),null==a&&(a=null),r=new n,r.indentation=i,r.dump(e,t,0,o,a)},t.register=function(){var t;if(t=function(e,t){return e.exports=YAML.parseFile(t)},null!=(void 0!==e&&null!==e?e.extensions:void 0))return e.extensions[".yml"]=t,e.extensions[".yaml"]=t},t.stringify=function(e,t,i,n,o){return this.dump(e,t,i,n,o)},t.load=function(e,t,i,n){return this.parseFile(e,t,i,n)},t}(),"undefined"!=typeof window&&null!==window&&(window.YAML=r),"undefined"!=typeof window&&null!==window||(this.YAML=r),t.exports=r},{"./Dumper":1,"./Parser":7,"./Utils":10}],12:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../engine/display/DisplayObjectContainer"),a=e("../engine/display/TiledSpriteContainer"),r=e("../engine/display/Sprite"),s=e("../engine/util/Vector"),l=function(e){function t(i,n,o){var s=e.call(this,i,"")||this;s._staticlayer=new r.Sprite(s.id+"_staticlayer","CakeWalk/staticbg.png"),s._layers=[];for(var l=0;l<t.LayerAssets.length;l++)s._layers.push(new a.TiledSpriteContainer(s.id+"_layer"+l,t.LayerAssets[l],n,o,function(e,t){return new r.Sprite(e,t)},3));return s}return n(t,e),Object.defineProperty(t.prototype,"handleCameraScroll",{get:function(){var e=this;return function(t){e.children.length>=4&&(e.getChild(0).position=e.getChild(0).position.subtract(t.dp),e.getChild(1).position=e.getChild(1).position.add(t.dp.multiply(.45)),e.getChild(2).position=e.getChild(2).position.add(t.dp.multiply(.3)),e.getChild(3).position=e.getChild(3).position.add(t.dp.multiply(.15)))}},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var e=[],t=0;t<this._layers.length;t++)e.push(t);var i=Math.floor(Math.random()*e.length),n=this._layers[e[i]];e.splice(i,1);var o=Math.floor(Math.random()*e.length),a=this._layers[e[o]];e.splice(o,1);var r=Math.floor(Math.random()*e.length),l=this._layers[e[r]];e.splice(r,1),this._staticlayer.position=new s.Vector(0,0),n.position=new s.Vector(0,120),n.localScale=new s.Vector(.6,.6),a.position=new s.Vector(0,150),a.localScale=new s.Vector(.8,.8),l.position=new s.Vector(0,180),l.localScale=new s.Vector(1,1),this.clearChildren(),this.addChild(this._staticlayer),this.addChild(n),this.addChild(a),this.addChild(l)},t}(o.DisplayObjectContainer);l.LayerAssets=["CakeWalk/wave_blue.png","CakeWalk/wave_red.png","CakeWalk/wave_orange.png","CakeWalk/wave_yellow.png","CakeWalk/wave_purple.png"],i.BGLayerContainer=l},{"../engine/display/DisplayObjectContainer":32,"../engine/display/Sprite":35,"../engine/display/TiledSpriteContainer":37,"../engine/util/Vector":52}],13:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../engine/display/ColliderSprite"),a=e("../engine/events/EventTypes"),r=e("../engine/events/EventDispatcher"),s=e("../engine/display/DisplayObjectContainer"),l=e("../engine/util/Vector"),d=e("../engine/util/mixins"),c=e("../engine/sound/SoundManager"),p=e("./PlayerObject"),u=function(e){function t(t){var i=e.call(this,t,"")||this;return i.collisionLayer=0,i.isTrigger=!0,i._spawnPoint=l.Vector.zero,r.EventDispatcher.addGlobalListener(a.CollisionEventArgs.ClassName,i.collisionHandler),i}return n(t,e),t.prototype.refreshState=function(){this.children.length>=2&&(this.getChild(0).visible=!0,this.getChild(1).visible=!1)},Object.defineProperty(t.prototype,"spawnPoint",{get:function(){return this._spawnPoint.add(this.position)},set:function(e){this._spawnPoint=e.subtract(this.position)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collisionHandler",{get:function(){var e=this,t=this;return function(i){if((i.obj1===t||i.obj2===t)&&(i.obj1 instanceof p.PlayerObject||i.obj2 instanceof p.PlayerObject)){var n=i.obj1 instanceof p.PlayerObject?i.obj1:i.obj2;i.type==a.CollisionType.Enter&&t.spawnPoint.x>n.respawnPoint.x&&(n.respawnPoint=t.spawnPoint,c.SoundManager.instance.playFX("checkpoint"),e.children.length>=2&&(e.getChild(0).visible=!1,e.getChild(1).visible=!0))}}},enumerable:!0,configurable:!0}),t}(s.DisplayObjectContainer);i.Checkpoint=u,d.applyMixins(u,[o.RectColliderSpriteBase])},{"../engine/display/ColliderSprite":30,"../engine/display/DisplayObjectContainer":32,"../engine/events/EventDispatcher":39,"../engine/events/EventTypes":40,"../engine/sound/SoundManager":43,"../engine/util/Vector":52,"../engine/util/mixins":53,"./PlayerObject":21}],14:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../engine/display/AnimatedSprite"),a=e("../engine/events/EventTypes"),r=e("../engine/events/EventDispatcher"),s=e("../engine/events/CallbackManager"),l=e("../engine/display/ColliderSprite"),d=e("../engine/util/mixins"),c=e("./PlayerObject"),p=function(e){function t(t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=-1);var s=e.call(this,t,i,n)||this;s.initAnimation(i),s.reflameDuration=o;var d=new l.CircleColliderSprite(t+"_box","");return d.alpha=.5,d.width=42.5,d.height=42.5,d.position.x=5,d.position.y=20,d.collisionLayer=0,d.isTrigger=!0,s.addChild(d),r.EventDispatcher.addGlobalListener(a.CollisionEventArgs.ClassName,s.collisionHandler),s}return n(t,e),t.prototype.update=function(t){void 0===t&&(t=0),e.prototype.update.call(this,t),this.updateAnimation()},Object.defineProperty(t.prototype,"collisionHandler",{get:function(){var e=this;return function(t){if(t.type==a.CollisionType.Enter&&(t.obj1===e.getChild(0)||t.obj2===e.getChild(0))&&(t.obj1 instanceof c.PlayerObject||t.obj2 instanceof c.PlayerObject)){var i=t.obj1 instanceof c.PlayerObject?t.obj1:t.obj2;if(i.color==e.color){var n=e.parent;n&&(e.removeSelf(),e.reflameDuration>0&&s.CallbackManager.instance.addCallback(function(){n.addChild(e)},e.reflameDuration))}else i.respawn("fire")}}},enumerable:!0,configurable:!0}),t}(e("./MainGameSprite").MainGameSprite);i.Flame=p,d.applyMixins(p,[o.AnimatedSpriteBase])},{"../engine/display/AnimatedSprite":28,"../engine/display/ColliderSprite":30,"../engine/events/CallbackManager":38,"../engine/events/EventDispatcher":39,"../engine/events/EventTypes":40,"../engine/util/mixins":53,"./MainGameSprite":18,"./PlayerObject":21}],15:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Platform"),a=e("./PlayerObject"),r=e("../engine/util/Vector"),s=e("../engine/util/ArrayList"),l=e("../engine/events/EventTypes"),d=e("../engine/events/EventDispatcher"),c=function(e){function t(t,i,n){void 0===n&&(n=0);var o=e.call(this,t,i,n)||this;return o._smoothFactor=.05,o._closeDistance=.05,o._restPosition=o._targetPosition=o.position,o._moveMode=0,o._playersOnGate=new s.ArrayList,o._playersOnSide=new s.ArrayList,d.EventDispatcher.addGlobalListener(l.CollisionEventArgs.ClassName,o.collisionHandler),o}return n(t,e),Object.defineProperty(t.prototype,"restPosition",{get:function(){return this._restPosition},set:function(e){this._restPosition=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"targetPosition",{get:function(){return this._targetPosition},set:function(e){this._targetPosition=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smoothFactor",{get:function(){return this._smoothFactor},set:function(e){this._smoothFactor=e},enumerable:!0,configurable:!0}),t.prototype.update=function(t){void 0===t&&(t=0),e.prototype.update.call(this,t);var i=r.Vector.zero,n=0==this.moveMode?this.restPosition:this.targetPosition;if(!this.position.equals(n)){var o=this.position.subtract(n).lengthSquared()<=this._closeDistance*this._closeDistance;i=n.subtract(this.position).multiply(o?1:this._smoothFactor)}this.position=this.position.add(i);for(a=0;a<this._playersOnGate.length;a++)(s=this._playersOnGate.get(a)).position=s.position.add(i),s.previousPosition=s.previousPosition.add(i);for(var a=0;a<this._playersOnSide.length;a++){var s=this._playersOnSide.get(a),l=!1;this.collidesWith(s)&&(s.position=s.position.add(i),s.previousPosition=s.previousPosition.add(i),l=!0),l||(this._playersOnSide.removeAt(a),a--)}},t.prototype.refreshState=function(){this.position=this.restPosition,this._moveMode=0,this._playersOnGate=new s.ArrayList,this._playersOnSide=new s.ArrayList},t.prototype.syncSwitch=function(e){var t=this;e.addOnEnter(function(){t.moveMode=1}),e.addOnExit(function(){t.moveMode=0})},Object.defineProperty(t.prototype,"moveMode",{get:function(){return this._moveMode},set:function(e){this._moveMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collisionHandler",{get:function(){var e=this,t=this;return function(i){if((i.obj1===t||i.obj2===t)&&(i.obj1 instanceof a.PlayerObject||i.obj2 instanceof a.PlayerObject)){var n=i.obj1 instanceof a.PlayerObject?i.obj1:i.obj2;i.type==l.CollisionType.Enter?i.normal.y<0&&!e._playersOnGate.contains(n)?e._playersOnGate.add(n):e.isMovingInDir(i.normal)&&!e._playersOnSide.contains(n)&&e._playersOnSide.add(n):i.type==l.CollisionType.Exit&&e._playersOnGate.contains(n)&&e._playersOnGate.remove(n)}}},enumerable:!0,configurable:!0}),t.prototype.isMovingInDir=function(e){var t=0==this.moveMode?this.restPosition.subtract(this.targetPosition):this.targetPosition.subtract(this.restPosition);return(0==e.x||e.x*t.x>0)&&(0==e.y||e.y*t.y>0)},t}(o.Platform);i.Gate=c},{"../engine/events/EventDispatcher":39,"../engine/events/EventTypes":40,"../engine/util/ArrayList":47,"../engine/util/Vector":52,"./Platform":20,"./PlayerObject":21}],16:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../engine/display/DisplayObjectContainer"),o=e("../engine/display/TiledSpriteContainer"),a=e("../engine/display/Sprite"),r=e("../engine/util/Vector"),s=e("./Platform"),l=e("./Gate"),d=e("./TimedGate"),c=e("./Switch"),p=e("./Flame"),u=e("./TriggerZone"),h=e("./Checkpoint"),f=e("./MainGameSprite"),w=function(){function e(){}return Object.defineProperty(e,"IsPreloaded",{get:function(){return e._PreloadedLevels.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Counter",{get:function(){return e._Counter++},enumerable:!0,configurable:!0}),e.MakeGround=function(t,i){return new o.TiledSpriteContainer("ground"+e.Counter,"CakeWalk/tableCombined.png",t,i,function(e,t){return new s.Platform(e,t)},2)},e.MakeWall=function(){var t=new s.Platform("wall"+e.Counter,"");return t.width=50,t.height=2e3,t.visible=!1,t},e.MakeCandle=function(t){return void 0===t&&(t=0),new s.Platform("candle"+e.Counter,0==t?"CakeWalk/YellowCandle.png":1==t?"CakeWalk/RedCandle.png":"CakeWalk/BlueCandle.png",t)},e.MakeCandleHoriz=function(t){return void 0===t&&(t=0),new s.Platform("candle"+e.Counter,0==t?"CakeWalk/YellowCandleRotated.png":1==t?"CakeWalk/RedCandleRotated.png":"CakeWalk/BlueCandleRotated.png",t)},e.MakeGate=function(t){return void 0===t&&(t=0),new l.Gate("gate"+e.Counter,0==t?"CakeWalk/YellowCandle.png":1==t?"CakeWalk/RedCandle.png":"CakeWalk/BlueCandle.png",t)},e.MakeGateHoriz=function(t){return void 0===t&&(t=0),new l.Gate("gate"+e.Counter,0==t?"CakeWalk/YellowCandleRotated.png":1==t?"CakeWalk/RedCandleRotated.png":"CakeWalk/BlueCandleRotated.png",t)},e.MakeTimedGate=function(t,i){return void 0===t&&(t=0),new d.TimedGate("gate"+e.Counter,0==t?"CakeWalk/YellowCandle.png":1==t?"CakeWalk/RedCandle.png":"CakeWalk/BlueCandle.png",i,t)},e.MakeTimedGateHoriz=function(t,i){return void 0===t&&(t=0),new d.TimedGate("gate"+e.Counter,0==t?"CakeWalk/YellowCandleRotated.png":1==t?"CakeWalk/RedCandleRotated.png":"CakeWalk/BlueCandleRotated.png",i,t)},e.MakeFlame=function(t){return void 0===t&&(t=0),new p.Flame("flame"+e.Counter,0==t?"CakeWalk/animations/YellowFlameSprite.png":1==t?"CakeWalk/animations/RedFlameSprite.png":"CakeWalk/animations/BlueFlameSprite.png",t,3)},e.MakeSwitch=function(t){return void 0===t&&(t=0),new c.Switch("switch"+e.Counter,0==t?"CakeWalk/RedButton.png":1==t?"CakeWalk/RedButton.png":"CakeWalk/BlueButton.png",t)},e.MakeEndZone=function(){var t=new u.TriggerZone("end"+e.Counter);return t.addChild(new a.Sprite(t.id+"_post","CakeWalk/goalpost.png")),t.getChild(0).pivotPoint=new r.Vector(1,0),t},e.MakeCheckpoint=function(){var t=new h.Checkpoint("checkpoint"+e.Counter);t.dimensions=new r.Vector(100,360);var i,n;return t.addChild(i=new a.Sprite(t.id+"_post0","CakeWalk/checkpoint1.png")),t.addChild(n=new a.Sprite(t.id+"_post1","CakeWalk/checkpoint2.png")),i.position=new r.Vector(0,60),n.position=new r.Vector(0,60),n.visible=!1,t},e.GetLevel=function(t){if(-1==t)return e.GetLevelTest();if(t<e._PreloadedLevels.length){var i=function(e){f.isRefreshable(e)&&e.refreshState()};return e._PreloadedLevels[t].topLevel.map(i),e._PreloadedLevels[t].bottomLevel.map(i),e._PreloadedLevels[t]}return 0==t?e.GetLevelOne():1==t?e.GetLevelTwo():2==t?e.GetLevelThree():3==t?e.GetLevelFour():e.GetLevelFive()},e.PreloadLevels=function(){e._PreloadedLevels.length>0||(e._PreloadedLevels=[e.GetLevelOne(),e.GetLevelTwo(),e.GetLevelThree(),e.GetLevelFour(),e.GetLevelFive()])},e.GetLevelOne=function(){var t,i,o,s,l,d,c,p,u,h,f,w,y,m,g,C,_,v,b,M,k,P,V,S,T,x,E,O,A,L,j,I,F,D,G,R,H,N,B,z,W,U,X,Q,Y,Z,q,K,$,J,ee,te,ie,ne,oe,ae,re,se,le,de,ce,pe,ue,he,fe,we,ye,me=new n.DisplayObjectContainer("level0_top","").addChild(o=e.MakeWall()).addChild(l=e.MakeWall()).addChild(c=e.MakeCandle(0)).addChild(p=e.MakeCandle(1)).addChild(u=e.MakeCandle(2)).addChild(h=e.MakeCandle(2)).addChild(f=e.MakeCandle(1)).addChild(w=e.MakeCandle(2)).addChild(ne=e.MakeSwitch(1)).addChild(te=e.MakeGate(0)).addChild(ie=e.MakeGate(0)).addChild(se=e.MakeCheckpoint()).addChild(le=e.MakeCheckpoint()).addChild(t=e.MakeGround(4e3,80)).addChild(M=e.MakeFlame(0)).addChild(k=e.MakeFlame(2)).addChild(P=e.MakeFlame(2)).addChild(V=e.MakeFlame(2)).addChild(S=e.MakeFlame(2)).addChild(T=e.MakeFlame(2)).addChild(x=e.MakeFlame(2)).addChild(E=e.MakeFlame(1)).addChild(O=e.MakeFlame(1)).addChild(A=e.MakeFlame(1)).addChild(L=e.MakeFlame(1)).addChild(j=e.MakeFlame(1)).addChild(I=e.MakeFlame(1)).addChild(F=e.MakeFlame(1)).addChild(D=e.MakeFlame(2)).addChild(G=e.MakeFlame(1)).addChild(pe=e.MakeEndZone()).addChild(he=new a.Sprite("a_button_icon","CakeWalk/AButtonIcon.png")).addChild(we=new a.Sprite("x_button_icon","CakeWalk/XButtonIcon.png")),ge=new n.DisplayObjectContainer("level0_bottom","").addChild(s=e.MakeWall()).addChild(d=e.MakeWall()).addChild(y=e.MakeCandle(0)).addChild(m=e.MakeCandle(2)).addChild(g=e.MakeCandle(1)).addChild(C=e.MakeCandle(1)).addChild(_=e.MakeCandle(2)).addChild(v=e.MakeCandle(1)).addChild(b=e.MakeCandle(0)).addChild(oe=e.MakeGate(0)).addChild(ae=e.MakeSwitch(2)).addChild(re=e.MakeSwitch(2)).addChild(de=e.MakeCheckpoint()).addChild(ce=e.MakeCheckpoint()).addChild(i=e.MakeGround(4e3,80)).addChild(R=e.MakeFlame(0)).addChild(H=e.MakeFlame(1)).addChild(N=e.MakeFlame(1)).addChild(B=e.MakeFlame(1)).addChild(z=e.MakeFlame(1)).addChild(W=e.MakeFlame(1)).addChild(U=e.MakeFlame(1)).addChild(X=e.MakeFlame(2)).addChild(Q=e.MakeFlame(2)).addChild(Y=e.MakeFlame(2)).addChild(Z=e.MakeFlame(2)).addChild(q=e.MakeFlame(2)).addChild(K=e.MakeFlame(2)).addChild($=e.MakeFlame(2)).addChild(J=e.MakeFlame(1)).addChild(ee=e.MakeFlame(2)).addChild(ue=e.MakeEndZone()).addChild(fe=new a.Sprite("a_button_icon","CakeWalk/AButtonIcon.png")).addChild(ye=new a.Sprite("x_button_icon","CakeWalk/XButtonIcon.png"));return t.position=new r.Vector(-200,280),i.position=new r.Vector(-200,280),o.position=new r.Vector(-50,-500),l.position=new r.Vector(3e3,-500),s.position=new r.Vector(-50,-500),d.position=new r.Vector(3e3,-500),c.position=new r.Vector(250,220),y.position=new r.Vector(250,220),M.position=new r.Vector(600,220),R.position=new r.Vector(600,220),p.position=new r.Vector(900,160),m.position=new r.Vector(900,160),u.position=new r.Vector(1100,160),g.position=new r.Vector(1100,160),se.position=new r.Vector(1200,0),se.spawnPoint=new r.Vector(1200,200),de.position=new r.Vector(1200,0),de.spawnPoint=new r.Vector(1200,200),k.position=new r.Vector(1300,220),P.position=new r.Vector(1350,220),V.position=new r.Vector(1400,220),S.position=new r.Vector(1450,220),T.position=new r.Vector(1500,220),x.position=new r.Vector(1550,220),H.position=new r.Vector(1300,220),N.position=new r.Vector(1350,220),B.position=new r.Vector(1400,220),z.position=new r.Vector(1450,220),W.position=new r.Vector(1500,220),U.position=new r.Vector(1550,220),E.position=new r.Vector(1700,220),O.position=new r.Vector(1750,220),A.position=new r.Vector(1800,220),L.position=new r.Vector(1850,220),j.position=new r.Vector(1900,220),I.position=new r.Vector(1950,220),X.position=new r.Vector(1700,220),Q.position=new r.Vector(1750,220),Y.position=new r.Vector(1800,220),Z.position=new r.Vector(1850,220),q.position=new r.Vector(1900,220),K.position=new r.Vector(1950,220),te.restPosition=te.position=new r.Vector(2200,160),te.targetPosition=te.position.add(new r.Vector(0,-150)),ae.position=new r.Vector(2200,205),te.syncSwitch(ae),b.position=new r.Vector(2205,220),le.position=new r.Vector(2300,0),le.spawnPoint=new r.Vector(2300,220),ce.position=new r.Vector(2300,0),ce.spawnPoint=new r.Vector(2300,220),h.position=new r.Vector(2400,230),f.position=new r.Vector(2450,180),w.position=new r.Vector(2500,130),C.position=new r.Vector(2400,230),_.position=new r.Vector(2450,180),v.position=new r.Vector(2500,150),F.position=new r.Vector(2400,240),D.position=new r.Vector(2450,190),G.position=new r.Vector(2500,140),$.position=new r.Vector(2400,240),J.position=new r.Vector(2450,190),ee.position=new r.Vector(2500,140),ie.restPosition=ie.position=new r.Vector(2550,25),ie.targetPosition=ie.position.add(new r.Vector(0,-150)),re.position=new r.Vector(2496,130),ie.syncSwitch(re),oe.restPosition=oe.position=new r.Vector(2550,25),oe.targetPosition=oe.position.add(new r.Vector(0,150)),ne.position=new r.Vector(2700,244),oe.syncSwitch(ne),pe.position=new r.Vector(2850,0),pe.dimensions=new r.Vector(200,300),ue.position=new r.Vector(2850,0),ue.dimensions=new r.Vector(200,300),he.position=new r.Vector(266,75),fe.position=new r.Vector(266,75),we.position=new r.Vector(1016,75),ye.position=new r.Vector(1016,75),[he,fe,we,ye].map(function(e){e.pivotPoint=new r.Vector(.5,.5)}),{topLevel:me,topStartPoint:new r.Vector(50,200),topEndZone:pe,topXBounds:[0,3e3],bottomLevel:ge,bottomStartPoint:new r.Vector(50,200),bottomEndZone:ue,bottomXBounds:[0,3e3],gameDuration:200}},e.GetLevelTwo=function(){var t,i,o,a,s,l,d,c,p,u,h,f,w,y,m,g,C,_,v,b,M,k,P,V,S,T,x,E,O,A,L,j,I,F,D,G,R,H,N,B,z,W,U,X,Q,Y,Z,q,K,$,J,ee,te,ie,ne,oe,ae,re,se,le,de,ce,pe,ue,he,fe,we,ye,me,ge,Ce,_e,ve,be,Me,ke,Pe,Ve,Se,Te,xe,Ee,Oe,Ae,Le,je,Ie,Fe,De,Ge,Re,He,Ne,Be,ze,We,Ue,Xe,Qe,Ye,Ze,qe,Ke,$e,Je,et,tt=new n.DisplayObjectContainer("level1_top","").addChild(o=e.MakeWall()).addChild(s=e.MakeWall()).addChild(d=e.MakeCandleHoriz(0)).addChild(c=e.MakeCandle(2)).addChild(p=e.MakeCandleHoriz(2)).addChild(u=e.MakeCandleHoriz(2)).addChild(h=e.MakeCandleHoriz(1)).addChild(f=e.MakeCandleHoriz(2)).addChild(w=e.MakeCandleHoriz(1)).addChild(y=e.MakeCandle(0)).addChild(Ke=e.MakeCheckpoint()).addChild(t=e.MakeGround(4e3,80)).addChild(P=e.MakeFlame(2)).addChild(V=e.MakeFlame(0)).addChild(S=e.MakeFlame(0)).addChild(T=e.MakeFlame(0)).addChild(x=e.MakeFlame(0)).addChild(E=e.MakeFlame(0)).addChild(O=e.MakeFlame(0)).addChild(A=e.MakeFlame(0)).addChild(L=e.MakeFlame(0)).addChild(j=e.MakeFlame(1)).addChild(I=e.MakeFlame(1)).addChild(F=e.MakeFlame(1)).addChild(D=e.MakeFlame(1)).addChild(G=e.MakeFlame(0)).addChild(R=e.MakeFlame(1)).addChild(H=e.MakeFlame(1)).addChild(N=e.MakeFlame(1)).addChild(B=e.MakeFlame(1)).addChild(z=e.MakeFlame(0)).addChild(W=e.MakeFlame(1)).addChild(U=e.MakeFlame(1)).addChild(X=e.MakeFlame(1)).addChild(Q=e.MakeFlame(0)).addChild(Y=e.MakeFlame(1)).addChild(Z=e.MakeFlame(1)).addChild(q=e.MakeFlame(1)).addChild(K=e.MakeFlame(0)).addChild($=e.MakeFlame(1)).addChild(J=e.MakeFlame(1)).addChild(ee=e.MakeFlame(0)).addChild(te=e.MakeFlame(1)).addChild(ie=e.MakeFlame(1)).addChild(ne=e.MakeFlame(0)).addChild(oe=e.MakeFlame(1)).addChild(ae=e.MakeFlame(0)).addChild(re=e.MakeFlame(1)).addChild(se=e.MakeFlame(0)).addChild(le=e.MakeFlame(1)).addChild(de=e.MakeFlame(0)).addChild(ce=e.MakeFlame(0)).addChild(Je=e.MakeEndZone()),it=new n.DisplayObjectContainer("level1_bottom","").addChild(a=e.MakeWall()).addChild(l=e.MakeWall()).addChild(m=e.MakeCandleHoriz(0)).addChild(g=e.MakeCandle(1)).addChild(C=e.MakeCandleHoriz(1)).addChild(_=e.MakeCandleHoriz(1)).addChild(v=e.MakeCandleHoriz(2)).addChild(b=e.MakeCandleHoriz(1)).addChild(M=e.MakeCandleHoriz(2)).addChild(k=e.MakeCandle(0)).addChild($e=e.MakeCheckpoint()).addChild(i=e.MakeGround(4e3,80)).addChild(pe=e.MakeFlame(1)).addChild(ue=e.MakeFlame(0)).addChild(he=e.MakeFlame(0)).addChild(fe=e.MakeFlame(0)).addChild(we=e.MakeFlame(0)).addChild(ye=e.MakeFlame(0)).addChild(me=e.MakeFlame(0)).addChild(ge=e.MakeFlame(0)).addChild(Ce=e.MakeFlame(0)).addChild(_e=e.MakeFlame(2)).addChild(ve=e.MakeFlame(2)).addChild(be=e.MakeFlame(2)).addChild(Me=e.MakeFlame(2)).addChild(ke=e.MakeFlame(0)).addChild(Pe=e.MakeFlame(2)).addChild(Ve=e.MakeFlame(2)).addChild(Se=e.MakeFlame(2)).addChild(Te=e.MakeFlame(2)).addChild(xe=e.MakeFlame(0)).addChild(Ee=e.MakeFlame(2)).addChild(Oe=e.MakeFlame(2)).addChild(Ae=e.MakeFlame(2)).addChild(Le=e.MakeFlame(0)).addChild(je=e.MakeFlame(2)).addChild(Ie=e.MakeFlame(2)).addChild(Fe=e.MakeFlame(2)).addChild(De=e.MakeFlame(0)).addChild(Ge=e.MakeFlame(2)).addChild(Re=e.MakeFlame(2)).addChild(He=e.MakeFlame(0)).addChild(Ne=e.MakeFlame(2)).addChild(Be=e.MakeFlame(2)).addChild(ze=e.MakeFlame(0)).addChild(We=e.MakeFlame(2)).addChild(Ue=e.MakeFlame(0)).addChild(Xe=e.MakeFlame(2)).addChild(Qe=e.MakeFlame(0)).addChild(Ye=e.MakeFlame(2)).addChild(Ze=e.MakeFlame(0)).addChild(qe=e.MakeFlame(0)).addChild(et=e.MakeEndZone());return t.position=new r.Vector(-200,280),i.position=new r.Vector(-200,280),o.position=new r.Vector(-50,-500),s.position=new r.Vector(3e3,-500),a.position=new r.Vector(-50,-500),l.position=new r.Vector(3e3,-500),P.position=new r.Vector(50,220),pe.position=new r.Vector(50,220),d.position=new r.Vector(300,190),m.position=new r.Vector(300,190),y.position=new r.Vector(255,222),k.position=new r.Vector(255,222),c.position=new r.Vector(600,80),g.position=new r.Vector(600,80),p.position=new r.Vector(750,190),C.position=new r.Vector(750,190),u.position=new r.Vector(775,190),_.position=new r.Vector(775,190),Ke.position=new r.Vector(900,0),Ke.spawnPoint=new r.Vector(800,200),$e.position=new r.Vector(900,0),$e.spawnPoint=new r.Vector(800,200),h.position=new r.Vector(1200,160),v.position=new r.Vector(1200,160),f.position=new r.Vector(1600,120),b.position=new r.Vector(1600,120),w.position=new r.Vector(2050,80),M.position=new r.Vector(2050,80),V.position=new r.Vector(450,220),S.position=new r.Vector(500,220),T.position=new r.Vector(550,220),x.position=new r.Vector(600,220),E.position=new r.Vector(650,220),O.position=new r.Vector(700,220),A.position=new r.Vector(750,220),L.position=new r.Vector(850,220),j.position=new r.Vector(900,220),I.position=new r.Vector(950,220),F.position=new r.Vector(1e3,220),D.position=new r.Vector(1050,220),G.position=new r.Vector(1100,220),R.position=new r.Vector(1150,220),H.position=new r.Vector(1200,220),N.position=new r.Vector(1250,220),B.position=new r.Vector(1300,220),z.position=new r.Vector(1350,220),W.position=new r.Vector(1400,220),U.position=new r.Vector(1450,220),X.position=new r.Vector(1500,220),Q.position=new r.Vector(1550,220),Y.position=new r.Vector(1600,220),Z.position=new r.Vector(1650,220),q.position=new r.Vector(1700,220),K.position=new r.Vector(1750,220),$.position=new r.Vector(1800,220),J.position=new r.Vector(1850,220),ee.position=new r.Vector(1900,220),te.position=new r.Vector(1950,220),ie.position=new r.Vector(2e3,220),ne.position=new r.Vector(2050,220),oe.position=new r.Vector(2100,220),ae.position=new r.Vector(2150,220),re.position=new r.Vector(2200,220),se.position=new r.Vector(2250,220),le.position=new r.Vector(2300,220),de.position=new r.Vector(2350,220),ce.position=new r.Vector(2400,220),ue.position=new r.Vector(450,220),he.position=new r.Vector(500,220),fe.position=new r.Vector(550,220),we.position=new r.Vector(600,220),ye.position=new r.Vector(650,220),me.position=new r.Vector(700,220),ge.position=new r.Vector(750,220),Ce.position=new r.Vector(850,220),_e.position=new r.Vector(900,220),ve.position=new r.Vector(950,220),be.position=new r.Vector(1e3,220),Me.position=new r.Vector(1050,220),ke.position=new r.Vector(1100,220),Pe.position=new r.Vector(1150,220),Ve.position=new r.Vector(1200,220),Se.position=new r.Vector(1250,220),Te.position=new r.Vector(1300,220),xe.position=new r.Vector(1350,220),Ee.position=new r.Vector(1400,220),Oe.position=new r.Vector(1450,220),Ae.position=new r.Vector(1500,220),Le.position=new r.Vector(1550,220),je.position=new r.Vector(1600,220),Ie.position=new r.Vector(1650,220),Fe.position=new r.Vector(1700,220),De.position=new r.Vector(1750,220),Ge.position=new r.Vector(1800,220),Re.position=new r.Vector(1850,220),He.position=new r.Vector(1900,220),Ne.position=new r.Vector(1950,220),Be.position=new r.Vector(2e3,220),ze.position=new r.Vector(2050,220),We.position=new r.Vector(2100,220),Ue.position=new r.Vector(2150,220),Xe.position=new r.Vector(2200,220),Qe.position=new r.Vector(2250,220),Ye.position=new r.Vector(2300,220),Ze.position=new r.Vector(2350,220),qe.position=new r.Vector(2400,220),Je.position=new r.Vector(2850,0),Je.dimensions=new r.Vector(200,300),et.position=new r.Vector(2850,0),et.dimensions=new r.Vector(200,300),{topLevel:tt,topStartPoint:new r.Vector(50,50),topEndZone:Je,topXBounds:[0,3e3],bottomLevel:it,bottomStartPoint:new r.Vector(50,50),bottomEndZone:et,bottomXBounds:[0,3e3],gameDuration:170}},e.GetLevelThree=function(){var t,i,o,a,s,l,d,c,p,u,h,f,w,y,m,g,C,_,v,b,M,k,P,V,S,T,x,E,O,A,L,j,I,F,D,G,R,H,N,B,z,W,U,X,Q,Y,Z,q,K,$,J,ee,te,ie,ne,oe,ae,re,se,le,de,ce,pe,ue,he,fe,we,ye,me,ge,Ce,_e,ve,be,Me,ke,Pe,Ve,Se,Te,xe,Ee,Oe,Ae,Le,je,Ie,Fe,De,Ge,Re,He,Ne,Be,ze,We,Ue,Xe,Qe,Ye,Ze,qe,Ke,$e,Je,et,tt,it,nt,ot,at,rt,st,lt,dt,ct,pt,ut,ht,ft,wt,yt,mt,gt,Ct,_t,vt,bt,Mt,kt,Pt,Vt=new n.DisplayObjectContainer("level2_top","").addChild(o=e.MakeWall()).addChild(s=e.MakeWall()).addChild(d=e.MakeCandleHoriz(0)).addChild(c=e.MakeCandle(0)).addChild(p=e.MakeCandleHoriz(2)).addChild(u=e.MakeCandle(0)).addChild(h=e.MakeCandleHoriz(1)).addChild(f=e.MakeCandleHoriz(0)).addChild(y=e.MakeCandle(2)).addChild(m=e.MakeCandle(0)).addChild(g=e.MakeCandle(2)).addChild(C=e.MakeCandle(0)).addChild(_=e.MakeCandle(1)).addChild(v=e.MakeCandle(1)).addChild(gt=e.MakeCheckpoint()).addChild(Ct=e.MakeCheckpoint()).addChild(_t=e.MakeCheckpoint()).addChild(Ue=e.MakeSwitch(2)).addChild(Xe=e.MakeSwitch(1)).addChild(Qe=e.MakeSwitch(2)).addChild(Ye=e.MakeSwitch(1)).addChild(Ze=e.MakeSwitch(2)).addChild(qe=e.MakeSwitch(1)).addChild(Ke=e.MakeSwitch(1)).addChild($e=e.MakeSwitch(2)).addChild(Le=e.MakeGate(1)).addChild(je=e.MakeGateHoriz(0)).addChild(Ie=e.MakeGateHoriz(0)).addChild(Fe=e.MakeGateHoriz(0)).addChild(De=e.MakeGateHoriz(0)).addChild(Ge=e.MakeGate(0)).addChild(Re=e.MakeGate(0)).addChild(He=e.MakeGate(2)).addChild(Ne=e.MakeGate(2)).addChild(Be=e.MakeGateHoriz(2)).addChild(ze=e.MakeGate(2)).addChild(We=e.MakeGate(2)).addChild(w=e.MakeCandle(1)).addChild(t=e.MakeGround(4e3,80)).addChild(I=e.MakeFlame(0)).addChild(F=e.MakeFlame(0)).addChild(D=e.MakeFlame(0)).addChild(G=e.MakeFlame(0)).addChild(R=e.MakeFlame(0)).addChild(H=e.MakeFlame(0)).addChild(N=e.MakeFlame(0)).addChild(B=e.MakeFlame(0)).addChild(z=e.MakeFlame(0)).addChild(W=e.MakeFlame(0)).addChild(U=e.MakeFlame(0)).addChild(X=e.MakeFlame(0)).addChild(Q=e.MakeFlame(2)).addChild(Y=e.MakeFlame(2)).addChild(Z=e.MakeFlame(2)).addChild(q=e.MakeFlame(2)).addChild(K=e.MakeFlame(0)).addChild($=e.MakeFlame(0)).addChild(J=e.MakeFlame(0)).addChild(ee=e.MakeFlame(0)).addChild(te=e.MakeFlame(1)).addChild(ie=e.MakeFlame(2)).addChild(ne=e.MakeFlame(1)).addChild(oe=e.MakeFlame(2)).addChild(ae=e.MakeFlame(1)).addChild(re=e.MakeFlame(0)).addChild(kt=e.MakeEndZone()),St=new n.DisplayObjectContainer("level2_bottom","").addChild(a=e.MakeWall()).addChild(l=e.MakeWall()).addChild(b=e.MakeCandleHoriz(0)).addChild(M=e.MakeCandle(0)).addChild(k=e.MakeCandleHoriz(1)).addChild(P=e.MakeCandle(0)).addChild(V=e.MakeCandleHoriz(2)).addChild(S=e.MakeCandleHoriz(0)).addChild(x=e.MakeCandle(1)).addChild(E=e.MakeCandle(2)).addChild(O=e.MakeCandle(1)).addChild(A=e.MakeCandle(0)).addChild(L=e.MakeCandle(1)).addChild(j=e.MakeCandle(1)).addChild(vt=e.MakeCheckpoint()).addChild(bt=e.MakeCheckpoint()).addChild(Mt=e.MakeCheckpoint()).addChild(ct=e.MakeSwitch(1)).addChild(pt=e.MakeSwitch(2)).addChild(ut=e.MakeSwitch(1)).addChild(ht=e.MakeSwitch(2)).addChild(ft=e.MakeSwitch(1)).addChild(wt=e.MakeSwitch(2)).addChild(yt=e.MakeSwitch(2)).addChild(mt=e.MakeSwitch(2)).addChild(Je=e.MakeGate(2)).addChild(et=e.MakeGateHoriz(0)).addChild(tt=e.MakeGateHoriz(0)).addChild(it=e.MakeGateHoriz(0)).addChild(nt=e.MakeGateHoriz(0)).addChild(ot=e.MakeGate(0)).addChild(at=e.MakeGate(0)).addChild(rt=e.MakeGate(1)).addChild(st=e.MakeGate(1)).addChild(lt=e.MakeGate(2)).addChild(dt=e.MakeGate(2)).addChild(T=e.MakeCandle(2)).addChild(i=e.MakeGround(4e3,80)).addChild(se=e.MakeFlame(0)).addChild(le=e.MakeFlame(0)).addChild(de=e.MakeFlame(0)).addChild(ce=e.MakeFlame(0)).addChild(pe=e.MakeFlame(0)).addChild(ue=e.MakeFlame(0)).addChild(he=e.MakeFlame(0)).addChild(fe=e.MakeFlame(0)).addChild(we=e.MakeFlame(0)).addChild(ye=e.MakeFlame(0)).addChild(me=e.MakeFlame(0)).addChild(ge=e.MakeFlame(0)).addChild(Ce=e.MakeFlame(1)).addChild(_e=e.MakeFlame(1)).addChild(ve=e.MakeFlame(1)).addChild(be=e.MakeFlame(1)).addChild(Me=e.MakeFlame(0)).addChild(ke=e.MakeFlame(0)).addChild(Pe=e.MakeFlame(0)).addChild(Ve=e.MakeFlame(0)).addChild(Se=e.MakeFlame(2)).addChild(Te=e.MakeFlame(1)).addChild(xe=e.MakeFlame(2)).addChild(Ee=e.MakeFlame(1)).addChild(Oe=e.MakeFlame(2)).addChild(Ae=e.MakeFlame(0)).addChild(Pt=e.MakeEndZone());return t.position=new r.Vector(-200,280),i.position=new r.Vector(-200,280),o.position=new r.Vector(-50,-500),s.position=new r.Vector(3e3,-500),a.position=new r.Vector(-50,-500),l.position=new r.Vector(3e3,-500),d.position=new r.Vector(0,130),b.position=new r.Vector(0,130),Le.restPosition=Le.position=new r.Vector(300,0),Le.targetPosition=Le.position.add(new r.Vector(950,0)),Je.restPosition=Je.position=new r.Vector(300,0),Je.targetPosition=Je.position.add(new r.Vector(950,0)),Re.restPosition=Re.position=new r.Vector(600,91),Re.targetPosition=Re.position.add(new r.Vector(0,140)),Re.smoothFactor=.025,at.restPosition=at.position=new r.Vector(600,91),at.targetPosition=at.position.add(new r.Vector(0,140)),at.smoothFactor=.025,Ue.position=new r.Vector(300,185),ct.position=new r.Vector(300,185),Le.syncSwitch(Ue),Je.syncSwitch(ct),Re.syncSwitch(Ue),at.syncSwitch(ct),I.position=new r.Vector(0,220),F.position=new r.Vector(50,220),D.position=new r.Vector(100,220),G.position=new r.Vector(150,220),R.position=new r.Vector(200,220),H.position=new r.Vector(250,220),N.position=new r.Vector(300,220),B.position=new r.Vector(350,220),z.position=new r.Vector(400,220),W.position=new r.Vector(450,220),U.position=new r.Vector(500,220),X.position=new r.Vector(550,220),Q.position=new r.Vector(600,220),Y.position=new r.Vector(650,220),Z.position=new r.Vector(700,220),q.position=new r.Vector(750,220),K.position=new r.Vector(750,150),$.position=new r.Vector(750,80),J.position=new r.Vector(750,10),ee.position=new r.Vector(750,-60),se.position=new r.Vector(0,220),le.position=new r.Vector(50,220),de.position=new r.Vector(100,220),ce.position=new r.Vector(150,220),pe.position=new r.Vector(200,220),ue.position=new r.Vector(250,220),he.position=new r.Vector(300,220),fe.position=new r.Vector(350,220),we.position=new r.Vector(400,220),ye.position=new r.Vector(450,220),me.position=new r.Vector(500,220),ge.position=new r.Vector(550,220),Ce.position=new r.Vector(600,220),_e.position=new r.Vector(650,220),ve.position=new r.Vector(700,220),be.position=new r.Vector(750,220),Me.position=new r.Vector(750,150),ke.position=new r.Vector(750,80),Pe.position=new r.Vector(750,10),Ve.position=new r.Vector(750,-60),gt.position=new r.Vector(680,0),gt.spawnPoint=new r.Vector(600,15),vt.position=new r.Vector(680,0),vt.spawnPoint=new r.Vector(600,15),c.position=new r.Vector(875,150),M.position=new r.Vector(875,150),p.position=new r.Vector(775,190),k.position=new r.Vector(775,190),u.position=new r.Vector(875,100),P.position=new r.Vector(875,100),h.position=new r.Vector(775,100),V.position=new r.Vector(775,100),Ct.position=new r.Vector(1e3,0),Ct.spawnPoint=new r.Vector(1e3,200),bt.position=new r.Vector(1e3,0),bt.spawnPoint=new r.Vector(1e3,200),re.position=new r.Vector(1050,-20),Ae.position=new r.Vector(1050,-20),je.restPosition=je.position=new r.Vector(1100,20),je.targetPosition=je.position.add(new r.Vector(0,190)),et.restPosition=et.position=new r.Vector(1100,20),et.targetPosition=et.position.add(new r.Vector(0,190)),Ie.restPosition=Ie.position=new r.Vector(1250,20),Ie.targetPosition=Ie.position.add(new r.Vector(0,190)),tt.restPosition=tt.position=new r.Vector(1250,20),tt.targetPosition=tt.position.add(new r.Vector(0,190)),Fe.restPosition=Fe.position=new r.Vector(1400,20),Fe.targetPosition=Fe.position.add(new r.Vector(200,190)),it.restPosition=it.position=new r.Vector(1400,20),it.targetPosition=it.position.add(new r.Vector(200,190)),De.restPosition=De.position=new r.Vector(1550,20),De.targetPosition=De.position.add(new r.Vector(-150,190)),nt.restPosition=nt.position=new r.Vector(1550,20),nt.targetPosition=nt.position.add(new r.Vector(-150,190)),Ge.restPosition=Ge.position=new r.Vector(1898,180),Ge.targetPosition=Ge.position.add(new r.Vector(-200,0)),ot.restPosition=ot.position=new r.Vector(1898,180),ot.targetPosition=ot.position.add(new r.Vector(-200,0)),f.position=new r.Vector(1700,20),S.position=new r.Vector(1700,20),w.position=new r.Vector(1900,180),T.position=new r.Vector(1900,180),Xe.position=new r.Vector(1150,190),pt.position=new r.Vector(1150,190),je.syncSwitch(pt),et.syncSwitch(Xe),Qe.position=new r.Vector(1300,190),ut.position=new r.Vector(1300,190),Ie.syncSwitch(Qe),tt.syncSwitch(ut),Ye.position=new r.Vector(1450,190),ht.position=new r.Vector(1450,190),Fe.syncSwitch(ft),it.syncSwitch(Ze),Ze.position=new r.Vector(1600,190),ft.position=new r.Vector(1600,190),De.syncSwitch(ht),nt.syncSwitch(Ye),qe.position=new r.Vector(1750,190),wt.position=new r.Vector(1750,190),Ge.syncSwitch(qe),ot.syncSwitch(wt),te.position=new r.Vector(1150,60),ie.position=new r.Vector(1300,60),ne.position=new r.Vector(1450,60),oe.position=new r.Vector(1600,60),ae.position=new r.Vector(1750,60),Se.position=new r.Vector(1150,60),Te.position=new r.Vector(1300,60),xe.position=new r.Vector(1450,60),Ee.position=new r.Vector(1600,60),Oe.position=new r.Vector(1750,60),_t.position=new r.Vector(2e3,0),_t.spawnPoint=new r.Vector(2e3,200),Mt.position=new r.Vector(2e3,0),Mt.spawnPoint=new r.Vector(2e3,200),y.position=new r.Vector(2100,240),He.position=He.restPosition=new r.Vector(2175,195),He.targetPosition=He.position.add(new r.Vector(0,-60)),m.position=new r.Vector(2255,55),Ne.position=Ne.restPosition=new r.Vector(2335,195),Ne.targetPosition=Ne.position.add(new r.Vector(0,-60)),g.position=new r.Vector(2410,240),Ke.position=new r.Vector(2251,54),C.position=new r.Vector(2600,170),_.position=new r.Vector(2600,50),v.position=new r.Vector(2600,-70),Be.position=Be.restPosition=new r.Vector(2460,165),Be.targetPosition=Be.position.add(new r.Vector(180,0)),ze.position=ze.restPosition=new r.Vector(2550,-70),ze.targetPosition=ze.position.add(new r.Vector(180,0)),We.position=We.restPosition=new r.Vector(2550,50),We.targetPosition=We.position.add(new r.Vector(180,0)),$e.position=new r.Vector(2670,244),x.position=new r.Vector(2100,240),rt.position=rt.restPosition=new r.Vector(2175,135),rt.targetPosition=rt.position.add(new r.Vector(0,60)),E.position=new r.Vector(2255,55),st.position=st.restPosition=new r.Vector(2335,135),st.targetPosition=st.position.add(new r.Vector(0,60)),O.position=new r.Vector(2410,240),yt.position=new r.Vector(2251,54),mt.position=new r.Vector(2251,244),A.position=new r.Vector(2600,170),L.position=new r.Vector(2600,50),j.position=new r.Vector(2600,-70),lt.position=lt.restPosition=new r.Vector(2650,-70),lt.targetPosition=lt.position.add(new r.Vector(0,-120)),dt.position=dt.restPosition=new r.Vector(2650,50),dt.targetPosition=dt.position.add(new r.Vector(0,-120)),He.syncSwitch(mt),Ne.syncSwitch(mt),rt.syncSwitch(Ke),st.syncSwitch(Ke),Be.syncSwitch(yt),ze.syncSwitch(yt),We.syncSwitch(yt),lt.syncSwitch($e),dt.syncSwitch($e),kt.position=new r.Vector(2850,0),kt.dimensions=new r.Vector(200,300),Pt.position=new r.Vector(2850,0),Pt.dimensions=new r.Vector(200,300),{topLevel:Vt,topStartPoint:new r.Vector(50,50),topEndZone:kt,topXBounds:[0,3e3],bottomLevel:St,bottomStartPoint:new r.Vector(50,50),bottomEndZone:Pt,bottomXBounds:[0,3e3],gameDuration:300}},e.GetLevelFour=function(){var t,i,o,a,s,l,d,c,p,u,h,f,w,y,m,g,C,_,v,b,M,k,P,V,S,T,x,E,O,A,L,j,I,F,D,G,R,H,N,B,z,W,U,X,Q,Y,Z,q,K,$,J,ee,te,ie,ne,oe,ae,re,se,le,de,ce,pe,ue,he,fe,we,ye,me,ge,Ce,_e,ve,be,Me,ke,Pe,Ve,Se,Te,xe,Ee,Oe,Ae,Le,je,Ie,Fe,De,Ge,Re,He,Ne,Be,ze,We,Ue,Xe,Qe,Ye,Ze,qe,Ke,$e,Je,et,tt,it,nt,ot,at,rt,st=new n.DisplayObjectContainer("level3_top","").addChild(t=e.MakeWall()).addChild(o=e.MakeWall()).addChild(w=e.MakeGate(0)).addChild(y=e.MakeGate(0)).addChild(m=e.MakeGate(0)).addChild(E=e.MakeSwitch(1)).addChild(p=e.MakeCandle(1)).addChild(u=e.MakeCandle(0)).addChild(h=e.MakeCandle(0)).addChild(g=e.MakeTimedGateHoriz(2,3)).addChild(C=e.MakeTimedGateHoriz(1,3)).addChild(_=e.MakeTimedGateHoriz(2,3)).addChild(v=e.MakeTimedGateHoriz(1,3)).addChild(b=e.MakeTimedGate(1,2.5)).addChild(M=e.MakeTimedGate(2,2.5)).addChild(k=e.MakeTimedGate(2,2)).addChild(P=e.MakeTimedGate(1,2)).addChild(V=e.MakeTimedGate(1,1.5)).addChild(S=e.MakeTimedGate(0,1.5)).addChild(T=e.MakeTimedGate(0,1)).addChild(x=e.MakeTimedGate(2,1)).addChild(Q=e.MakeCheckpoint()).addChild(Y=e.MakeCheckpoint()).addChild(s=e.MakeGround(4e3,80)).addChild(K=e.MakeFlame(2)).addChild($=e.MakeFlame(2)).addChild(J=e.MakeFlame(2)).addChild(ee=e.MakeFlame(2)).addChild(te=e.MakeFlame(1)).addChild(ie=e.MakeFlame(1)).addChild(ne=e.MakeFlame(1)).addChild(oe=e.MakeFlame(1)).addChild(ae=e.MakeFlame(1)).addChild(re=e.MakeFlame(1)).addChild(se=e.MakeFlame(1)).addChild(le=e.MakeFlame(1)).addChild(de=e.MakeFlame(2)).addChild(ce=e.MakeFlame(2)).addChild(pe=e.MakeFlame(2)).addChild(ue=e.MakeFlame(2)).addChild(he=e.MakeFlame(2)).addChild(fe=e.MakeFlame(2)).addChild(we=e.MakeFlame(2)).addChild(ye=e.MakeFlame(2)).addChild(me=e.MakeFlame(1)).addChild(ge=e.MakeFlame(1)).addChild(Ce=e.MakeFlame(1)).addChild(_e=e.MakeFlame(1)).addChild(ve=e.MakeFlame(0)).addChild(be=e.MakeFlame(1)).addChild(Me=e.MakeFlame(1)).addChild(ke=e.MakeFlame(0)).addChild(Pe=e.MakeFlame(0)).addChild(Ve=e.MakeFlame(2)).addChild(Se=e.MakeFlame(2)).addChild(Te=e.MakeFlame(0)).addChild(d=e.MakeEndZone()),lt=new n.DisplayObjectContainer("level3_bottom","").addChild(i=e.MakeWall()).addChild(a=e.MakeWall()).addChild(f=e.MakeCandle(0)).addChild(W=e.MakeSwitch(2)).addChild(U=e.MakeSwitch(1)).addChild(X=e.MakeSwitch(2)).addChild(O=e.MakeGate(0)).addChild(A=e.MakeTimedGateHoriz(1,3)).addChild(L=e.MakeTimedGateHoriz(2,3)).addChild(j=e.MakeTimedGateHoriz(1,3)).addChild(I=e.MakeTimedGateHoriz(2,3)).addChild(F=e.MakeTimedGate(1,2.5)).addChild(D=e.MakeTimedGate(2,2.5)).addChild(G=e.MakeTimedGate(2,2)).addChild(R=e.MakeTimedGate(1,2)).addChild(H=e.MakeTimedGate(1,1.5)).addChild(N=e.MakeTimedGate(0,1.5)).addChild(B=e.MakeTimedGate(0,1)).addChild(z=e.MakeTimedGate(2,1)).addChild(Z=e.MakeCheckpoint()).addChild(q=e.MakeCheckpoint()).addChild(l=e.MakeGround(4e3,80)).addChild(xe=e.MakeFlame(1)).addChild(Ee=e.MakeFlame(1)).addChild(Oe=e.MakeFlame(1)).addChild(Ae=e.MakeFlame(1)).addChild(Le=e.MakeFlame(2)).addChild(je=e.MakeFlame(2)).addChild(Ie=e.MakeFlame(2)).addChild(Fe=e.MakeFlame(2)).addChild(De=e.MakeFlame(2)).addChild(Ge=e.MakeFlame(2)).addChild(Re=e.MakeFlame(2)).addChild(He=e.MakeFlame(2)).addChild(Ne=e.MakeFlame(1)).addChild(Be=e.MakeFlame(1)).addChild(ze=e.MakeFlame(1)).addChild(We=e.MakeFlame(1)).addChild(Ue=e.MakeFlame(1)).addChild(Xe=e.MakeFlame(1)).addChild(Qe=e.MakeFlame(1)).addChild(Ye=e.MakeFlame(1)).addChild(Ze=e.MakeFlame(2)).addChild(qe=e.MakeFlame(2)).addChild(Ke=e.MakeFlame(2)).addChild($e=e.MakeFlame(2)).addChild(Je=e.MakeFlame(0)).addChild(et=e.MakeFlame(2)).addChild(tt=e.MakeFlame(2)).addChild(it=e.MakeFlame(0)).addChild(nt=e.MakeFlame(0)).addChild(ot=e.MakeFlame(1)).addChild(at=e.MakeFlame(1)).addChild(rt=e.MakeFlame(0)).addChild(c=e.MakeEndZone());return s.position=new r.Vector(-200,280),l.position=new r.Vector(-200,280),t.position=new r.Vector(-50,-500),o.position=new r.Vector(3e3,-500),i.position=new r.Vector(-50,-500),a.position=new r.Vector(3e3,-500),d.position=new r.Vector(2850,0),d.dimensions=new r.Vector(200,300),c.position=new r.Vector(2850,0),c.dimensions=new r.Vector(200,300),w.position=w.restPosition=new r.Vector(150,152),w.targetPosition=w.position.add(new r.Vector(0,-90)),y.position=y.restPosition=new r.Vector(250,152),y.targetPosition=y.position.add(new r.Vector(0,-90)),m.position=m.restPosition=new r.Vector(350,152),m.targetPosition=m.position.add(new r.Vector(0,-90)),W.position=new r.Vector(150,244),w.syncSwitch(U),w.syncSwitch(X),U.position=new r.Vector(250,244),y.syncSwitch(W),y.syncSwitch(X),X.position=new r.Vector(350,244),m.syncSwitch(W),m.syncSwitch(U),O.position=O.restPosition=new r.Vector(675,152),O.targetPosition=O.position.add(new r.Vector(0,-180)),f.position=new r.Vector(707,212),E.position=new r.Vector(50,50),O.syncSwitch(E),p.position=new r.Vector(450,200),u.position=new r.Vector(600,152),h.position=new r.Vector(632,200),Q.position=new r.Vector(800,0),Q.spawnPoint=new r.Vector(800,200),Z.position=new r.Vector(800,0),Z.spawnPoint=new r.Vector(800,200),K.position=new r.Vector(900,0),$.position=new r.Vector(950,0),J.position=new r.Vector(1e3,0),ee.position=new r.Vector(1050,0),te.position=new r.Vector(900,216),ie.position=new r.Vector(950,216),ne.position=new r.Vector(1e3,216),oe.position=new r.Vector(1050,216),g.position=g.restPosition=new r.Vector(940,200),g.targetPosition=g.position.add(new r.Vector(0,-136)),ae.position=new r.Vector(1100,0),re.position=new r.Vector(1150,0),se.position=new r.Vector(1200,0),le.position=new r.Vector(1250,0),de.position=new r.Vector(1100,216),ce.position=new r.Vector(1150,216),pe.position=new r.Vector(1200,216),ue.position=new r.Vector(1250,216),C.position=C.restPosition=new r.Vector(1140,200),C.targetPosition=C.position.add(new r.Vector(0,-136)),he.position=new r.Vector(1300,0),fe.position=new r.Vector(1350,0),we.position=new r.Vector(1400,0),ye.position=new r.Vector(1450,0),me.position=new r.Vector(1300,216),ge.position=new r.Vector(1350,216),Ce.position=new r.Vector(1400,216),_e.position=new r.Vector(1450,216),_.position=_.restPosition=new r.Vector(1340,200),_.targetPosition=_.position.add(new r.Vector(0,-136)),ve.position=new r.Vector(1500,0),be.position=new r.Vector(1550,0),Me.position=new r.Vector(1600,0),ke.position=new r.Vector(1650,0),Pe.position=new r.Vector(1500,216),Ve.position=new r.Vector(1550,216),Se.position=new r.Vector(1600,216),Te.position=new r.Vector(1650,216),v.position=v.restPosition=new r.Vector(1540,200),v.targetPosition=v.position.add(new r.Vector(0,-136)),xe.position=new r.Vector(900,0),Ee.position=new r.Vector(950,0),Oe.position=new r.Vector(1e3,0),Ae.position=new r.Vector(1050,0),Le.position=new r.Vector(900,216),je.position=new r.Vector(950,216),Ie.position=new r.Vector(1e3,216),Fe.position=new r.Vector(1050,216),A.position=A.restPosition=new r.Vector(940,200),A.targetPosition=A.position.add(new r.Vector(0,-136)),De.position=new r.Vector(1100,0),Ge.position=new r.Vector(1150,0),Re.position=new r.Vector(1200,0),He.position=new r.Vector(1250,0),Ne.position=new r.Vector(1100,216),Be.position=new r.Vector(1150,216),ze.position=new r.Vector(1200,216),We.position=new r.Vector(1250,216),L.position=L.restPosition=new r.Vector(1140,200),L.targetPosition=L.position.add(new r.Vector(0,-136)),Ue.position=new r.Vector(1300,0),Xe.position=new r.Vector(1350,0),Qe.position=new r.Vector(1400,0),Ye.position=new r.Vector(1450,0),Ze.position=new r.Vector(1300,216),qe.position=new r.Vector(1350,216),Ke.position=new r.Vector(1400,216),$e.position=new r.Vector(1450,216),j.position=j.restPosition=new r.Vector(1340,200),j.targetPosition=j.position.add(new r.Vector(0,-136)),Je.position=new r.Vector(1500,0),et.position=new r.Vector(1550,0),tt.position=new r.Vector(1600,0),it.position=new r.Vector(1650,0),nt.position=new r.Vector(1500,216),ot.position=new r.Vector(1550,216),at.position=new r.Vector(1600,216),rt.position=new r.Vector(1650,216),I.position=I.restPosition=new r.Vector(1540,200),I.targetPosition=I.position.add(new r.Vector(0,-136)),Y.position=new r.Vector(1800,0),Y.spawnPoint=new r.Vector(1800,200),q.position=new r.Vector(1800,0),q.spawnPoint=new r.Vector(1800,200),b.position=b.restPosition=new r.Vector(2e3,-50),b.targetPosition=b.position.add(new r.Vector(0,50)),M.position=M.restPosition=new r.Vector(2e3,200),M.targetPosition=M.position.add(new r.Vector(0,-50)),k.position=k.restPosition=new r.Vector(2200,-50),k.targetPosition=k.position.add(new r.Vector(0,50)),P.position=P.restPosition=new r.Vector(2200,200),P.targetPosition=P.position.add(new r.Vector(0,-50)),V.position=V.restPosition=new r.Vector(2400,-50),V.targetPosition=V.position.add(new r.Vector(0,50)),S.position=S.restPosition=new r.Vector(2400,200),S.targetPosition=S.position.add(new r.Vector(0,-50)),T.position=T.restPosition=new r.Vector(2600,-50),T.targetPosition=T.position.add(new r.Vector(0,50)),x.position=x.restPosition=new r.Vector(2600,200),x.targetPosition=x.position.add(new r.Vector(0,-50)),F.position=F.restPosition=new r.Vector(2e3,-50),F.targetPosition=F.position.add(new r.Vector(0,50)),D.position=D.restPosition=new r.Vector(2e3,200),D.targetPosition=D.position.add(new r.Vector(0,-50)),G.position=G.restPosition=new r.Vector(2200,-50),G.targetPosition=G.position.add(new r.Vector(0,50)),R.position=R.restPosition=new r.Vector(2200,200),R.targetPosition=R.position.add(new r.Vector(0,-50)),H.position=H.restPosition=new r.Vector(2400,-50),H.targetPosition=H.position.add(new r.Vector(0,50)),N.position=N.restPosition=new r.Vector(2400,200),N.targetPosition=N.position.add(new r.Vector(0,-50)),B.position=B.restPosition=new r.Vector(2600,-50),B.targetPosition=B.position.add(new r.Vector(0,50)),z.position=z.restPosition=new r.Vector(2600,200),z.targetPosition=z.position.add(new r.Vector(0,-50)),{topLevel:st,topStartPoint:new r.Vector(50,200),topEndZone:d,topXBounds:[0,3e3],bottomLevel:lt,bottomStartPoint:new r.Vector(50,200),bottomEndZone:c,bottomXBounds:[0,3e3],gameDuration:275}},e.GetLevelFive=function(){var t,i,o,s,l,d,c,p,u,h,f,w,y,m,g,C,_,v,b,M,k,P,V,S,T,x,E,O,A,L,j,I,F,D,G,R,H,N,B,z,W,U,X,Q,Y,Z,q,K,$,J,ee,te,ie,ne,oe,ae,re,se,le,de,ce,pe,ue,he,fe,we,ye,me,ge,Ce,_e,ve,be,Me,ke,Pe,Ve,Se,Te,xe,Ee,Oe,Ae,Le,je,Ie,Fe,De,Ge,Re,He,Ne,Be,ze,We,Ue,Xe,Qe,Ye,Ze,qe,Ke,$e,Je,et,tt,it,nt,ot,at,rt,st,lt,dt,ct,pt,ut,ht,ft,wt,yt,mt,gt,Ct,_t=new n.DisplayObjectContainer("level4_top","").addChild(t=e.MakeWall()).addChild(o=e.MakeWall()).addChild(u=e.MakeCandleHoriz(0)).addChild(h=e.MakeCandleHoriz(0)).addChild(f=e.MakeCandleHoriz(1)).addChild(w=e.MakeCandleHoriz(2)).addChild(y=e.MakeCandle(2)).addChild(m=e.MakeCandle(1)).addChild(g=e.MakeCandle(2)).addChild(C=e.MakeCandle(2)).addChild(_=e.MakeCandle(0)).addChild(v=e.MakeCandle(0)).addChild(b=e.MakeCandle(1)).addChild(M=e.MakeCandleHoriz(0)).addChild(re=e.MakeGate(2)).addChild(se=e.MakeGate(2)).addChild(le=e.MakeGate(1)).addChild(de=e.MakeGate(1)).addChild(ce=e.MakeGateHoriz(2)).addChild(pe=e.MakeGateHoriz(1)).addChild(ue=e.MakeGate(0)).addChild(he=e.MakeGate(0)).addChild(fe=e.MakeTimedGate(0,2)).addChild(we=e.MakeGate(0)).addChild(ye=e.MakeGateHoriz(0)).addChild(me=e.MakeGate(0)).addChild(ge=e.MakeTimedGate(2,.95)).addChild(Ce=e.MakeTimedGate(0,.95)).addChild(_e=e.MakeTimedGate(0,.95)).addChild(ve=e.MakeTimedGate(1,.95)).addChild(be=e.MakeTimedGate(0,.95)).addChild(Me=e.MakeTimedGate(2,.95)).addChild(ke=e.MakeTimedGate(0,.95)).addChild(Pe=e.MakeTimedGate(0,.95)).addChild(Ve=e.MakeGate(0)).addChild(Se=e.MakeGate(0)).addChild(Te=e.MakeTimedGateHoriz(0,7.75)).addChild(wt=e.MakeCheckpoint()).addChild(yt=e.MakeCheckpoint()).addChild(l=e.MakeGround(4e3,80)).addChild($e=e.MakeSwitch(1)).addChild(Je=e.MakeSwitch(2)).addChild(et=e.MakeSwitch(1)).addChild(tt=e.MakeSwitch(1)).addChild(it=e.MakeSwitch(1)).addChild(c=e.MakeEndZone()),vt=new n.DisplayObjectContainer("level4_bottom","").addChild(i=e.MakeWall()).addChild(s=e.MakeWall()).addChild(k=e.MakeCandle(0)).addChild(P=e.MakeCandle(0)).addChild(V=e.MakeCandle(0)).addChild(S=e.MakeCandle(0)).addChild(T=e.MakeCandleHoriz(0)).addChild(x=e.MakeCandle(0)).addChild(E=e.MakeCandle(0)).addChild(O=e.MakeCandle(0)).addChild(A=e.MakeCandle(0)).addChild(L=e.MakeCandle(0)).addChild(j=e.MakeCandleHoriz(2)).addChild(I=e.MakeCandleHoriz(2)).addChild(F=e.MakeCandleHoriz(0)).addChild(D=e.MakeCandleHoriz(0)).addChild(G=e.MakeCandleHoriz(1)).addChild(R=e.MakeCandleHoriz(2)).addChild(H=e.MakeCandle(2)).addChild(N=e.MakeCandle(1)).addChild(B=e.MakeCandle(1)).addChild(z=e.MakeCandle(0)).addChild(W=e.MakeCandle(2)).addChild(U=e.MakeCandle(1)).addChild(X=e.MakeCandle(0)).addChild(Q=e.MakeCandle(0)).addChild(Y=e.MakeCandle(2)).addChild(Z=e.MakeCandle(2)).addChild(q=e.MakeCandleHoriz(0)).addChild(K=e.MakeCandleHoriz(0)).addChild($=e.MakeCandleHoriz(0)).addChild(J=e.MakeCandleHoriz(0)).addChild(ee=e.MakeCandleHoriz(0)).addChild(te=e.MakeCandleHoriz(0)).addChild(ie=e.MakeCandleHoriz(0)).addChild(ne=e.MakeCandleHoriz(0)).addChild(oe=e.MakeCandleHoriz(0)).addChild(ae=e.MakeCandle(0)).addChild(xe=e.MakeGateHoriz(0)).addChild(Ee=e.MakeGateHoriz(0)).addChild(Oe=e.MakeTimedGate(1,2)).addChild(Ae=e.MakeTimedGateHoriz(1,2)).addChild(Le=e.MakeGateHoriz(0)).addChild(je=e.MakeGateHoriz(0)).addChild(Ie=e.MakeTimedGate(2,2)).addChild(Fe=e.MakeTimedGate(2,1.75)).addChild(De=e.MakeTimedGate(2,1.5)).addChild(Ge=e.MakeTimedGate(0,2)).addChild(Re=e.MakeGate(0)).addChild(He=e.MakeGateHoriz(0)).addChild(Ne=e.MakeTimedGate(1,.95)).addChild(Be=e.MakeTimedGate(0,.95)).addChild(ze=e.MakeTimedGate(0,.95)).addChild(We=e.MakeTimedGate(2,.95)).addChild(Ue=e.MakeTimedGate(0,.95)).addChild(Xe=e.MakeTimedGate(1,.95)).addChild(Qe=e.MakeTimedGate(0,.95)).addChild(Ye=e.MakeTimedGate(0,.95)).addChild(Ze=e.MakeGate(0)).addChild(qe=e.MakeGate(0)).addChild(Ke=e.MakeTimedGateHoriz(0,7.75)).addChild(mt=e.MakeCheckpoint()).addChild(gt=e.MakeCheckpoint()).addChild(Ct=e.MakeCheckpoint()).addChild(d=e.MakeGround(4e3,80)).addChild(nt=e.MakeSwitch(2)).addChild(ot=e.MakeSwitch(2)).addChild(at=e.MakeSwitch(2)).addChild(rt=e.MakeSwitch(2)).addChild(st=e.MakeSwitch(1)).addChild(lt=e.MakeSwitch(1)).addChild(dt=e.MakeSwitch(1)).addChild(ct=e.MakeSwitch(1)).addChild(pt=e.MakeSwitch(2)).addChild(ut=e.MakeSwitch(2)).addChild(ht=e.MakeSwitch(1)).addChild(ft=e.MakeSwitch(2)).addChild(p=e.MakeEndZone());l.position=new r.Vector(-200,280),d.position=new r.Vector(-200,280),t.position=new r.Vector(-50,-500),o.position=new r.Vector(3e3,-500),i.position=new r.Vector(-50,-500),s.position=new r.Vector(3e3,-500),c.position=new r.Vector(2850,0),c.dimensions=new r.Vector(200,300),p.position=new r.Vector(2850,0),p.dimensions=new r.Vector(200,300),re.position=re.restPosition=new r.Vector(225,230),re.targetPosition=re.position.add(new r.Vector(0,-60)),se.position=se.restPosition=new r.Vector(385,230),se.targetPosition=se.position.add(new r.Vector(0,-60)),ce.position=ce.restPosition=new r.Vector(257,140),ce.targetPosition=ce.position.add(new r.Vector(0,120)),le.position=le.restPosition=new r.Vector(575,230),le.targetPosition=le.position.add(new r.Vector(0,-60)),de.position=de.restPosition=new r.Vector(735,230),de.targetPosition=de.position.add(new r.Vector(0,-60)),pe.position=pe.restPosition=new r.Vector(607,140),pe.targetPosition=pe.position.add(new r.Vector(0,120)),ue.position=ue.restPosition=new r.Vector(925,160),ue.targetPosition=ue.position.add(new r.Vector(0,70)),he.position=he.restPosition=new r.Vector(925,10),he.targetPosition=he.position.add(new r.Vector(0,-70)),$e.position=new r.Vector(301,244),Je.position=new r.Vector(651,244),re.syncSwitch($e),se.syncSwitch($e),le.syncSwitch(Je),de.syncSwitch(Je),k.position=new r.Vector(150,92),P.position=new r.Vector(185,-48),V.position=new r.Vector(438,152),S.position=new r.Vector(438,82),xe.position=xe.restPosition=new r.Vector(182,248),xe.targetPosition=xe.position.add(new r.Vector(0,-325)),Ee.position=Ee.restPosition=new r.Vector(310,248),Ee.targetPosition=Ee.position.add(new r.Vector(0,-325)),xe.syncSwitch($e),Ee.syncSwitch($e),Oe.position=Oe.restPosition=new r.Vector(360,260),Oe.targetPosition=Oe.position.add(new r.Vector(0,-75)),nt.position=new r.Vector(312,244),ot.position=new r.Vector(400,244),Ae.position=Ae.restPosition=new r.Vector(182,80),Ae.targetPosition=Ae.position.add(new r.Vector(0,65)),at.position=new r.Vector(270,109),rt.position=new r.Vector(398,65),[nt,ot,at,rt].map(function(e){ce.syncSwitch(e)}),T.position=new r.Vector(438,82),x.position=new r.Vector(534,82),E.position=new r.Vector(534,152),O.position=new r.Vector(822,92),A.position=new r.Vector(822,-36),L.position=new r.Vector(822,-164),Le.position=Le.restPosition=new r.Vector(566,24),Le.targetPosition=Le.position.add(new r.Vector(0,256)),je.position=je.restPosition=new r.Vector(694,24),je.targetPosition=je.position.add(new r.Vector(0,256)),Le.syncSwitch(Je),je.syncSwitch(Je),j.position=new r.Vector(566,-8),I.position=new r.Vector(694,-8),Ie.position=Ie.restPosition=new r.Vector(566,150),Ie.targetPosition=Ie.position.add(new r.Vector(0,80)),Fe.position=Fe.restPosition=new r.Vector(738,84),Fe.targetPosition=Fe.position.add(new r.Vector(0,30)),De.position=De.restPosition=new r.Vector(648,-30),De.targetPosition=De.position.add(new r.Vector(0,250)),st.position=new r.Vector(618,244),lt.position=new r.Vector(678,244),dt.position=new r.Vector(738,244),[st,lt,dt].map(function(e){pe.syncSwitch(e)}),ct.position=new r.Vector(925,244),ue.syncSwitch(ct),he.syncSwitch(ct),wt.position=new r.Vector(1e3,0),wt.spawnPoint=new r.Vector(1e3,200),mt.position=new r.Vector(480,0),mt.spawnPoint=new r.Vector(480,20),gt.position=new r.Vector(1e3,0),gt.spawnPoint=new r.Vector(1e3,200),fe.position=fe.restPosition=new r.Vector(1148,150),fe.targetPosition=fe.position.add(new r.Vector(0,65)),Ge.position=Ge.restPosition=new r.Vector(1148,150),Ge.targetPosition=Ge.position.add(new r.Vector(0,65)),u.position=new r.Vector(1228,110),h.position=new r.Vector(1356,110),f.position=new r.Vector(1484,110),w.position=new r.Vector(1612,110),y.position=new r.Vector(1340,-18),m.position=new r.Vector(1340,142),we.position=we.restPosition=new r.Vector(1468,-18),we.targetPosition=we.position.add(new r.Vector(0,-100)),g.position=new r.Vector(1468,142),C.position=new r.Vector(1596,-18),_.position=new r.Vector(1596,142),v.position=new r.Vector(1724,-18),b.position=new r.Vector(1724,142),ye.position=ye.restPosition=new r.Vector(1740,110),ye.targetPosition=ye.position.add(new r.Vector(0,170)),me.position=me.restPosition=new r.Vector(1852,142),me.targetPosition=me.position.add(new r.Vector(0,-100)),F.position=new r.Vector(1228,110),D.position=new r.Vector(1356,110),G.position=new r.Vector(1484,110),R.position=new r.Vector(1612,110),H.position=new r.Vector(1340,-18),N.position=new r.Vector(1340,142),B.position=new r.Vector(1468,-18),z.position=new r.Vector(1468,142),Re.position=Re.restPosition=new r.Vector(1596,-18),Re.targetPosition=Re.position.add(new r.Vector(0,-100)),W.position=new r.Vector(1596,142),U.position=new r.Vector(1724,-18),X.position=new r.Vector(1724,142),Q.position=new r.Vector(1756,206),He.position=He.restPosition=new r.Vector(1612,-70),He.targetPosition=He.position.add(new r.Vector(0,350)),et.position=new r.Vector(1684,74),tt.position=new r.Vector(1804,244),pt.position=new r.Vector(1420,244),ut.position=new r.Vector(1676,244),ht.position=new r.Vector(1804,244),we.syncSwitch(pt),ye.syncSwitch(tt),Re.syncSwitch(et),He.syncSwitch(ut),me.syncSwitch(ht),yt.position=new r.Vector(1950,0),yt.spawnPoint=new r.Vector(1950,200),Ct.position=new r.Vector(1880,0),Ct.spawnPoint=new r.Vector(1880,200),Y.position=new r.Vector(1942,220),Z.position=new r.Vector(2018,165),q.position=new r.Vector(2050,0),K.position=new r.Vector(2178,0),$.position=new r.Vector(2306,0),J.position=new r.Vector(2434,0),ee.position=new r.Vector(2050,110),te.position=new r.Vector(2178,110),ie.position=new r.Vector(2306,110),ne.position=new r.Vector(2434,110),oe.position=new r.Vector(2562,0),ae.position=new r.Vector(2530,142),M.position=new r.Vector(2562,0);for(var bt=[ge,Ce,_e,ve,be,Me,ke,Pe],Mt=[Ne,Be,ze,We,Ue,Xe,Qe,Ye],kt=0;kt<bt.length;kt++)bt[kt].position=bt[kt].restPosition=new r.Vector(2050+64*kt,152),bt[kt].targetPosition=bt[kt].position.add(new r.Vector(0,-175)),Mt[kt].position=Mt[kt].restPosition=new r.Vector(2050+64*kt,-23),Mt[kt].targetPosition=Mt[kt].position.add(new r.Vector(0,175)),bt[kt].smoothFactor=Mt[kt].smoothFactor=.1;return Ve.position=Ve.restPosition=new r.Vector(2626,160),Ve.targetPosition=Ve.position.add(new r.Vector(0,70)),Se.position=Se.restPosition=new r.Vector(2626,10),Se.targetPosition=Se.position.add(new r.Vector(0,-70)),Ze.position=Ze.restPosition=new r.Vector(2626,160),Ze.targetPosition=Ze.position.add(new r.Vector(0,70)),qe.position=qe.restPosition=new r.Vector(2626,10),qe.targetPosition=qe.position.add(new r.Vector(0,-70)),[Ve,Se,Ze,qe].map(function(e){e.smoothFactor=.1}),it.position=new r.Vector(2703,244),ft.position=new r.Vector(2567,244),Ve.syncSwitch(ft),Se.syncSwitch(ft),Ze.syncSwitch(it),qe.syncSwitch(it),Te.position=Te.restPosition=new r.Vector(2562,0),Te.targetPosition=Te.position.add(new r.Vector(0,280)),Te.smoothFactor=.115,Ke.position=Ke.restPosition=new r.Vector(2562,0),Ke.targetPosition=Ke.position.add(new r.Vector(0,280)),Ke.smoothFactor=.115,[tt,nt,ot,at,rt,st,lt,dt,ut].map(function(e){e.addChild(new a.Sprite(e.id+"_x","CakeWalk/transparent_x.png"))}),{topLevel:_t,topStartPoint:new r.Vector(50,200),topEndZone:c,topXBounds:[0,3e3],bottomLevel:vt,bottomStartPoint:new r.Vector(50,200),bottomEndZone:p,bottomXBounds:[0,3e3],gameDuration:325}},e.GetLevelTest=function(){var t,i,o,a,s,l,d,c,p,u=new n.DisplayObjectContainer("testlevel_top","").addChild(t=e.MakeTimedGate(0,5)).addChild(i=e.MakeTimedGate(0,2)).addChild(l=e.MakeGround(4e3,80)).addChild(c=e.MakeEndZone()),h=new n.DisplayObjectContainer("testlevel_bottom","").addChild(o=e.MakeTimedGate(0,5)).addChild(a=e.MakeTimedGate(0,1.75)).addChild(s=e.MakeSwitch(2)).addChild(d=e.MakeGround(4e3,80)).addChild(p=e.MakeEndZone());return l.position=new r.Vector(-200,280),d.position=new r.Vector(-200,280),t.position=t.restPosition=new r.Vector(200,70),t.targetPosition=t.position.add(new r.Vector(0,150)),o.position=o.restPosition=new r.Vector(200,70),o.targetPosition=o.position.add(new r.Vector(0,150)),i.position=i.restPosition=new r.Vector(400,70),i.targetPosition=i.position.add(new r.Vector(0,150)),a.position=a.restPosition=new r.Vector(500,220),a.targetPosition=a.position.add(new r.Vector(0,-150)),s.position=new r.Vector(300,240),i.syncSwitch(s),a.syncSwitch(s),c.position=new r.Vector(1e3,0),c.dimensions=new r.Vector(200,300),p.position=new r.Vector(1e3,0),p.dimensions=new r.Vector(200,300),{topLevel:u,topStartPoint:new r.Vector(50,50),topEndZone:c,topXBounds:[0,3e3],bottomLevel:h,bottomStartPoint:new r.Vector(50,50),bottomEndZone:p,bottomXBounds:[0,3e3],gameDuration:1e4}},e}();w._PreloadedLevels=[],w._Counter=0,i.LevelFactory=w},{"../engine/display/DisplayObjectContainer":32,"../engine/display/Sprite":35,"../engine/display/TiledSpriteContainer":37,"../engine/util/Vector":52,"./Checkpoint":13,"./Flame":14,"./Gate":15,"./MainGameSprite":18,"./Platform":20,"./Switch":24,"./TimedGate":25,"./TriggerZone":27}],17:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../engine/display/Game"),a=e("../engine/display/DisplayObjectContainer"),r=e("../engine/display/Camera"),s=e("../engine/input/InputHandler"),l=e("../engine/events/CallbackManager"),d=e("../engine/tween/TweenManager"),c=e("../engine/tween/Tween"),p=e("../engine/tween/TweenParam"),u=e("../engine/events/EventTypes"),h=e("../engine/sound/SoundManager"),f=e("../engine/display/Sprite"),w=e("../engine/util/Vector"),y=e("../engine/util/Physics"),m=e("./PlayerObject"),g=e("./LevelFactory"),C=e("./TimerUI"),_=e("./ScreenTransitionUI"),v=e("./MenuUI"),b=e("./BGLayerContainer"),M=e("./SwapAnimator"),k=function(e){function t(i){var n=e.call(this,"Cakewalk Game",1280,720,i)||this;n.totalNumberOfLevels=5,n.gameSongs=["jacket","atop","ocean","distance","cake"];var o;n.addChild(new a.DisplayObjectContainer("root","").addChild(n.rootEnv=new a.DisplayObjectContainer("root_env","").addChild(n.world2=new r.Camera("world2").addChild(n.background2=new b.BGLayerContainer("background2",5*n.width,200)).addChild(n.player2=new m.PlayerObject("player2","CakeWalk/animations/fullblueman.png",2))).addChild(n.world1=new r.Camera("world1").addChild(n.background1=new b.BGLayerContainer("background1",5*n.width,200)).addChild(n.player1=new m.PlayerObject("player1","CakeWalk/animations/fullredman.png",1)))).addChild(new a.DisplayObjectContainer("root_UI","").addChild(n.timerParent=new f.Sprite("timerUIPath","CakeWalk/TimerPath.png").addChild(new C.TimerUI("timerUI","CakeWalk/animations/StopWatchSprite.png",n.gameDuration,new w.Vector(-10,0),new w.Vector(961.5,0)))).addChild(n.menu=new v.MenuUI("menuUI","CakeWalk/title.png")).addChild(n.swapAnimator=new M.SwapAnimator("swapAnimator",n.world1,n.world2,n.player1,n.player2)).addChild(n.transitionFinalWin=new _.ScreenTransitionUI("finalWinTransitionUI","CakeWalk/final_win_screen.png")).addChild(n.transitionWin=new _.ScreenTransitionUI("winTransitionUI","CakeWalk/win_screen.png")).addChild(n.transitionLose=new _.ScreenTransitionUI("loseTransitionUI","CakeWalk/lose_screen.png")).addChild(o=new _.ScreenTransitionUI("plotScreen","CakeWalk/plot_screen.png")))),n.rootEnv.visible=!1,n.rootEnv.active=!1,n.world1.position=new w.Vector(0,0),n.world2.position=new w.Vector(1e6,1e6),n.world1.screenPosition=new w.Vector(0,0),n.world2.screenPosition=new w.Vector(0,n.height/2),n.world1.setFocus(1,n.width/2,n.width),n.world2.setFocus(1,n.width/2,n.width),n.world1.dimensions=new w.Vector(n.width,n.height/2),n.world2.dimensions=new w.Vector(n.width,n.height/2),n.world1.addEventListener(u.CameraScrollEventArgs.ClassName,n.background1.handleCameraScroll),n.world2.addEventListener(u.CameraScrollEventArgs.ClassName,n.background2.handleCameraScroll),n.timerParent.position=new w.Vector(50,n.height/2),n.timerParent.width=n.width-100,n.timerParent.pivotPoint=new w.Vector(0,.5),n.timerParent.visible=!1,n.timerParent.active=!1,n.timer.pivotPoint=new w.Vector(0,.5),n.timer.reset();var s=n;return n.menu.registerGameStartCallback(function(e){var t=function(){s.menuLock=!1,s.menu.setGameStarted(),s.menu.reset(),s.menu.alpha=1,s.menu.visible=!1,s.gameLevelNumber=e,s.gameState=2,s.loadLevel()};s.menuLock=!0,n.resumeGlobalUpdates();var i;d.TweenManager.instance.add(i=new c.Tween(s.menu).animate(new p.TweenParam(p.TweenAttributeType.Alpha,1,0,1,p.TweenFunctionType.Linear))),i.addEventListener(u.TweenEventArgs.ClassName,function(i){i.src.isComplete&&(h.SoundManager.instance.fadeToNext(n.gameSongs[e%n.gameSongs.length],1),0==e?o.fadeIn(function(){l.CallbackManager.instance.addCallback(function(){o.fadeOut(function(){t()},1)},5)},1):t())})}),n.menu.registerGameResumeCallback(function(){s.closeMenu()}),n.menuLock=!1,n.transitionLock=!1,n.gameOverLock=!1,n.swapLock=!1,n.gameLevelNumber=0,n.gameState=0,n.gameLoadingFramesElapsed=0,y.Physics.SetCollisionMat(0,3),y.Physics.SetCollisionMat(0,4),y.Physics.SetCollisionMat(1,4),y.Physics.SetCollisionMat(2,3),t.IsDebug&&(n.menu.visible=!1,n.menu.setGameLoaded(),n.menu.setGameStarted(),n.gameState=2,n.gameLevelNumber=-1,n.loadLevel()),n}return n(t,e),Object.defineProperty(t,"IsDebug",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.update=function(t){if(void 0===t&&(t=0),e.prototype.update.call(this,t),0==this.gameState){if(this.gameLoadingFramesElapsed<5)return void(this.gameLoadingFramesElapsed+=1);h.SoundManager.instance.loadSound("jacket","CakeWalk/music/short_skirt_long_jacket.mp3"),h.SoundManager.instance.loadSound("atop","CakeWalk/music/atop_a_cake.mp3"),h.SoundManager.instance.loadSound("ocean","CakeWalk/music/cake_by_the_ocean.mp3"),h.SoundManager.instance.loadSound("distance","CakeWalk/music/the_distance.mp3"),h.SoundManager.instance.loadSound("cake","CakeWalk/music/cake_martinez.mp3"),h.SoundManager.instance.playMusic(this.gameSongs[0]),h.SoundManager.instance.loadSound("loss","CakeWalk/music/loss.mp3"),h.SoundManager.instance.loadSound("tada","CakeWalk/music/tada.mp3"),h.SoundManager.instance.loadSound("burn","CakeWalk/music/burn.mp3"),h.SoundManager.instance.loadSound("checkpoint","CakeWalk/music/checkpoint.mp3"),h.SoundManager.instance.loadSound("jump","CakeWalk/music/jump.mp3"),h.SoundManager.instance.loadSound("squash","CakeWalk/music/squash.mp3"),h.SoundManager.instance.loadSound("thud","CakeWalk/music/thud.mp3"),h.SoundManager.instance.loadSound("swap_red","CakeWalk/music/swap1.mp3"),h.SoundManager.instance.loadSound("swap_blue","CakeWalk/music/swap2.mp3"),h.SoundManager.instance.loadSound("button","CakeWalk/music/buttonclick.mp3"),g.LevelFactory.PreloadLevels(),this.gameState=1,this.menu.setGameLoaded()}else if(1!=this.gameState||this.menuLock){if(4!=this.gameState||this.transitionLock){if(3!=this.gameState||this.transitionLock){if(2==this.gameState){if(this.swapLock)return;if(this.player1.run(this.getActionInput(0)),this.getActionInput(1)>0?this.player1.jump():this.getActionInput(2)>0&&this.player1.cancelJump(),this.player2.run(this.getActionInput(4)),this.getActionInput(5)>0?this.player2.jump():this.getActionInput(6)>0&&this.player2.cancelJump(),!this.gameOverLock&&this.player1.isAlive&&this.player2.isAlive){var i=0;if(this.getActionInput(3)>0&&this.player1.canSwap?i=1:this.getActionInput(7)>0&&this.player2.canSwap&&(i=2),i>0){this.swapLock=!0,this.rootEnv.active=!1,h.SoundManager.instance.playFX(1==i?"swap_red":"swap_blue"),this.swapAnimator.burstAnimate(.5,1==i);o=this;l.CallbackManager.instance.addCallback(function(){o.swapLock=!1,o.rootEnv.active=!0,(1==i?o.player1:o.player2).didSwap();var e=o.player1.position;o.player1.position=o.player2.position,o.player2.position=e,e=o.player1.previousPosition,o.player1.previousPosition=o.player2.previousPosition,o.player2.previousPosition=e,e=o.player1.velocity,o.player1.velocity=o.player2.velocity,o.player2.velocity=e,e=o.player1.respawnPoint,o.player1.respawnPoint=o.player2.respawnPoint,o.player2.respawnPoint=e,o.world1.getChild(1)==o.player1?(o.world2.setChild(o.player1,1),o.world1.setChild(o.player2,1)):(o.world1.setChild(o.player1,1),o.world2.setChild(o.player2,1))},.5)}}if(!this.gameOverLock&&this.getActionInput(8)>0&&this.openMenu(),!this.gameOverLock)if(this.timer.isFinished){h.SoundManager.instance.playFX("loss"),this.gameOverLock=!0;o=this;this.transitionLose.fadeIn(function(){o.rootEnv.active=!1,o.timerParent.active=!1,o.gameState=4,o.gameOverLock=!1},2)}else if(this.end1.isPlayerInZone&&this.end2.isPlayerInZone&&this.player1.isAlive&&this.player2.isAlive){h.SoundManager.instance.playFX("tada"),this.gameOverLock=!0;o=this;(n=this.gameLevelNumber==this.totalNumberOfLevels-1?this.transitionFinalWin:this.transitionWin).fadeIn(function(){o.rootEnv.active=!1,o.timerParent.active=!1,o.gameState=3,o.gameOverLock=!1},2)}this.player1.addForce(y.Physics.Gravity.multiply(this.player1.mass)),this.player2.addForce(y.Physics.Gravity.multiply(this.player2.mass))}}else if(this.getActionInput(12)>0){this.transitionLock=!0;var n=this.gameLevelNumber==this.totalNumberOfLevels-1?this.transitionFinalWin:this.transitionWin;this.gameLevelNumber=(this.gameLevelNumber+1)%this.totalNumberOfLevels;o=this;n.fadeOut(function(){o.loadLevel(),o.gameState=2,o.transitionLock=!1},1),h.SoundManager.instance.fadeToNext(this.gameSongs[this.gameLevelNumber%this.gameSongs.length],1)}}else if(this.getActionInput(12)>0){this.transitionLock=!0;var o=this;this.transitionLose.fadeOut(function(){o.loadLevel(),o.gameState=2,o.transitionLock=!1},1)}}else this.getActionInput(8)>0&&this.world1.children.length>2&&this.closeMenu(),this.getActionInput(9)>0?this.menu.menuAction():this.getActionInput(10)>0?this.menu.menuScroll(!1):this.getActionInput(11)>0&&this.menu.menuScroll(!0)},t.prototype.loadLevel=function(){var e=g.LevelFactory.GetLevel(this.gameLevelNumber);this.world1.children.length>2&&this.world2.children.length>2&&!g.LevelFactory.IsPreloaded&&(this.world1.getChild(2).clearReferences(),this.world2.getChild(2).clearReferences()),this.world1.setChild(e.topLevel,2),this.world2.setChild(e.bottomLevel,2),this.end1=e.topEndZone,this.end2=e.bottomEndZone,this.world1.setChild(this.player1,1),this.world2.setChild(this.player2,1),this.player1.position=this.player1.respawnPoint=e.topStartPoint,this.player2.position=this.player2.respawnPoint=e.bottomStartPoint,this.world1.screenPosition.x=-(this.player1.position.x-this.width/2),this.world2.screenPosition.x=-(this.player2.position.x-this.width/2),this.world1.setXBounds(e.topXBounds[0],e.topXBounds[1]),this.world2.setXBounds(e.bottomXBounds[0],e.bottomXBounds[1]),this.timer.reset(),this.timer.gameDuration=e.gameDuration,this.player1.reset(),this.player2.reset(),this.background1.reset(),this.background2.reset(),this.rootEnv.active=this.rootEnv.visible=!0,this.timerParent.active=this.timerParent.visible=!0},t.prototype.openMenu=function(){this.menu.visible=!0,this.rootEnv.active=!1,this.timerParent.active=!1,this.pauseGlobalUpdates(),this.gameState=1},t.prototype.closeMenu=function(){this.menu.reset(),this.menu.visible=!1,this.rootEnv.active=!0,this.timerParent.active=!0,this.resumeGlobalUpdates(),this.gameState=2},t.prototype.getActionInput=function(e){return 0==e?s.InputHandler.instance.gamepadPresent(0)?s.InputHandler.instance.gamepadAxis(0,0):s.InputHandler.instance.keyHeld(37)!=s.InputHandler.instance.keyHeld(39)?s.InputHandler.instance.keyHeld(37)?-1:1:0:1==e?s.InputHandler.instance.gamepadPresent(0)?s.InputHandler.instance.gamepadButtonDown(0,0)?1:0:s.InputHandler.instance.keyDown(38)?1:0:2==e?s.InputHandler.instance.gamepadPresent(0)?s.InputHandler.instance.gamepadButtonUp(0,0)?1:0:s.InputHandler.instance.keyUp(38)?1:0:3==e?s.InputHandler.instance.gamepadPresent(0)?s.InputHandler.instance.gamepadButtonDown(0,2)?1:0:s.InputHandler.instance.keyDown(13)?1:0:4==e?s.InputHandler.instance.gamepadPresent(1)?s.InputHandler.instance.gamepadAxis(1,0):s.InputHandler.instance.keyHeld("A")!=s.InputHandler.instance.keyHeld("D")?s.InputHandler.instance.keyHeld("A")?-1:1:0:5==e?s.InputHandler.instance.gamepadPresent(1)?s.InputHandler.instance.gamepadButtonDown(1,0)?1:0:s.InputHandler.instance.keyDown("W")?1:0:6==e?s.InputHandler.instance.gamepadPresent(1)?s.InputHandler.instance.gamepadButtonUp(1,0)?1:0:s.InputHandler.instance.keyUp("W")?1:0:7==e?s.InputHandler.instance.gamepadPresent(1)?s.InputHandler.instance.gamepadButtonDown(1,2)?1:0:s.InputHandler.instance.keyDown(32)?1:0:8==e?s.InputHandler.instance.gamepadButtonDown(0,9)||s.InputHandler.instance.gamepadButtonDown(1,9)||s.InputHandler.instance.keyDown(27)?1:0:12==e?s.InputHandler.instance.gamepadButtonDown(0,0)||s.InputHandler.instance.gamepadButtonDown(0,2)||s.InputHandler.instance.gamepadButtonDown(0,9)||s.InputHandler.instance.gamepadButtonDown(1,0)||s.InputHandler.instance.gamepadButtonDown(1,2)||s.InputHandler.instance.gamepadButtonDown(1,9)||s.InputHandler.instance.keyDown(13)||s.InputHandler.instance.keyDown(32)?1:0:9==e?s.InputHandler.instance.gamepadPresent(0)||s.InputHandler.instance.gamepadPresent(1)?s.InputHandler.instance.gamepadButtonDown(0,0)||s.InputHandler.instance.gamepadButtonDown(1,0)?1:0:s.InputHandler.instance.keyDown(13)||s.InputHandler.instance.keyDown(32)?1:0:10==e?s.InputHandler.instance.gamepadPresent(0)||s.InputHandler.instance.gamepadPresent(1)?s.InputHandler.instance.gamepadButtonDown(0,12)||s.InputHandler.instance.gamepadButtonDown(1,12)?1:0:s.InputHandler.instance.keyDown(38)?1:0:11==e?s.InputHandler.instance.gamepadPresent(0)||s.InputHandler.instance.gamepadPresent(1)?s.InputHandler.instance.gamepadButtonDown(0,13)||s.InputHandler.instance.gamepadButtonDown(1,13)?1:0:s.InputHandler.instance.keyDown(40)?1:0:0},Object.defineProperty(t.prototype,"timer",{get:function(){return this.timerParent.getChild(0)},enumerable:!0,configurable:!0}),t}(o.Game);i.MainGame=k;var P=document.getElementById("game");P.getContext&&new k(P).start()},{"../engine/display/Camera":29,"../engine/display/DisplayObjectContainer":32,"../engine/display/Game":33,"../engine/display/Sprite":35,"../engine/events/CallbackManager":38,"../engine/events/EventTypes":40,"../engine/input/InputHandler":42,"../engine/sound/SoundManager":43,"../engine/tween/Tween":44,"../engine/tween/TweenManager":45,"../engine/tween/TweenParam":46,"../engine/util/Physics":50,"../engine/util/Vector":52,"./BGLayerContainer":12,"./LevelFactory":16,"./MenuUI":19,"./PlayerObject":21,"./ScreenTransitionUI":22,"./SwapAnimator":23,"./TimerUI":26}],18:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o._color=n,o}return n(t,e),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e},enumerable:!0,configurable:!0}),t}(e("../engine/display/Sprite").Sprite);i.MainGameSprite=o,i.isRefreshable=function(e){return"refreshState"in e}},{"../engine/display/Sprite":35}],19:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../engine/display/Sprite"),a=e("../engine/display/DisplayObjectContainer"),r=e("../engine/display/TextObject"),s=e("../engine/util/Vector"),l=e("../engine/sound/SoundManager"),d=function(e){function t(t,i){var n,l,d,c,p,u,h,f,w,y,m,g,C,_,v,b,M,k,P,V,S,T,x,E=e.call(this,t,i)||this;E.addChild(E._cursor=new o.Sprite(t+"_cursor","CakeWalk/cake_small.png")).addChild(new a.DisplayObjectContainer(t+"_mainmenu","").addChild(new a.DisplayObjectContainer(t+"mainmenu_options","").addChild(E._startButton=n=new r.TextObject(t+"_t0")).addChild(l=new r.TextObject(t+"_t1")).addChild(g=new r.TextObject(t+"_t11")).addChild(d=new r.TextObject(t+"_t2")))).addChild(new a.DisplayObjectContainer(t+"_sound","").addChild(new a.DisplayObjectContainer(t+"_sound_options","").addChild(E._muteMusicButton=c=new r.TextObject(t+"_t3")).addChild(E._muteFXButton=p=new r.TextObject(t+"_t4")).addChild(u=new r.TextObject(t+"_t5")))).addChild(new a.DisplayObjectContainer(t+"_levels","").addChild(new a.DisplayObjectContainer(t+"_levels_options","").addChild(f=new r.TextObject(t+"_t7")).addChild(w=new r.TextObject(t+"_t8")).addChild(y=new r.TextObject(t+"_t9")).addChild(C=new r.TextObject(t+"_t12")).addChild(_=new r.TextObject(t+"_t13")).addChild(m=new r.TextObject(t+"_t10")))).addChild(new a.DisplayObjectContainer(t+"_credits","").addChild(new a.DisplayObjectContainer(t+"_credits_options","").addChild(h=new r.TextObject(t+"_t6"))).addChild(v=new r.TextObject(t+"_tn0")).addChild(b=new r.TextObject(t+"_tn1")).addChild(M=new r.TextObject(t+"_tn2")).addChild(k=new r.TextObject(t+"_tn3")).addChild(P=new r.TextObject(t+"_tn4")).addChild(V=new r.TextObject(t+"_tn5")).addChild(S=new r.TextObject(t+"_tn6")).addChild(T=new r.TextObject(t+"_tn7"))).addChild(new a.DisplayObjectContainer(t+"_loading","").addChild(x=new r.TextObject(t+"_tl"))),n.position=new s.Vector(490,350),n.text="Play Game!",l.position=new s.Vector(490,400),l.text="Sound",g.position=new s.Vector(490,450),g.text="Level Select",d.position=new s.Vector(490,500),d.text="Credits",c.position=new s.Vector(440,350),c.text="Mute Music",p.position=new s.Vector(440,400),p.text="Mute Sound Effects",u.position=new s.Vector(540,550),u.text="Go Back",h.position=new s.Vector(540,550),h.text="Go Back",f.position=new s.Vector(590,340),f.text="Cup",w.position=new s.Vector(590,375),w.text="Bundt",y.position=new s.Vector(590,410),y.text="Cheese",C.position=new s.Vector(590,445),C.text="Carrot",_.position=new s.Vector(590,480),_.text="Moon",m.position=new s.Vector(540,550),m.text="Go Back",v.position=new s.Vector(210,325),v.text="Jeffery Cui",b.position=new s.Vector(490,325),b.text="Alec Miller",M.position=new s.Vector(770,325),M.text="Jay Sebastian",k.position=new s.Vector(390,375),k.text="Short Skirt Long Jacket - Cake, arranged by 8bitmusic",P.position=new s.Vector(390,400),P.text="Atop a Cake - Alvvays, arranged by UnivMead",V.position=new s.Vector(390,425),V.text="Cake by the Ocean - DNCE, arranged by Ion",S.position=new s.Vector(390,450),S.text="The Distance - Cake, arranged by TheMusickGuy",T.position=new s.Vector(390,475),T.text="Cake - Melanie Martinez, arranged by ZaneDobler",x.position=new s.Vector(540,350),x.text="Loading...",[n,l,d,c,p,u,h,f,w,y,m,g,C,_,v,b,M,k,P,V,S,T,x].map(function(e){e.color=new s.Vector(0,0,0),e.fontSize=48,e.fontFamily="Sanchez"}),[v,b,M].map(function(e){e.fontSize=46}),[k,P,V,S,T].map(function(e){e.fontSize=20}),[f,w,y,C,_].map(function(e){e.fontSize=32}),E._cursor.position=new s.Vector(490,350),E._cursor.pivotPoint=new s.Vector(.5,.9),E._gameStarted=!1,E._optionIndex=0,E._menuIndex=0;for(var O=0;O<E.children.length-1;O++)E.getChild(O).visible=!1;return E}return n(t,e),t.prototype.update=function(t){void 0===t&&(t=0),e.prototype.update.call(this,t),this._cursor.position=this.optionFocus.position.subtract(new s.Vector(50,0))},t.prototype.menuScroll=function(e){var t=this.getChild(this._menuIndex+1).getChild(0).children.length;e?this._optionIndex=(this._optionIndex+1)%t:(this._optionIndex=this._optionIndex-1,this._optionIndex<0&&(this._optionIndex+=t))},t.prototype.menuAction=function(){0==this._menuIndex?0==this._optionIndex?this._gameStarted?null!=this._gameResumeCallback&&this._gameResumeCallback():null!=this._gameStartCallback&&this._gameStartCallback(0):1==this._optionIndex?this.menuChange(1):2==this._optionIndex?this.menuChange(2):3==this._optionIndex&&this.menuChange(3):1==this._menuIndex?0==this._optionIndex?(l.SoundManager.instance.setMusicMuted(!l.SoundManager.instance.isMusicMuted()),this._muteMusicButton.text=l.SoundManager.instance.isMusicMuted()?"Unmute Music":"Mute Music"):1==this._optionIndex?(l.SoundManager.instance.setFXMuted(!l.SoundManager.instance.isFXMuted()),this._muteFXButton.text=l.SoundManager.instance.isFXMuted()?"Unmute Sound Effects":"Mute Sound Effects"):this.menuChange(0):2==this._menuIndex?5==this._optionIndex?this.menuChange(0):this._gameStartCallback(this._optionIndex):3==this._menuIndex&&this.menuChange(0)},t.prototype.registerGameStartCallback=function(e){this._gameStartCallback=e},t.prototype.registerGameResumeCallback=function(e){this._gameResumeCallback=e},t.prototype.setGameStarted=function(){this._gameStarted=!0,this._startButton.text="Resume Game"},t.prototype.setGameLoaded=function(){this.getChild(0).visible=this.getChild(1).visible=!0,this.getChild(this.children.length-1).visible=!1},t.prototype.reset=function(){this._optionIndex=0,this._menuIndex=0,this.getChild(1).visible=!0;for(var e=2;e<this.children.length;e++)this.getChild(e).visible=!1},t.prototype.menuChange=function(e){this.getChild(this._menuIndex+1).visible=!1,this.getChild(e+1).visible=!0,this._menuIndex=e,this._optionIndex=0},Object.defineProperty(t.prototype,"optionFocus",{get:function(){return this.getChild(this._menuIndex+1).getChild(0).getChild(this._optionIndex)},enumerable:!0,configurable:!0}),t}(o.Sprite);i.MenuUI=d},{"../engine/display/DisplayObjectContainer":32,"../engine/display/Sprite":35,"../engine/display/TextObject":36,"../engine/sound/SoundManager":43,"../engine/util/Vector":52}],20:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../engine/display/ColliderSprite"),a=e("../engine/util/mixins"),r=function(e){function t(t,i,n){void 0===n&&(n=0);var o=e.call(this,t,i,n)||this;return o.collisionLayer=0==o.color?0:1==o.color?1:2,o.isTrigger=!1,o}return n(t,e),t}(e("./MainGameSprite").MainGameSprite);i.Platform=r,a.applyMixins(r,[o.RectColliderSpriteBase])},{"../engine/display/ColliderSprite":30,"../engine/util/mixins":53,"./MainGameSprite":18}],21:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../engine/display/ColliderSprite"),a=e("../engine/display/PhysicsSprite"),r=e("../engine/display/AnimatedSprite"),s=e("../engine/events/EventTypes"),l=e("../engine/events/CallbackManager"),d=e("../engine/events/EventDispatcher"),c=e("../engine/tween/TweenManager"),p=e("../engine/tween/Tween"),u=e("../engine/tween/TweenParam"),h=e("../engine/util/Vector"),f=e("../engine/util/Physics"),w=e("../engine/util/mixins"),y=e("../engine/sound/SoundManager"),m=function(e){function t(t,i,n){var o=e.call(this,t,i,n)||this;return o.jumpTargetSpeed=14,o.jumpMinSpeed=8,o.moveForce=new h.Vector(15,0),o.topSpeed=15,o.runningSpeed=5,o.stillSpeed=.3,o.reverseFactor=2,o.rampDownFactor=5,o.rampDownAirFactor=12,o.respawnTime=2,o.swapCooldownTime=3,o.thudThresholdSpeed=7.5,o.initPhysics(),o.initAnimation(i),o.grounded=!1,o.jumping=!1,o._respawnPoint=h.Vector.zero,o._eventQueue=[],o._currentDirectionRight=!0,o._canSwap=!0,o._inDeathState=!1,o._previousVelocity=h.Vector.zero,o.addChild(o._cooldownAnimation=new r.AnimatedSprite(o.id+"_swap_circle","CakeWalk/animations/refresh.png")),o._cooldownAnimation.position=new h.Vector(-10,-20),o._cooldownAnimation.visible=!1,o.collisionLayer=1==o.color?3:4,o.isTrigger=!1,o.elasticity=0,o.terminalSpeeds.x=o.topSpeed,d.EventDispatcher.addGlobalListener(s.CollisionEventArgs.ClassName,o.collisionHandler),o}return n(t,e),t.prototype.update=function(t){if(void 0===t&&(t=0),e.prototype.update.call(this,t),this._previousVelocity=this.velocity,this.updatePhysics(),this.updateAnimation(),!this._inDeathState){for(var i=[!1,!1,!1,!1],n=0;n<this._eventQueue.length;n++)this._eventQueue[n].type!=s.CollisionType.Enter&&this._eventQueue[n].type!=s.CollisionType.Stay||(this._eventQueue[n].normal.y<0&&(i[0]=!0),this._eventQueue[n].normal.x>0&&(i[1]=!0),this._eventQueue[n].normal.y>0&&(i[2]=!0),this._eventQueue[n].normal.x<0&&(i[3]=!0)),this._eventQueue[n].type==s.CollisionType.Enter&&(this._eventQueue[n].normal.y>0||0!=this._eventQueue[n].normal.x)&&this._previousVelocity.length()>=this.thudThresholdSpeed&&y.SoundManager.instance.playFX("thud");(i[0]&&i[2]||i[1]&&i[3])&&this.respawn("squash")}this._eventQueue=[]},t.prototype.run=function(e){e<-.5&&!this._inDeathState?(this.addForce(this.moveForce.multiply(-1).multiply(this.velocity.x>this.runningSpeed&&this.grounded?this.reverseFactor:1)),this._currentDirectionRight=!1,this.grounded?this.animate("walk_left"):this.animate("jump_left")):e>.5&&!this._inDeathState?(this.addForce(this.moveForce.multiply(this.velocity.x<-this.runningSpeed&&this.grounded?this.reverseFactor:1)),this._currentDirectionRight=!0,this.grounded?this.animate("walk"):this.animate("jump")):(Math.abs(this.velocity.x)<this.stillSpeed?this.addForce(new h.Vector(-this.velocity.x/f.Physics.DeltaTime*this.mass,0)):this.addForce(new h.Vector(-this.velocity.x/(this.grounded?this.rampDownFactor:this.rampDownAirFactor)/f.Physics.DeltaTime*this.mass,0)),!this._inDeathState&&this.grounded&&(this._currentDirectionRight?this.animate("idle"):this.animate("idle_left")))},t.prototype.jump=function(){this.grounded&&!this._inDeathState&&(y.SoundManager.instance.playFX("jump"),this.addForce(new h.Vector(0,-this.jumpTargetSpeed/f.Physics.DeltaTime*this.mass).add(f.Physics.Gravity.multiply(this.mass))),this.jumping=!0,this._currentDirectionRight?this.animate("jump"):this.animate("jump_left"))},t.prototype.cancelJump=function(){this.jumping&&!this._inDeathState&&(this.velocity.y<-this.jumpMinSpeed&&this.addForce(new h.Vector(0,-(this.velocity.y+this.jumpMinSpeed)/f.Physics.DeltaTime*this.mass).add(f.Physics.Gravity.multiply(this.mass))),this.jumping=!1)},t.prototype.didSwap=function(){var e=this;this._canSwap=!1;this._cooldownAnimation.visible=!0,this._cooldownAnimation.restartAnimation(),l.CallbackManager.instance.addCallback(function(){e._cooldownAnimation.visible=!1,e._canSwap=!0},this.swapCooldownTime)},t.prototype.respawn=function(e){if(!this._inDeathState){this._inDeathState=!0,null!=e?"fire"==e?(y.SoundManager.instance.playFX("burn"),this.animate("burn"),c.TweenManager.instance.add(new p.Tween(this).animate(new u.TweenParam(u.TweenAttributeType.Alpha,1,0,this.respawnTime-.5,u.TweenFunctionType.Linear)))):"squash"==e&&(y.SoundManager.instance.playFX("squash"),this.animate("squash"),c.TweenManager.instance.add(new p.Tween(this).animate(new u.TweenParam(u.TweenAttributeType.Alpha,1,0,this.respawnTime-.5,u.TweenFunctionType.Linear)))):c.TweenManager.instance.add(new p.Tween(this).animate(new u.TweenParam(u.TweenAttributeType.Alpha,1,0,this.respawnTime-.5,u.TweenFunctionType.Linear)));var t=this;l.CallbackManager.instance.addCallback(function(){t.position=t.respawnPoint,t.velocity=h.Vector.zero,t.alpha=1,t.animate("idle"),t._currentDirectionRight=!0,t._inDeathState=!1},this.respawnTime)}},t.prototype.reset=function(){this.previousPosition=this.position,this.velocity=h.Vector.zero,this._currentDirectionRight=!0,this._inDeathState=!1,this._cooldownAnimation.visible=!1,this._canSwap=!0,this.grounded=!1,this.jumping=!1,this.animate("idle")},Object.defineProperty(t.prototype,"isAlive",{get:function(){return!this._inDeathState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canSwap",{get:function(){return this._canSwap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"respawnPoint",{get:function(){return this._respawnPoint},set:function(e){this._respawnPoint=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collisionHandler",{get:function(){var e=this,t=this;return function(i){t.isAlive&&(i.obj1!==t&&i.obj2!==t||((i.type==s.CollisionType.Enter||i.type==s.CollisionType.Stay)&&i.normal.y<0?e.grounded=!0:i.type==s.CollisionType.Exit&&(e.grounded=!1),e._eventQueue.push(i)))}},enumerable:!0,configurable:!0}),t}(e("./MainGameSprite").MainGameSprite);i.PlayerObject=m,w.applyMixins(m,[o.RectColliderSpriteBase,a.PhysicsSpriteBase,r.AnimatedSpriteBase])},{"../engine/display/AnimatedSprite":28,"../engine/display/ColliderSprite":30,"../engine/display/PhysicsSprite":34,"../engine/events/CallbackManager":38,"../engine/events/EventDispatcher":39,"../engine/events/EventTypes":40,"../engine/sound/SoundManager":43,"../engine/tween/Tween":44,"../engine/tween/TweenManager":45,"../engine/tween/TweenParam":46,"../engine/util/Physics":50,"../engine/util/Vector":52,"../engine/util/mixins":53,"./MainGameSprite":18}],22:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../engine/display/Sprite"),a=e("../engine/tween/TweenManager"),r=e("../engine/tween/Tween"),s=e("../engine/tween/TweenParam"),l=e("../engine/events/EventTypes"),d=e("../engine/events/EventDispatcher"),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.alpha=0,n._fadeHandler=n.fadeFinishedHandler,n}return n(t,e),t.prototype.fadeIn=function(e,t){this._callback=e,this.alpha=0,a.TweenManager.instance.add(new r.Tween(this).animate(new s.TweenParam(s.TweenAttributeType.Alpha,0,1,t,s.TweenFunctionType.Linear))),d.EventDispatcher.addGlobalListener(l.TweenEventArgs.ClassName,this._fadeHandler)},t.prototype.fadeOut=function(e,t){this._callback=e,this.alpha=1,a.TweenManager.instance.add(new r.Tween(this).animate(new s.TweenParam(s.TweenAttributeType.Alpha,1,0,t,s.TweenFunctionType.Linear))),d.EventDispatcher.addGlobalListener(l.TweenEventArgs.ClassName,this._fadeHandler)},Object.defineProperty(t.prototype,"isFading",{get:function(){return a.TweenManager.instance.isTweening(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fadeFinishedHandler",{get:function(){var e=this;return function(t){var i=t.src;i.object==e&&i.isComplete&&(d.EventDispatcher.removeGlobalListener(l.TweenEventArgs.ClassName,e._fadeHandler),e._callback())}},enumerable:!0,configurable:!0}),t}(o.Sprite);i.ScreenTransitionUI=c},{"../engine/display/Sprite":35,"../engine/events/EventDispatcher":39,"../engine/events/EventTypes":40,"../engine/tween/Tween":44,"../engine/tween/TweenManager":45,"../engine/tween/TweenParam":46}],23:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../engine/tween/TweenManager"),a=e("../engine/tween/Tween"),r=e("../engine/tween/TweenParam"),s=e("../engine/events/CallbackManager"),l=e("../engine/display/DisplayObjectContainer"),d=e("../engine/display/Sprite"),c=e("../engine/util/Vector"),p=function(e){function t(t,i,n,o,a){var r=e.call(this,t,"")||this;r._topCamera=i,r._bottomCamera=n,r._redPlayer=o,r._bluePlayer=a,r.addChild(r._redBurst=new l.DisplayObjectContainer(t+"_redburst","").addChild(new d.Sprite(t+"_redburst_0","CakeWalk/red_particle.png")).addChild(new d.Sprite(t+"_redburst_1","CakeWalk/red_particle.png")).addChild(new d.Sprite(t+"_redburst_2","CakeWalk/red_particle.png")).addChild(new d.Sprite(t+"_redburst_3","CakeWalk/red_particle.png"))),r.addChild(r._blueBurst=new l.DisplayObjectContainer(t+"_blueburst","").addChild(new d.Sprite(t+"_blueburst_0","CakeWalk/blue_particle.png")).addChild(new d.Sprite(t+"_blueburst_1","CakeWalk/blue_particle.png")).addChild(new d.Sprite(t+"_blueburst_2","CakeWalk/blue_particle.png")).addChild(new d.Sprite(t+"_blueburst_3","CakeWalk/blue_particle.png")));for(s=0;s<r._redBurst.children.length;s++)r._redBurst.getChild(s).localScale=new c.Vector(.5,.5),r._redBurst.getChild(s).pivotPoint=new c.Vector(.5,.5);for(var s=0;s<r._blueBurst.children.length;s++)r._blueBurst.getChild(s).localScale=new c.Vector(.5,.5),r._blueBurst.getChild(s).pivotPoint=new c.Vector(.5,.5);return r.addChild(r._redStar=new d.Sprite(t+"_redstar","CakeWalk/red_star.png")),r.addChild(r._blueStar=new d.Sprite(t+"_bluestar","CakeWalk/blue_star.png")),r._redStar.localScale=new c.Vector(.5,.5),r._redStar.pivotPoint=c.Vector.zero,r._blueStar.localScale=new c.Vector(.5,.5),r._blueStar.pivotPoint=c.Vector.one,r._redBurst.visible=!1,r._blueBurst.visible=!1,r._redStar.visible=!1,r._blueStar.visible=!1,r}return n(t,e),t.prototype.burstAnimate=function(e,t){var i=this,n=t?this._redPlayer:this._bluePlayer,l=t?this._bluePlayer:this._redPlayer,d=t?this._redBurst:this._blueBurst,p=this._topCamera.getChild(1)==n?this._topCamera.screenPosition.add(n.position.add(n.dimensions.divide(2))):this._bottomCamera.screenPosition.add(n.position.add(n.dimensions.divide(2))),u=this._topCamera.getChild(1)==l?this._topCamera.screenPosition.add(l.position.add(l.dimensions.divide(2))):this._bottomCamera.screenPosition.add(l.position.add(l.dimensions.divide(2)));d.position=p,d.visible=!0;for(var h=0;h<d.children.length;h++){var f=d.getChild(h);f.position=c.Vector.zero,f.alpha=1;var w=(0==Math.floor(2*Math.random())?-1:1)*(30*Math.random()+15),y=(0==Math.floor(2*Math.random())?-1:1)*(30*Math.random()+15);o.TweenManager.instance.add(new a.Tween(f).animate(new r.TweenParam(r.TweenAttributeType.Alpha,1,0,3*e/4,r.TweenFunctionType.Linear)).animate(new r.TweenParam(r.TweenAttributeType.X,0,w,3*e/4,r.TweenFunctionType.Linear)).animate(new r.TweenParam(r.TweenAttributeType.Y,0,y,3*e/4,r.TweenFunctionType.Linear)))}this._redStar.position=t?p:u,this._redStar.rotation=0,this._redStar.visible=!0,this._blueStar.position=t?u:p,this._blueStar.rotation=0,this._blueStar.visible=!0,o.TweenManager.instance.add(new a.Tween(this._redStar).animate(new r.TweenParam(r.TweenAttributeType.X,this._redStar.x,this._blueStar.x,e,r.TweenFunctionType.Quadratic)).animate(new r.TweenParam(r.TweenAttributeType.Y,this._redStar.y,this._blueStar.y,e,r.TweenFunctionType.Quadratic)).animate(new r.TweenParam(r.TweenAttributeType.Rotation,0,360,e,r.TweenFunctionType.Quadratic))),o.TweenManager.instance.add(new a.Tween(this._blueStar).animate(new r.TweenParam(r.TweenAttributeType.X,this._blueStar.x,this._redStar.x,e,r.TweenFunctionType.Quadratic)).animate(new r.TweenParam(r.TweenAttributeType.Y,this._blueStar.y,this._redStar.y,e,r.TweenFunctionType.Quadratic)).animate(new r.TweenParam(r.TweenAttributeType.Rotation,0,360,e,r.TweenFunctionType.Quadratic))),s.CallbackManager.instance.addCallback(function(){i._redBurst.visible=!1,i._blueBurst.visible=!1,i._redStar.visible=!1,i._blueStar.visible=!1},e)},t}(l.DisplayObjectContainer);i.SwapAnimator=p},{"../engine/display/DisplayObjectContainer":32,"../engine/display/Sprite":35,"../engine/events/CallbackManager":38,"../engine/tween/Tween":44,"../engine/tween/TweenManager":45,"../engine/tween/TweenParam":46,"../engine/util/Vector":52}],24:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../engine/display/ColliderSprite"),a=e("../engine/events/EventTypes"),r=e("../engine/events/EventDispatcher"),s=e("../engine/util/mixins"),l=e("../engine/sound/SoundManager"),d=e("./PlayerObject"),c=function(e){function t(t,i,n){void 0===n&&(n=0);var o=e.call(this,t,i,n)||this;return o.collisionLayer=0,o.isTrigger=!1,o._isPressed=!1,o._eventQueue=[],o._onEnter=[],o._onExit=[],r.EventDispatcher.addGlobalListener(a.CollisionEventArgs.ClassName,o.collisionHandler),o}return n(t,e),t.prototype.update=function(t){if(void 0===t&&(t=0),e.prototype.update.call(this,t),1==this._eventQueue.length){var i=this._eventQueue[0];if(!this._isPressed&&i.type==a.CollisionType.Enter&&i.normal.y<0){for(n=0;n<this._onEnter.length;n++)this._onEnter[n]();l.SoundManager.instance.playFX("button"),this._isPressed=!0}else if(this._isPressed&&i.type==a.CollisionType.Exit){for(var n=0;n<this._onExit.length;n++)this._onExit[n]();this._isPressed=!1}}this._eventQueue=[]},t.prototype.refreshState=function(){this._isPressed=!1,this._eventQueue=[]},t.prototype.getOnEnter=function(){return this._onEnter},t.prototype.addOnEnter=function(e){this._onEnter.push(e)},t.prototype.getOnExit=function(){return this._onExit},t.prototype.addOnExit=function(e){this._onExit.push(e)},Object.defineProperty(t.prototype,"collisionHandler",{get:function(){var e=this;return function(t){if((t.obj1===e||t.obj2===e)&&(t.obj1 instanceof d.PlayerObject||t.obj2 instanceof d.PlayerObject)){var i=t.obj1 instanceof d.PlayerObject?t.obj1:t.obj2;i.color!=e.color&&0!=e.color||(t.type==a.CollisionType.Exit||t.type==a.CollisionType.Enter&&i.isAlive)&&e._eventQueue.push(t)}}},enumerable:!0,configurable:!0}),t}(e("./MainGameSprite").MainGameSprite);i.Switch=c,s.applyMixins(c,[o.RectColliderSpriteBase])},{"../engine/display/ColliderSprite":30,"../engine/events/EventDispatcher":39,"../engine/events/EventTypes":40,"../engine/sound/SoundManager":43,"../engine/util/mixins":53,"./MainGameSprite":18,"./PlayerObject":21}],25:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(t,i,n,o){void 0===o&&(o=0);var a=e.call(this,t,i,o)||this;return a._halfCycleTime=n,a._isSynced=!1,a._halfCycleTimer=0,a._isActive=!1,a}return n(t,e),t.prototype.update=function(t){void 0===t&&(t=0),e.prototype.update.call(this,t),this._isSynced&&!this._isActive||(this._halfCycleTimer+=t,this._halfCycleTimer>this._halfCycleTime&&(this.moveMode=1-this.moveMode,this._halfCycleTimer=0))},t.prototype.refreshState=function(){e.prototype.refreshState.call(this),this._halfCycleTimer=0,this._isActive=!1},t.prototype.syncSwitch=function(e){this._isSynced=!0;var t=this;e.addOnEnter(function(){t._isActive=!0}),e.addOnExit(function(){t._isActive=!1})},t}(e("./Gate").Gate);i.TimedGate=o},{"./Gate":15}],26:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../engine/display/Sprite"),a=e("../engine/display/AnimatedSprite"),r=e("../engine/util/mixins"),s=function(e){function t(t,i,n,o,a){var r=e.call(this,t,i)||this;return r.initAnimation(i),r._totalTime=n,r._startPos=o,r._endPos=a,r._timeElapsed=0,r}return n(t,e),t.prototype.update=function(t){void 0===t&&(t=0),e.prototype.update.call(this,t),this.updateAnimation(),this._timeElapsed+=t,this.position=this._startPos.add(this._endPos.subtract(this._startPos).multiply(Math.max(0,Math.min(1,this._timeElapsed/this._totalTime))))},t.prototype.reset=function(){this._timeElapsed=0,this.position=this._startPos},Object.defineProperty(t.prototype,"isFinished",{get:function(){return this._timeElapsed>=this._totalTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameDuration",{get:function(){return this._totalTime},set:function(e){this._totalTime=e},enumerable:!0,configurable:!0}),t}(o.Sprite);i.TimerUI=s,r.applyMixins(s,[a.AnimatedSpriteBase])},{"../engine/display/AnimatedSprite":28,"../engine/display/Sprite":35,"../engine/util/mixins":53}],27:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../engine/display/ColliderSprite"),a=e("../engine/events/EventTypes"),r=e("../engine/events/EventDispatcher"),s=e("../engine/display/DisplayObjectContainer"),l=e("../engine/util/ArrayList"),d=e("../engine/util/mixins"),c=e("./PlayerObject"),p=function(e){function t(t){var i=e.call(this,t,"")||this;return i.collisionLayer=0,i.isTrigger=!0,i._playersInZone=new l.ArrayList,r.EventDispatcher.addGlobalListener(a.CollisionEventArgs.ClassName,i.collisionHandler),i}return n(t,e),t.prototype.refreshState=function(){this._playersInZone=new l.ArrayList},Object.defineProperty(t.prototype,"isPlayerInZone",{get:function(){return this._playersInZone.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collisionHandler",{get:function(){var e=this,t=this;return function(i){if((i.obj1===t||i.obj2===t)&&(i.obj1 instanceof c.PlayerObject||i.obj2 instanceof c.PlayerObject)){var n=i.obj1 instanceof c.PlayerObject?i.obj1:i.obj2;i.type==a.CollisionType.Enter?e._playersInZone.add(n):i.type==a.CollisionType.Exit&&e._playersInZone.remove(n)}}},enumerable:!0,configurable:!0}),t}(s.DisplayObjectContainer);i.TriggerZone=p,d.applyMixins(p,[o.RectColliderSpriteBase])},{"../engine/display/ColliderSprite":30,"../engine/display/DisplayObjectContainer":32,"../engine/events/EventDispatcher":39,"../engine/events/EventTypes":40,"../engine/util/ArrayList":47,"../engine/util/mixins":53,"./PlayerObject":21}],28:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Sprite"),a=e("../util/mixins"),r=e("yamljs"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.initAnimation=function(e){this._isAnimating=!1,this._isPaused=!1,this._isReversed=!1,this._isStuck=!1,this._currentAnimId="",this._currentState=0,this._frameCounter=0,this._configDict={},this._globalSpeed=1;var t=e.slice(0,e.lastIndexOf("."))+".yml",i=r.load("resources/"+t);for(var n in i)"default"==n?this.animate(i[n]):this._configDict[n]=i[n]},t.prototype.updateAnimation=function(){if(this._isAnimating&&!this._isPaused&&!this._isStuck&&(this._frameCounter+=1,this._frameCounter>=this.getCurrentConfig().framesPerState/this._globalSpeed&&(this._isReversed?this._currentState-=1:this._currentState+=1,this._frameCounter=0),this._isReversed&&this._currentState<0||this._currentState==this.getCurrentConfig().numStates))switch(this.getCurrentConfig().endBehavior.name){case"loop":this._currentState=0;break;case"reverse":this._currentState=this._isReversed?1:this.getCurrentConfig().numStates-2,this._isReversed=!this._isReversed;break;case"stayInState":this._currentState=this.getCurrentConfig().numStates-1,this._isStuck=!0;break;default:console.log("unrecognized animation end behavior: "+this.getCurrentConfig().endBehavior.name)}},t.prototype.drawImage=function(e){this._isAnimating&&e.drawImage(this.displayImage,this.getCurrentConfig().width*this._currentState,this.getCurrentConfig().startRowPixel,this.getCurrentConfig().width,this.getCurrentConfig().height,0,0,this.getCurrentConfig().width,this.getCurrentConfig().height)},t.prototype.getCurrentConfig=function(){return this._configDict[this._currentAnimId]},t.prototype.getUnscaledWidth=function(){return this._isAnimating?this.getCurrentConfig().width:0},t.prototype.getUnscaledHeight=function(){return this._isAnimating?this.getCurrentConfig().height:0},t.prototype.isPaused=function(){return this._isPaused},t.prototype.setPaused=function(e){this._isPaused=e},t.prototype.setGlobalSpeed=function(e){this._globalSpeed=e},t.prototype.getGlobalSpeed=function(){return this._globalSpeed},Object.defineProperty(t.prototype,"currentAnimationState",{get:function(){return this._currentAnimId},enumerable:!0,configurable:!0}),t.prototype.animate=function(e){this._currentAnimId!=e&&(this._currentAnimId=e,this.restartAnimation())},t.prototype.restartAnimation=function(){this._currentState=0,this._frameCounter=0,this._isReversed=!1,this._isStuck=!1,this._isAnimating=!0},t}(o.Sprite);i.AnimatedSpriteBase=s;var l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.initAnimation(i),n}return n(t,e),t.prototype.update=function(t){void 0===t&&(t=0),e.prototype.update.call(this,t),this.updateAnimation()},t}(o.Sprite);i.AnimatedSprite=l,a.applyMixins(l,[s])},{"../util/mixins":53,"./Sprite":35,yamljs:11}],29:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./DisplayObjectContainer"),a=e("../events/EventDispatcher"),r=e("../events/EventTypes"),s=e("../util/Vector"),l=e("../util/mixins"),d=function(e){function t(t){var i=e.call(this,t,"")||this;return i.initDispatcher(),i._screenPosition=s.Vector.zero,i._focusIndex=-1,i._focusThreshold=0,i._focusWidth=0,i._xBounds=[-1e6,1e6],i._smoothFactor=.05,i}return n(t,e),Object.defineProperty(t.prototype,"screenPosition",{get:function(){return this._screenPosition},set:function(e){this._screenPosition=e},enumerable:!0,configurable:!0}),t.prototype.scroll=function(e){this.screenPosition=new s.Vector(this.screenPosition.x+e,this.screenPosition.y)},t.prototype.setFocus=function(e,t,i){this._focusIndex=e,this._focusThreshold=t,this._focusWidth=i},t.prototype.setXBounds=function(e,t){this._xBounds[0]=e,this._xBounds[1]=t,this.boundPosition()},t.prototype.update=function(t){void 0===t&&(t=0),e.prototype.update.call(this,t);var i=this.screenPosition;if(this._focusIndex>=0&&this._focusIndex<this.children.size()){var n=this.children.get(this._focusIndex).position.x+this.screenPosition.x,o=(this._focusWidth-this._focusThreshold)/2,a=(this._focusWidth+this._focusThreshold)/2;n<o?this.scroll((o-n)*this._smoothFactor):n>a&&this.scroll((a-n)*this._smoothFactor)}this.boundPosition(),this.screenPosition.equals(i)||this.dispatchEvent(new r.CameraScrollEventArgs(this.screenPosition.subtract(i)))},t.prototype.draw=function(t){t.clearRect(0,0,this.width,this.height),e.prototype.draw.call(this,t)},t.prototype.boundPosition=function(){this.screenPosition.x=Math.max(this.screenPosition.x,-(this._xBounds[1]-this._focusWidth)),this.screenPosition.x=Math.min(this.screenPosition.x,-this._xBounds[0])},t.prototype.applyTransformations=function(e){this.parent&&e.translate(this.parent.pivotPoint.x*this.parent.unscaledWidth,this.parent.pivotPoint.y*this.parent.unscaledHeight),e.translate(this.screenPosition.x,this.screenPosition.y),e.scale(this.localScale.x,this.localScale.y),e.rotate(Math.PI*this.rotation/180),e.translate(-this.pivotDistance.x,-this.pivotDistance.y),e.globalAlpha=Math.min(1,Math.max(0,e.globalAlpha*this.alpha))},t.prototype.reverseTransformations=function(e){0!=this.alpha?e.globalAlpha=Math.min(1,Math.max(0,e.globalAlpha/this.alpha)):this.parent?e.globalAlpha=this.parent.alpha:e.globalAlpha=1,e.translate(this.pivotDistance.x,this.pivotDistance.y),e.rotate(Math.PI*-this.rotation/180),0!=this.localScale.x&&0!=this.localScale.y&&e.scale(1/this.localScale.x,1/this.localScale.y),e.translate(-this.screenPosition.x,-this.screenPosition.y),this.parent&&e.translate(-this.parent.pivotPoint.x*this.parent.unscaledWidth,-this.parent.pivotPoint.y*this.parent.unscaledHeight)},t}(o.DisplayObjectContainer);i.Camera=d,l.applyMixins(d,[a.EventDispatcher])},{"../events/EventDispatcher":39,"../events/EventTypes":40,"../util/Vector":52,"../util/mixins":53,"./DisplayObjectContainer":32}],30:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../util/Rectangle"),a=e("../util/Circle"),r=e("./Sprite"),s=e("../util/mixins"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getHitbox=function(){var e=this.getGlobalPosition();return o.Rectangle.fromPointDim(e,this.width,this.height)},t}(r.Sprite);i.RectColliderSpriteBase=l;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getHitbox=function(){var e=this.getGlobalPosition().add(this.dimensions.divide(2));return new a.Circle(e,this.width/2)},t}(r.Sprite);i.CircleColliderSpriteBase=d;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(r.Sprite);i.CircleColliderSprite=c,s.applyMixins(c,[d]);var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(r.Sprite);i.RectColliderSprite=p,s.applyMixins(p,[l])},{"../util/Circle":48,"../util/Rectangle":51,"../util/mixins":53,"./Sprite":35}],31:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../util/Vector"),o=e("../util/Physics"),a=e("../util/typecheck"),r=function(){function e(t,i){this._id=t,this._loaded=!1,this._filename=i,this.loadImage(i),this.visible=!0,this.active=!0,this.position=n.Vector.zero,this.pivotPoint=n.Vector.zero,this.localScale=n.Vector.one,this._altDimensions=n.Vector.zero,this.rotation=0,this.alpha=1,this.parent=null,e._objectHash[t]=this}return e.prototype.loadImage=function(e){if(e){var t=this;this._displayImage=new Image,this._displayImage.onload=function(){t.onDisplayImageLoaded()},this._displayImage.src="resources/"+e}},e.prototype.update=function(e){void 0===e&&(e=0)},e.prototype.draw=function(e){this._loaded&&this.displayImage&&this.visible&&(this.applyTransformations(e),this.drawImage(e),this.reverseTransformations(e))},e.prototype.isInRect=function(e){var t=this.getLocalPosition(e);return t.x>0&&t.x<this.unscaledWidth&&t.y>0&&t.y<this.unscaledHeight},e.prototype.getGlobalPosition=function(e){void 0===e&&(e=n.Vector.zero);for(var t=e,i=this;null!=i;)t=t.subtract(i.pivotDistance).rotate(Math.PI*i.rotation/180).multiply(i.localScale).add(i.position),i=i.parent;return t},e.prototype.getLocalPosition=function(e){for(var t=e,i=[],n=this;null!=n;n=n.parent)i.push(n);for(var o=i.length-1;o>=0;o--){var a=i[o];t=t.subtract(a.position).divide(a.localScale).rotate(Math.PI*-a.rotation/180).add(a.pivotDistance)}return t},e.prototype.collidesWith=function(e){return!!a.isCollider(this)&&(!!o.Physics.CheckCollisionMat(this.collisionLayer,e.collisionLayer)&&o.Physics.CheckCollisionHitbox(this.getHitbox(),e.getHitbox()))},e.prototype.drawImage=function(e){e.drawImage(this.displayImage,0,0)},e.prototype.onDisplayImageLoaded=function(){this._loaded=!0,0!=this._altDimensions.x&&(this.localScale.x=this._altDimensions.x/this.displayImage.width),0!=this._altDimensions.y&&(this.localScale.y=this._altDimensions.y/this.displayImage.height)},e.prototype.applyTransformations=function(e){this.parent&&e.translate(this.parent.pivotDistance.x,this.parent.pivotDistance.y),e.translate(this.position.x,this.position.y),e.scale(this.localScale.x,this.localScale.y),e.rotate(Math.PI*this.rotation/180),e.translate(-this.pivotDistance.x,-this.pivotDistance.y),e.globalAlpha=Math.min(1,Math.max(0,e.globalAlpha*this.alpha))},e.prototype.reverseTransformations=function(e){0!=this.alpha?e.globalAlpha=Math.min(1,Math.max(0,e.globalAlpha/this.alpha)):this.parent?e.globalAlpha=this.parent.alpha:e.globalAlpha=1,e.translate(this.pivotDistance.x,this.pivotDistance.y),e.rotate(Math.PI*-this.rotation/180),0!=this.localScale.x&&0!=this.localScale.y&&e.scale(1/this.localScale.x,1/this.localScale.y),e.translate(-this.position.x,-this.position.y),this.parent&&e.translate(-this.parent.pivotDistance.x,-this.parent.pivotDistance.y)},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(e){this._active=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pivotPoint",{get:function(){return this._pivotPoint},set:function(e){this._pivotPoint=e.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localScale",{get:function(){return this._localScale},set:function(e){this._localScale=e.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(e){this._alpha=Math.min(Math.max(e,0),1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(e){this._parent=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayImage",{get:function(){return this._displayImage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(e){this.position.x=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(e){this.position.y=e},enumerable:!0,configurable:!0}),e.prototype.getUnscaledWidth=function(){return null!=this.displayImage?this.displayImage.width:this._altDimensions.x},e.prototype.getUnscaledHeight=function(){return null!=this.displayImage?this.displayImage.height:this._altDimensions.y},Object.defineProperty(e.prototype,"unscaledWidth",{get:function(){return this.getUnscaledWidth()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unscaledHeight",{get:function(){return this.getUnscaledHeight()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.unscaledWidth*this.localScale.x},set:function(e){null!=this.displayImage&&0!=this.displayImage.width?this.localScale.x=e/this.displayImage.width:this._altDimensions.x=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.unscaledHeight*this.localScale.y},set:function(e){null!=this.displayImage&&0!=this.displayImage.height?this.localScale.y=e/this.displayImage.height:this._altDimensions.y=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return new n.Vector(this.width,this.height)},set:function(e){this.width=e.x,this.height=e.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pivotDistance",{get:function(){return new n.Vector(this.pivotPoint.x*this.unscaledWidth,this.pivotPoint.y*this.unscaledHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filename",{get:function(){return this._filename},enumerable:!0,configurable:!0}),e.getById=function(t){return e._objectHash[t]},e.removeReference=function(t){var i=e._objectHash[t];return delete e._objectHash[t],i},e}();r._objectHash={},i.DisplayObject=r},{"../util/Physics":50,"../util/Vector":52,"../util/typecheck":54}],32:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./DisplayObject"),a=e("../util/ArrayList"),r=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._children=new a.ArrayList,n}return n(t,e),t.prototype.update=function(t){void 0===t&&(t=0),e.prototype.update.call(this,t);for(var i=0;i<this.children.size();i++)this.children.get(i).active&&this.children.get(i).update(t)},t.prototype.draw=function(t){if(e.prototype.draw.call(this,t),this.visible){this.applyTransformations(t);for(var i=0;i<this.children.size();i++)this.children.get(i).draw(t);this.reverseTransformations(t)}},t.prototype.collidesWith=function(t){if(e.prototype.collidesWith.call(this,t))return!0;for(var i=0;i<this.children.size();i++)if(this.children.get(i).collidesWith(t))return!0;return!1},t.prototype.map=function(e){e(this);for(var i=0;i<this.children.size();i++)this.children.get(i)instanceof t?this.children.get(i).map(e):e(this.children.get(i))},t.prototype.addChild=function(e){return this.setChild(e,this.children.size())},t.prototype.setChild=function(e,t){return t>=0&&t<=this.children.size()&&(this.children.set(t,e),e.parent=this),this},t.prototype.getChild=function(e){return this.children.get(e)},t.prototype.getChildById=function(e){for(var t=0;t<this.children.size();t++)if(this.children.get(t).id==e)return this.children.get(t);return null},t.prototype.containsChild=function(e){return this.children.contains(e)},t.prototype.removeChild=function(e){return this.containsChild(e)&&t._removeQueue.push(e),this},t.prototype.removeAtIndex=function(e){return e>0&&e<this.children.length&&t._removeQueue.push(this.children.get(e)),this},t.prototype.removeSelf=function(){null!=this.parent&&this.parent instanceof t&&t._removeQueue.push(this)},t.prototype.clearChildren=function(){return this._children=new a.ArrayList,this},t.prototype.clearReferences=function(){this.map(function(e){o.DisplayObject.removeReference(e.id)})},t.DrainRemoveQueue=function(){for(var e=0;e<t._removeQueue.length;e++){var i=t._removeQueue[e];i.parent.children.remove(i),i.parent=null}t._removeQueue=[]},Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),t}(o.DisplayObject);r._removeQueue=[],i.DisplayObjectContainer=r},{"../util/ArrayList":47,"./DisplayObject":31}],33:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../input/InputHandler"),a=e("../tween/TweenManager"),r=e("../events/CallbackManager"),s=e("../sound/SoundManager"),l=e("../display/DisplayObjectContainer"),d=e("../util/Physics"),c=e("../util/GameClock"),p=function(e){function t(i,n,a,r){var s=e.call(this,i,"")||this;return s._width=n,s._height=a,s._canvas=r,s._g=r.getContext("2d"),s._canvas.width=n,s._canvas.height=a,s._playing=!1,s._doGlobalUpdates=!0,s._clock=new c.GameClock,s._lastTimestamp=s._clock.getElapsedTime(),t._instance=s,o.InputHandler.instance.registerInputFocus(s._canvas),s}return n(t,e),t.prototype.update=function(t){if(void 0===t&&(t=0),0==t){var i=this._clock.getElapsedTime();t=(i-this._lastTimestamp)/1e3,this._lastTimestamp=i}e.prototype.update.call(this,t),this._doGlobalUpdates&&(d.Physics.CollisionUpdate(this),a.TweenManager.instance.update(t),r.CallbackManager.instance.update(t),s.SoundManager.instance.update(t)),l.DisplayObjectContainer.DrainRemoveQueue()},t.prototype.draw=function(t){t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.width,this.height),e.prototype.draw.call(this,t)},t.prototype.start=function(){this._playing=!0,window.requestAnimationFrame(this.nextFrameWrapper)},t.prototype.pause=function(){this._playing=!1},t.prototype.pauseGlobalUpdates=function(){this._doGlobalUpdates=!1},t.prototype.resumeGlobalUpdates=function(){this._doGlobalUpdates=!0},Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this._playing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.getUnscaledWidth()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.getUnscaledHeight()},enumerable:!0,configurable:!0}),t.prototype.getUnscaledWidth=function(){return this._width},t.prototype.getUnscaledHeight=function(){return this._height},Object.defineProperty(t.prototype,"nextFrameWrapper",{get:function(){var e=this;return function(){e.update(),e.draw(e._g),o.InputHandler.instance.update(),e._playing&&window.requestAnimationFrame(e.nextFrameWrapper)}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"instance",{get:function(){return t._instance},enumerable:!0,configurable:!0}),t}(l.DisplayObjectContainer);i.Game=p},{"../display/DisplayObjectContainer":32,"../events/CallbackManager":38,"../input/InputHandler":42,"../sound/SoundManager":43,"../tween/TweenManager":45,"../util/GameClock":49,"../util/Physics":50}],34:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Sprite"),a=e("../util/Vector"),r=e("../util/Physics"),s=e("../tween/TweenManager"),l=e("../util/mixins"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.addForce=function(e){this._currentForce=this._currentForce.add(e)},t.prototype.initPhysics=function(){this.mass=1,this.elasticity=0,this.acceleration=a.Vector.zero,this.velocity=a.Vector.zero,this.terminalSpeeds=a.Vector.zero,this.previousPosition=a.Vector.zero,this._currentForce=a.Vector.zero},t.prototype.updatePhysics=function(){if(this.previousPosition=this.position,!s.TweenManager.instance.isTweening(this)){var e=r.Physics.DeltaTime;this.acceleration=this._currentForce.divide(this.mass),this.velocity=this.velocity.add(this.acceleration.multiply(e)),0!=this.terminalSpeeds.x&&Math.abs(this.velocity.x)>this.terminalSpeeds.x&&(this.velocity.x=(this.velocity.x<0?-1:1)*this.terminalSpeeds.x),0!=this.terminalSpeeds.y&&Math.abs(this.velocity.y)>this.terminalSpeeds.y&&(this.velocity.y=(this.velocity.y<0?-1:1)*this.terminalSpeeds.y),this.position=this.position.add(this.velocity.multiply(e).add(this.acceleration.multiply(e*e)).multiply(r.Physics.PixelsPerMeter)),this._currentForce=a.Vector.zero}},t}(o.Sprite);i.PhysicsSpriteBase=d;var c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.initPhysics(),n}return n(t,e),t.prototype.update=function(t){void 0===t&&(t=0),e.prototype.update.call(this,t),this.updatePhysics()},t}(o.Sprite);i.PhysicsSprite=c,l.applyMixins(c,[d])},{"../tween/TweenManager":45,"../util/Physics":50,"../util/Vector":52,"../util/mixins":53,"./Sprite":35}],35:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(t,i){return e.call(this,t,i)||this}return n(t,e),t}(e("./DisplayObjectContainer").DisplayObjectContainer);i.Sprite=o},{"./DisplayObjectContainer":32}],36:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./DisplayObjectContainer"),a=e("../util/Vector"),r=function(e){function t(t){var i=e.call(this,t,"")||this;return i._color=a.Vector.zero,i._text="",i._fontSize=12,i._fontFamily="serif",i}return n(t,e),t.prototype.draw=function(t){this.applyTransformations(t),t.font=this._fontSize.toString(10)+"px "+this._fontFamily,t.fillStyle=this.colorToHex,t.fillText(this.text,0,0),this.reverseTransformations(t),e.prototype.draw.call(this,t)},Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e.max(0).min(255)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this._fontFamily=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorToHex",{get:function(){return"#"+("00"+this.color.r.toString(16)).slice(-2)+("00"+this.color.g.toString(16)).slice(-2)+("00"+this.color.b.toString(16)).slice(-2)},enumerable:!0,configurable:!0}),t}(o.DisplayObjectContainer);i.TextObject=r},{"../util/Vector":52,"./DisplayObjectContainer":32}],37:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./DisplayObjectContainer"),a=e("../util/Vector"),r=function(e){function t(t,i,n,o,a,r){void 0===r&&(r=0);var s=e.call(this,t,i)||this;return s._targetWidth=n,s._targetHeight=o,s._factoryMethod=a,s._overlap=r,s}return n(t,e),t.prototype.onDisplayImageLoaded=function(){e.prototype.onDisplayImageLoaded.call(this);for(var t=this.displayImage.width,i=this.displayImage.height,n=this._targetHeight/i,o=this._targetWidth/(t*n),r=0;r<o;r++){this.addChild(s=this._factoryMethod(this.id+"_"+r,this.filename));var s;s.position.x=r*(t*n)-this._overlap*r,s.localScale=new a.Vector(n,n)}this.displayImage.src=""},t}(o.DisplayObjectContainer);i.TiledSpriteContainer=r},{"../util/Vector":52,"./DisplayObjectContainer":32}],38:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.callbackLst=[]}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.update=function(e){for(var t=[],i=0;i<this.callbackLst.length;i+=1){if(this.callbackLst[i][0]-=e,this.callbackLst[i][0]<=0){if(this.callbackLst[i][3](),!this.callbackLst[i][2])continue;this.callbackLst[i][0]+=this.callbackLst[i][1]}t.push(this.callbackLst[i])}this.callbackLst=t},e.prototype.addCallback=function(e,t,i){void 0===i&&(i=!1),this.callbackLst.push([t,t,i,e])},e}();i.CallbackManager=n},{}],39:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../util/ArrayList"),o=function(){function e(){}return Object.defineProperty(e.prototype,"className",{get:function(){return this.constructor.ClassName},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ClassName",{get:function(){return"EventArgs"},enumerable:!0,configurable:!0}),e}();i.EventArgs=o;var a=function(){function e(){}return e.prototype.initDispatcher=function(){this._listeners={}},e.addGlobalListener=function(t,i){e._addEventListener(e._gListeners,t,i)},e.removeGlobalListener=function(t,i){e._removeEventListener(e._gListeners,t,i)},e.hasGlobalListener=function(t,i){return e._hasEventListener(e._gListeners,t,i)},e.prototype.addEventListener=function(t,i){e._addEventListener(this._listeners,t,i)},e.prototype.removeEventListener=function(t,i){e._removeEventListener(this._listeners,t,i)},e.prototype.hasEventListener=function(t,i){return e._hasEventListener(this._listeners,t,i)},e._addEventListener=function(e,t,i){null==e[t]&&(e[t]=new n.ArrayList),e[t].push(i)},e._removeEventListener=function(e,t,i){null!=e[t]&&e[t].remove(i)},e._hasEventListener=function(e,t,i){return null!=e[t]&&e[t].contains(i)},e.prototype.dispatchEvent=function(t){var i=function(e){if(e)for(var i=0;i<e.size();i++)e.get(i)(t)};t.src=this,i(this._listeners[t.className]),i(e._gListeners[t.className])},e}();a._gListeners={},i.EventDispatcher=a},{"../util/ArrayList":47}],40:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventDispatcher"),a=function(e){function t(t,i,n,o){var a=e.call(this)||this;return a.obj1=t,a.obj2=i,a.normal=n,a.type=o,a}return n(t,e),Object.defineProperty(t,"ClassName",{get:function(){return"CollisionEventArgs"},enumerable:!0,configurable:!0}),t}(o.EventArgs);i.CollisionEventArgs=a;!function(e){e[e.Enter=0]="Enter",e[e.Stay=1]="Stay",e[e.Exit=2]="Exit"}(i.CollisionType||(i.CollisionType={}));var r=function(e){function t(){return e.call(this)||this}return n(t,e),Object.defineProperty(t,"ClassName",{get:function(){return"TweenEventArgs"},enumerable:!0,configurable:!0}),t}(o.EventArgs);i.TweenEventArgs=r;var s=function(e){function t(t){var i=e.call(this)||this;return i.dp=t,i}return n(t,e),Object.defineProperty(t,"ClassName",{get:function(){return"CameraScrollEventArgs"},enumerable:!0,configurable:!0}),t}(o.EventArgs);i.CameraScrollEventArgs=s},{"./EventDispatcher":39}],41:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e){this.gamepad=e}return e.prototype.isButtonPressed=function(e){return this.buttonPressed(this.getButton(e))},e.prototype.getLeftStickXAxis=function(){return this.getAxisById(0)},e.prototype.getLeftStickYAxis=function(){return this.getAxisById(1)},e.prototype.getRightStickXAxis=function(){return this.getAxisById(2)},e.prototype.getRightStickYAxis=function(){return this.getAxisById(3)},e.prototype.getButton=function(e){return this.gamepad&&this.gamepad.buttons&&e>=0&&e<this.gamepad.buttons.length?this.gamepad.buttons[e]:null},e.prototype.buttonPressed=function(e){return null!=e&&e.pressed},e.prototype.getAxisById=function(e){if(this.gamepad&&this.gamepad.axes&&this.gamepad.axes[e])return this.gamepad.axes[e]},e.prototype.printGamepadInfo=function(){if(this.gamepad){for(t=0;t<this.gamepad.buttons.length;t++){var e=this.gamepad.buttons[t];e&&e.pressed&&console.log("Button id: "+t+"; Pressed: "+e.pressed)}for(var t=0;t<this.gamepad.axes.length;t++){var i=this.gamepad.axes[t];i&&Math.abs(i)>.5&&console.log("Axis id: "+t+"; Value: "+i)}}},e}();i.InputGamepad=n},{}],42:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../util/Vector"),o=e("../util/GameClock"),a=e("./InputGamepad"),r=function(){function e(){this.clock=new o.GameClock,this.lastTimestamp=this.clock.getElapsedTime(),this.pressedKeys=[],this.pressedButtons=[],this.pressedGamepadButtons=[],this.gamepadStates=[];for(e=0;e<256;e++)this.pressedKeys[e]={timestamp:this.clock.start,state:0};for(e=0;e<3;e++)this.pressedButtons[e]={timestamp:this.clock.start,location:new n.Vector(0,0),state:0};for(var e=0;e<4;e++){this.pressedGamepadButtons[e]=[];for(var t=0;t<16;t++)this.pressedGamepadButtons[e][t]={timestamp:this.clock.start,state:0}}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.registerInputFocus=function(e){null!=this._element&&(this._element.onmousedown=null,this._element.onmousemove=null,this._element.onmouseup=null),this._element=e,this._element.onmousedown=this.onMouseDownWrapper(),this._element.onmousemove=this.onMouseMoveWrapper(),this._element.onmouseup=this.onMouseUpWrapper(),window.onkeydown=this.onKeyDownWrapper(),window.onkeyup=this.onKeyUpWrapper()},e.prototype.update=function(){this.lastTimestamp=this.clock.getElapsedTime(),this.gamepadStates=this.pollGamepads();for(var e=0;e<this.gamepadStates.length;e++)for(var t=0;t<16;t++){var i=this.gamepadStates[e].isButtonPressed(t)?1:0;i!=this.pressedGamepadButtons[e][t].state&&(this.pressedGamepadButtons[e][t]={timestamp:this.lastTimestamp+.001,state:i})}},e.prototype.mouseDown=function(e){var t=e||0;return this.pressedButtons[t].timestamp>this.lastTimestamp&&1==this.pressedButtons[t].state?this.pressedButtons[t].location:null},e.prototype.mouseUp=function(e){var t=e||0;return this.pressedButtons[t].timestamp>this.lastTimestamp&&0==this.pressedButtons[t].state?this.pressedButtons[t].location:null},e.prototype.mouseHeld=function(e){var t=e||0;return 1==this.pressedButtons[t].state?this.pressedButtons[t].location:null},e.prototype.mouseLocation=function(e){var t=e||0;return this.pressedButtons[t].location},e.prototype.keyDown=function(e){var t=this.parseKeyParam(e);return this.pressedKeys[t].timestamp>this.lastTimestamp&&1==this.pressedKeys[t].state},e.prototype.keyUp=function(e){var t=this.parseKeyParam(e);return this.pressedKeys[t].timestamp>this.lastTimestamp&&0==this.pressedKeys[t].state},e.prototype.keyHeld=function(e){var t=this.parseKeyParam(e);return 1==this.pressedKeys[t].state},e.prototype.gamepadPresent=function(e){return null!=this.gamepadStates[e]},e.prototype.gamepadButtonDown=function(e,t){return this.gamepadPresent(e)&&this.pressedGamepadButtons[e][t].timestamp>this.lastTimestamp&&1==this.pressedGamepadButtons[e][t].state},e.prototype.gamepadButtonUp=function(e,t){return this.gamepadPresent(e)&&this.pressedGamepadButtons[e][t].timestamp>this.lastTimestamp&&0==this.pressedGamepadButtons[e][t].state},e.prototype.gamepadButtonHeld=function(e,t){return this.gamepadPresent(e)&&1==this.pressedGamepadButtons[e][t].state},e.prototype.gamepadAxis=function(e,t){return this.gamepadPresent(e)?0==t?this.gamepadStates[e].getLeftStickXAxis():1==t?this.gamepadStates[e].getLeftStickYAxis():2==t?this.gamepadStates[e].getRightStickXAxis():3==t?this.gamepadStates[e].getRightStickYAxis():0:0},e.prototype.parseKeyParam=function(e){return"string"==typeof e?e.toUpperCase().charCodeAt(0):e},e.prototype.onMouseDownWrapper=function(){var e=this;return function(t){0==e.pressedButtons[t.button].state&&(e.pressedButtons[t.button].timestamp=e.clock.getElapsedTime()),e.pressedButtons[t.button].state=1,e.pressedButtons[t.button].location=new n.Vector(t.clientX,t.clientY)}},e.prototype.onMouseMoveWrapper=function(){var e=this;return function(t){e.pressedButtons[t.button].location=new n.Vector(t.clientX,t.clientY)}},e.prototype.onMouseUpWrapper=function(){var e=this;return function(t){1==e.pressedButtons[t.button].state&&(e.pressedButtons[t.button].timestamp=e.clock.getElapsedTime()),e.pressedButtons[t.button].state=0,e.pressedButtons[t.button].location=new n.Vector(t.clientX,t.clientY)}},e.prototype.onKeyDownWrapper=function(){var e=this;return function(t){0==e.pressedKeys[t.keyCode].state&&(e.pressedKeys[t.keyCode].timestamp=e.clock.getElapsedTime()),e.pressedKeys[t.keyCode].state=1}},e.prototype.onKeyUpWrapper=function(){var e=this;return function(t){1==e.pressedKeys[t.keyCode].state&&(e.pressedKeys[t.keyCode].timestamp=e.clock.getElapsedTime()),e.pressedKeys[t.keyCode].state=0}},e.prototype.pollGamepads=function(){for(var e=navigator.getGamepads?navigator.getGamepads():[],t=[],i=0;i<e.length;i++){var n=e[i];t.push(new a.InputGamepad(n))}return t},e}();i.InputHandler=r},{"../util/GameClock":49,"../util/Vector":52,"./InputGamepad":41}],43:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.mutedMusic=!1,this.mutedFX=!1,this.soundHash={},this.currentSongId="",this.nextSongId="",this.isFading=!1,this.fadeTimer=0,this.fadeTimeout=0}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.update=function(e){void 0===e&&(e=0),this.isFading&&(this.fadeTimer+=e,this.fadeTimer>this.fadeTimeout?(this.currentSongId in this.soundHash&&this.soundHash[this.currentSongId].audio.pause(),this.playMusic(this.nextSongId),this.currentSongId=this.nextSongId,this.isFading=!1):this.currentSongId in this.soundHash&&!this.isMusicMuted()&&(this.soundHash[this.currentSongId].audio.volume=Math.min(1,Math.max(0,1-this.fadeTimer/this.fadeTimeout))))},e.prototype.loadSound=function(e,t){if(t){this.soundHash[e]={loaded:!1,playOnLoad:!1,loopCount:0,audio:new Audio};var i=this;this.soundHash[e].audio.onloadstart=function(){i.soundHash[e].loaded=!0,i.soundHash[e].playOnLoad&&i.soundHash[e].audio.play()},this.soundHash[e].audio.onended=function(){0!=i.soundHash[e].loopCount&&(i.soundHash[e].loopCount-=1,i.soundHash[e].audio.play())},this.soundHash[e].audio.src="resources/"+t}},e.prototype.playFX=function(e){this.isFXMuted()||this.playSound(e,0)},e.prototype.playMusic=function(e,t){void 0===t&&(t=-1),this.isMusicMuted()||(this.playSound(e,t),this.currentSongId=e)},e.prototype.fadeToNext=function(e,t){e!=this.currentSongId&&(this.fadeTimeout=t,this.fadeTimer=0,this.nextSongId=e,this.isFading=!0)},e.prototype.setFXMuted=function(e){this.mutedFX=e},e.prototype.setMusicMuted=function(e){this.mutedMusic=e,this.isMusicMuted()?this.currentSongId in this.soundHash&&this.soundHash[this.currentSongId].audio.pause():this.playMusic(this.currentSongId)},e.prototype.isFXMuted=function(){return this.mutedFX},e.prototype.isMusicMuted=function(){return this.mutedMusic},e.prototype.playSound=function(e,t){e in this.soundHash&&(this.soundHash[e].loopCount=t,this.soundHash[e].loaded?(this.soundHash[e].audio.currentTime=0,this.soundHash[e].audio.volume=1,this.soundHash[e].audio.play()):this.soundHash[e].playOnLoad=!0)},e}();i.SoundManager=n},{}],44:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../util/ArrayList"),o=e("../events/EventTypes"),a=e("./TweenParam"),r=e("../events/EventDispatcher"),s=e("../util/mixins"),l=function(){function e(e){this.initDispatcher(),this._object=e,this._paramList=new n.ArrayList}return e.prototype.animate=function(e){return this._paramList.add([e,0]),this},e.prototype.update=function(e){for(var t=0;t<this._paramList.size();t++){var i=this.progress(this._paramList.get(t)[1],this._paramList.get(t)[0].duration,this._paramList.get(t)[0].function),n=this._paramList.get(t)[0].type,r=this._paramList.get(t)[0].startVal+(this._paramList.get(t)[0].endVal-this._paramList.get(t)[0].startVal)*i;n==a.TweenAttributeType.X?this._object.position.x=r:n==a.TweenAttributeType.Y?this._object.position.y=r:n==a.TweenAttributeType.ScaleX?this._object.localScale.x=r:n==a.TweenAttributeType.ScaleY?this._object.localScale.y=r:n==a.TweenAttributeType.Rotation?this._object.rotation=r:n==a.TweenAttributeType.Alpha&&(this._object.alpha=r)}this._paramList=this._paramList.filter(function(e){return e[1]<e[0].duration}),this._paramList=this._paramList.map(function(t){return[t[0],Math.min(t[1]+e,t[0].duration)]}),this.dispatchEvent(new o.TweenEventArgs)},Object.defineProperty(e.prototype,"isComplete",{get:function(){return 0==this._paramList.size()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),e.prototype.progress=function(e,t,i){return i==a.TweenFunctionType.Linear?e/t:i==a.TweenFunctionType.Quadratic?e*e/(t*t):void 0},e}();i.Tween=l,s.applyMixins(l,[r.EventDispatcher])},{"../events/EventDispatcher":39,"../events/EventTypes":40,"../util/ArrayList":47,"../util/mixins":53,"./TweenParam":46}],45:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../display/DisplayObject"),o=e("../util/ArrayList"),a=function(){function e(){this._tweenList=new o.ArrayList,this._tweenSet={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this._tweenList.add(e)},e.prototype.update=function(e){for(i=0;i<this._tweenList.size();i++)this._tweenList.get(i).update(e);this._tweenList=this._tweenList.filter(function(e){return!e.isComplete});for(var t={},i=0;i<this._tweenList.size();i++)t[this._tweenList.get(i).object.id]=0;this._tweenSet=t},e.prototype.isTweening=function(e){return e instanceof n.DisplayObject?e.id in this._tweenSet:e in this._tweenSet},e}();i.TweenManager=a},{"../display/DisplayObject":31,"../util/ArrayList":47}],46:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});!function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.ScaleX=2]="ScaleX",e[e.ScaleY=3]="ScaleY",e[e.Rotation=4]="Rotation",e[e.Alpha=5]="Alpha"}(i.TweenAttributeType||(i.TweenAttributeType={}));!function(e){e[e.Linear=0]="Linear",e[e.Quadratic=1]="Quadratic"}(i.TweenFunctionType||(i.TweenFunctionType={}));var n=function(){function e(e,t,i,n,o){this._type=e,this._startVal=t,this._endVal=i,this._duration=n,this._function=o}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startVal",{get:function(){return this._startVal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endVal",{get:function(){return this._endVal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"function",{get:function(){return this._function},enumerable:!0,configurable:!0}),e}();i.TweenParam=n},{}],47:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.contents=[]}return e.prototype.add=function(e){this.contents.push(e)},e.prototype.push=function(e){this.add(e)},e.prototype.size=function(){return this.contents.length},Object.defineProperty(e.prototype,"length",{get:function(){return this.contents.length},enumerable:!0,configurable:!0}),e.prototype.itemAt=function(e){return this.contents[e]},e.prototype.get=function(e){return this.itemAt(e)},e.prototype.indexOf=function(e){for(var t=0;t<this.contents.length;t++)if(this.contents[t]==e)return t;return-1},e.prototype.contains=function(e){return-1!=this.indexOf(e)},e.prototype.set=function(e,t){this.contents[e]=t},e.prototype.remove=function(e){for(var t=[],i=0;i<this.contents.length;i++)this.contents[i]!=e&&t.push(this.contents[i]);this.contents=t},e.prototype.removeAt=function(e){for(var t=[],i=0;i<this.contents.length;i++)i!=e&&t.push(this.contents[i]);this.contents=t},e.prototype.map=function(t){for(var i=new e,n=0;n<this.contents.length;n++)i.push(t(this.contents[n]));return i},e.prototype.filter=function(t){for(var i=new e,n=0;n<this.contents.length;n++)t(this.contents[n])&&i.push(this.contents[n]);return i},e.prototype.print=function(){for(var e=0;e<this.contents.length;e++)console.log(this.contents[e]+", ")},e}();i.ArrayList=n},{}],48:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){this.center=e,this.radius=t}return Object.defineProperty(e.prototype,"area",{get:function(){return this.radius*this.radius*Math.PI},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"perimeter",{get:function(){return 2*this.radius*Math.PI},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"circumference",{get:function(){return this.perimeter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diameter",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),e}();i.Circle=n},{}],49:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.resetGameClock()}return e.prototype.getElapsedTime=function(){return(new Date).getTime()-this._start},e.prototype.resetGameClock=function(){this._start=(new Date).getTime()},Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),e}();i.GameClock=n},{}],50:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("./Vector"),o=e("./Circle"),a=e("./Rectangle"),r=e("./typecheck"),s=e("../display/DisplayObject"),l=e("../events/EventDispatcher"),d=e("../events/EventTypes"),c=e("../tween/TweenManager"),p=e("./mixins"),u=function(){function e(){this.initDispatcher()}return e.SetCollisionMat=function(t,i,n){void 0===n&&(n=!0);var o=t<i?t:i,a=t>i?t:i;o in e._CollisionMatrix||(e._CollisionMatrix[o]=[]),n&&-1==e._CollisionMatrix[o].indexOf(a)?e._CollisionMatrix[o].push(a):n||-1==e._CollisionMatrix[o].indexOf(a)||e._CollisionMatrix[o].splice(e._CollisionMatrix[o].indexOf(a),1)},e.CheckCollisionMat=function(t,i){var n=t<i?t:i,o=t>i?t:i;return n in e._CollisionMatrix&&-1!=e._CollisionMatrix[n].indexOf(o)},e.GetCollisionPairs=function(){var t=[];for(var i in e._CollisionMatrix)for(var n=e._CollisionMatrix[i],o=0;o<n.length;o++)t.push([i,n[o]]);return t},e.CheckCollisionHitbox=function(t,i){return t instanceof o.Circle&&i instanceof o.Circle?e._ccCol(t,i):t instanceof a.Rectangle&&i instanceof o.Circle?e._rcCol(t,i):t instanceof o.Circle&&i instanceof a.Rectangle?e._rcCol(i,t):t instanceof a.Rectangle&&i instanceof a.Rectangle&&e._rrCol(t,i)},e._rrCol=function(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top},e._rcCol=function(e,t){var i=function(e,t){return(e.x-t.center.x)*(e.x-t.center.x)+(e.y-t.center.y)*(e.y-t.center.y)<=t.radius*t.radius},o=function(e,t){return e.x>t.left&&e.x<t.right&&e.y>t.top&&e.y<t.bottom};return o(t.center,e)||o(t.center.add(new n.Vector(0,t.radius)),e)||o(t.center.add(new n.Vector(t.radius,0)),e)||o(t.center.add(new n.Vector(0,-t.radius)),e)||o(t.center.add(new n.Vector(-t.radius,0)),e)||i(e.center,t)||i(e.topRightPoint,t)||i(e.topLeftPoint,t)||i(e.bottomRightPoint,t)||i(e.bottomLeftPoint,t)},e._ccCol=function(e,t){return e.center.subtract(t.center).lengthSquared()<(e.radius+t.radius)*(e.radius+t.radius)},e.CollisionUpdate=function(t){var i={};t.map(function(e){r.isCollider(e)&&(e.collisionLayer in i||(i[e.collisionLayer]=[]),i[e.collisionLayer].push(e))});for(var o=e.GetCollisionPairs(),a={},l=0;l<o.length;l++)for(var p=o[l][0],u=o[l][1],h=(p in i?i[p]:[]),f=(u in i?i[u]:[]),w=0;w<h.length;w++)for(var y=p==u?w+1:0;y<f.length;y++){var m=h[w],g=f[y];c.TweenManager.instance.isTweening(m)||c.TweenManager.instance.isTweening(g)||m.collidesWith(g)&&(m.id in a||(a[m.id]=[]),a[m.id].push(g.id),r.isPhysicsSprite(m)&&r.isPhysicsSprite(g)?e.ResolveDynamicCollision(m,g):r.isPhysicsSprite(m)?e.ResolveStaticCollision(m,g):r.isPhysicsSprite(g)&&e.ResolveStaticCollision(g,m))}for(var C in e._PreviousCollisions)for(l=0;l<e._PreviousCollisions[C].length;l++){var _=e._PreviousCollisions[C][l];e.PairExistsInMapping(C,_,a)||(new e).dispatchEvent(new d.CollisionEventArgs(s.DisplayObject.getById(C),s.DisplayObject.getById(_),n.Vector.zero,d.CollisionType.Exit))}e._PreviousCollisions=a},e.ResolveDynamicCollision=function(e,t){console.log("dynamic collision not implemented.")},e.ResolveStaticCollision=function(t,i){var o=t.position.subtract(t.previousPosition),r=function(n){var o=0,a=1,r=t.position;t.position=t.previousPosition;for(var s=0;s<e._NumResolutionSteps&&(s==e._NumResolutionSteps-1?t.collidesWith(i)&&(o-=a):(a/=2,t.collidesWith(i)?o-=a:o+=a),!(o<0));s++)t.position=t.previousPosition.add(n.multiply(o));return t.position=r,Math.max(0,Math.min(1,o))},s=r(new n.Vector(o.x,0)),l=r(new n.Vector(0,o.y)),c=n.Vector.zero;if(!i.isTrigger){t.position=t.previousPosition.add(new n.Vector(o.x*s,o.y*l));var p=t.getHitbox(),u=p instanceof a.Rectangle?p:a.Rectangle.fromBounds(p.center.x-p.radius,p.center.x+p.radius,p.center.y-p.radius,p.center.y+p.radius),h=i.getHitbox();if(h instanceof a.Rectangle){if(t.collidesWith(i)){for(var f=[Math.abs(h.top-u.bottom),Math.abs(h.bottom-u.top),Math.abs(h.left-u.right),Math.abs(h.right-u.left)],w=0,y=1;y<f.length;y++)f[y]<f[w]&&(w=y);m=t.getGlobalPosition();0==w?m.y=h.top-(t.height*(1-t.pivotPoint.y)+e.Epsilon):1==w?m.y=h.bottom+(t.height*t.pivotPoint.y+e.Epsilon):2==w?m.x=h.left-(t.width*(1-t.pivotPoint.x)+e.Epsilon):3==w&&(m.x=h.right+(t.width*t.pivotPoint.x+e.Epsilon)),t.position=(null!=t.parent?t.parent:t).getLocalPosition(m),u=(p=t.getHitbox())instanceof a.Rectangle?p:a.Rectangle.fromBounds(p.center.x-p.radius,p.center.x+p.radius,p.center.y-p.radius,p.center.y+p.radius)}u.right<h.left?c.x=-1:u.left>h.right&&(c.x=1),u.bottom<h.top?c.y=-1:u.top>h.bottom&&(c.y=1),c=c.unit()}else if(c=p.center.subtract(h.center).unit(),t.collidesWith(i)){var m=h.center.add(c.multiply(h.radius));c.x>0?m.x+=t.width*t.pivotPoint.x+e.Epsilon:m.x-=t.width*(1-t.pivotPoint.x)+e.Epsilon,c.y>0?m.y+=t.height*t.pivotPoint.y+e.Epsilon:m.y-=t.height*(1-t.pivotPoint.y)+e.Epsilon,t.position=(null!=t.parent?t.parent:t).getLocalPosition(m)}if(0==t.elasticity)t.velocity=new n.Vector(t.velocity.x*s,t.velocity.y*l);else{var g=t.velocity.subtract(c.multiply(2*t.velocity.dot(c)));t.velocity=g.multiply(t.elasticity)}}var C=e.PairExistsInMapping(t.id,i.id,e._PreviousCollisions)?d.CollisionType.Stay:d.CollisionType.Enter;(new e).dispatchEvent(new d.CollisionEventArgs(t,i,c,C))},e.PairExistsInMapping=function(e,t,i){return e in i&&-1!=i[e].indexOf(t)||t in i&&-1!=i[t].indexOf(e)},e}();u.GravityScalar=9.81,u.Gravity=new n.Vector(0,u.GravityScalar),u.PixelsPerMeter=10,u.Epsilon=1e-6,u.DeltaTime=.033,u._NumResolutionSteps=8,u._PreviousCollisions={},u._CollisionMatrix={},i.Physics=u,p.applyMixins(u,[l.EventDispatcher])},{"../display/DisplayObject":31,"../events/EventDispatcher":39,"../events/EventTypes":40,"../tween/TweenManager":45,"./Circle":48,"./Rectangle":51,"./Vector":52,"./mixins":53,"./typecheck":54}],51:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("./Vector"),o=function(){function e(e,t,i,n){this._left=e,this._right=t,this._top=i,this._bottom=n}return e.fromBounds=function(t,i,n,o){return new e(t,i,n,o)},e.fromPoints=function(t,i){return new e(t.x,i.x,t.y,i.y)},e.fromPointDim=function(t,i,n){return new e(t.x,t.x+i,t.y,t.y+n)},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._top},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._bottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeftPoint",{get:function(){return new n.Vector(this._left,this._top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRightPoint",{get:function(){return new n.Vector(this._right,this._top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeftPoint",{get:function(){return new n.Vector(this._left,this._bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRightPoint",{get:function(){return new n.Vector(this._right,this._bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return new n.Vector(this._left+this.width/2,this._top+this.height/2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._right-this._left},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._bottom-this._top},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height},enumerable:!0,configurable:!0}),e}();i.Rectangle=o},{"./Vector":52}],52:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0}return e.prototype.negative=function(){return new e(-this.x,-this.y,-this.z)},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z)},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z)},e.prototype.multiply=function(t){return t instanceof e?new e(this.x*t.x,this.y*t.y,this.z*t.z):new e(this.x*t,this.y*t,this.z*t)},e.prototype.divide=function(t){return t instanceof e?new e(this.x/t.x,this.y/t.y,this.z/t.z):new e(this.x/t,this.y/t,this.z/t)},e.prototype.equals=function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z},e.prototype.dot=function(e){return this.x*e.x+this.y*e.y+this.z*e.z},e.prototype.cross=function(t){return new e(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},e.prototype.length=function(){return Math.sqrt(this.lengthSquared())},e.prototype.lengthSquared=function(){return this.dot(this)},e.prototype.unit=function(){return this.divide(this.length())},e.prototype.min=function(t){return t instanceof e?new e(Math.min(this.x,t.x),Math.min(this.y,t.y),Math.min(this.z,t.z)):new e(Math.min(this.x,t),Math.min(this.y,t),Math.min(this.z,t))},e.prototype.max=function(t){return t instanceof e?new e(Math.max(this.x,t.x),Math.max(this.y,t.y),Math.max(this.z,t.z)):new e(Math.max(this.x,t),Math.max(this.y,t),Math.max(this.z,t))},e.prototype.toAngles=function(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}},e.prototype.angleTo=function(e){return Math.acos(this.dot(e)/this.lengthSquared())},e.prototype.rotate=function(t){return new e(Math.cos(t)*this.x-Math.sin(t)*this.y,Math.sin(t)*this.x+Math.cos(t)*this.y)},e.prototype.toArray=function(e){return[this.x,this.y,this.z].slice(0,e||3)},e.prototype.clone=function(){return new e(this.x,this.y,this.z)},e.prototype.init=function(e,t,i){return this.x=e,this.y=t,this.z=i,this},Object.defineProperty(e.prototype,"r",{get:function(){return this.x},set:function(e){this.x=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return this.y},set:function(e){this.y=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return this.z},set:function(e){this.z=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"zero",{get:function(){return new e(0,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"one",{get:function(){return new e(1,1,1)},enumerable:!0,configurable:!0}),e}();i.Vector=n},{}],53:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.applyMixins=function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(i){e.prototype[i]=t.prototype[i]})})}},{}],54:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.isCollider=function(e){return"getHitbox"in e},i.isAnimatedSprite=function(e){return"animate"in e},i.isPhysicsSprite=function(e){return"addForce"in e}},{}]},{},[17]);
//# sourceMappingURL=bundle.js.map
